import {
    r as Hi,
    g as ir,
    a as zi,
    b as Vi,
    c as Ji,
    t as O,
    l as fr,
    d as Xe,
    f as Yi,
    h as Xi,
    i as $i,
    j as at,
    S as xe,
    _ as Zi,
    e as gr,
} from './index.7121c868.js'
import './paths.9549ada4.js'
var vt
;(function (e) {
    ;(e.account_created = 'account_created'),
        (e.account_credited = 'account_credited'),
        (e.account_debited = 'account_debited'),
        (e.account_home_domain_updated = 'account_home_domain_updated'),
        (e.account_inflation_destination_updated = 'account_inflation_destination_updated'),
        (e.account_removed = 'account_removed'),
        (e.account_thresholds_updated = 'account_thresholds_updated'),
        (e.signer_created = 'signer_created'),
        (e.signer_removed = 'signer_removed'),
        (e.signer_updated = 'signer_updated'),
        (e.trade = 'trade'),
        (e.trustline_created = 'trustline_created'),
        (e.trustline_removed = 'trustline_removed'),
        (e.trustline_updated = 'trustline_updated')
})(vt || (vt = {}))
var we
;(function (e) {
    ;(e.albedo = 'albedo'),
        (e.ledger = 'ledger'),
        (e.freighter = 'freighter'),
        (e.plaintextKey = 'plaintextKey'),
        (e.trezor = 'trezor')
})(we || (we = {}))
var Ue
;(function (e) {
    ;(e.ok = 'ok'),
        (e.non_interactive_customer_info_needed = 'non_interactive_customer_info_needed'),
        (e.interactive_customer_info_needed = 'interactive_customer_info_needed'),
        (e.customer_info_status = 'customer_info_status'),
        (e.error = 'error')
})(Ue || (Ue = {}))
var Pe
;(function (e) {
    ;(e.incomplete = 'incomplete'),
        (e.pending_user_transfer_start = 'pending_user_transfer_start'),
        (e.pending_user_transfer_complete = 'pending_user_transfer_complete'),
        (e.pending_external = 'pending_external'),
        (e.pending_anchor = 'pending_anchor'),
        (e.pending_stellar = 'pending_stellar'),
        (e.pending_trust = 'pending_trust'),
        (e.pending_user = 'pending_user'),
        (e.completed = 'completed'),
        (e.refunded = 'refunded'),
        (e.no_market = 'no_market'),
        (e.too_small = 'too_small'),
        (e.too_large = 'too_large'),
        (e.error = 'error')
})(Pe || (Pe = {}))
var gt
;(function (e) {
    ;(e.success = 'success'),
        (e.revised = 'revised'),
        (e.pending = 'pending'),
        (e.actionRequired = 'action_required'),
        (e.rejected = 'rejected')
})(gt || (gt = {}))
var mt
;(function (e) {
    ;(e.noFurtherActionRequired = 'no_further_action_required'),
        (e.followNextUrl = 'follow_next_url')
})(mt || (mt = {}))
var eo = Hi()
const ro = ir(eo)
var yt = zi()
Vi()
Ji()
yt && yt.isConcatSpreadable
function Xr() {
    const e = new Uint32Array(4)
    if (typeof crypto < 'u' && crypto.getRandomValues) crypto.getRandomValues(e)
    else for (let r = 0; r < e.length; r++) e[r] = Math.floor(Math.random() * 4294967295)
    return Array.from(e)
        .map((r) => r.toString(36))
        .join('')
}
const si = {
        public_key: {
            risk: 'low',
            title: 'View public key',
            description:
                "Requests account public key. It's a simple way of authentication for Stellar-based applications. The response ensures that a user owns the corresponding secret key.",
            unsafe: !1,
            implicitFlow: !1,
            params: {
                token: {
                    description:
                        'Verification token generated by the application (should be unique or random).',
                    required: !1,
                },
            },
            returns: ['pubkey', 'signed_message', 'signature'],
        },
        sign_message: {
            risk: 'medium',
            title: 'Sign text message',
            description:
                'Requests arbitrary message signing. Can be used to implement identity/ownership verification.',
            unsafe: !1,
            implicitFlow: !0,
            params: {
                message: { description: 'Text message to sign.', required: !0 },
                pubkey: {
                    description: 'Specific public key requested by the application.',
                    required: !1,
                },
            },
            returns: ['pubkey', 'message', 'original_message', 'message_signature'],
        },
        tx: {
            risk: 'high',
            title: 'Sign transaction',
            description:
                'Requests a signature for the transaction. Returns signed transaction envelope that can be submitted to the network or used for multi-sig coordination.',
            unsafe: !0,
            implicitFlow: !0,
            params: {
                xdr: { description: 'XDR-encoded transaction envelope to sign.', required: !0 },
                pubkey: {
                    description: 'Specific public key requested by the application.',
                    required: !1,
                },
                network: {
                    description: 'Stellar network identifier or private network passphrase.',
                    required: !1,
                },
                horizon: { description: 'The URL of the Horizon server.', required: !1 },
                callback: {
                    description:
                        'Optional URL callback where signer will POST signed transaction XDR instead of submitting it to Horizon. ',
                    required: !1,
                },
                submit: {
                    description:
                        'If set, the signed transaction will be submitted to the Horizon server instead of returning it to the application.',
                    required: !1,
                    type: Boolean,
                },
            },
            returns: ['xdr', 'signed_envelope_xdr', 'pubkey', 'tx_signature', 'network', 'submit'],
        },
        pay: {
            risk: 'high',
            title: 'Make payment',
            description:
                'Requests a payment from a user. Works with any Stellar asset, supports transaction memo.',
            unsafe: !1,
            implicitFlow: !0,
            params: {
                amount: { description: 'Requested payment amount.', required: !0 },
                destination: { description: 'Payment destination.', required: !0 },
                asset_code: { description: 'Asset code (skip for XLM).', required: !1 },
                asset_issuer: { description: 'Asset issuer (skip for XLM).', required: !1 },
                memo: {
                    description: 'Transaction memo (required for exchanges and some anchors).',
                    required: !1,
                },
                memo_type: { description: 'Transaction memo type.', required: !1 },
                pubkey: {
                    description: 'Specific public key requested by the application.',
                    required: !1,
                },
                network: {
                    description: 'Stellar network identifier or private network passphrase.',
                    required: !1,
                },
                horizon: { description: 'The URL of the Horizon server.', required: !1 },
                callback: {
                    description:
                        'Optional URL callback where signer will POST signed transaction XDR instead of submitting it to Horizon. ',
                    required: !1,
                },
                submit: {
                    description:
                        'If set, the signed transaction will be submitted to the Horizon server instead of returning it to the application.',
                    required: !1,
                    type: Boolean,
                },
            },
            returns: [
                'amount',
                'destination',
                'asset_code',
                'asset_issuer',
                'memo',
                'memo_type',
                'signed_envelope_xdr',
                'pubkey',
                'tx_signature',
                'network',
                'horizon',
            ],
        },
        trust: {
            risk: 'low',
            title: 'Establish trustline',
            description:
                'Requests permission to create a trustline to a given Stellar asset. Gradually simplifies the process of creating trustlines for anchors, ICOs, and airdrops.',
            unsafe: !1,
            implicitFlow: !0,
            params: {
                asset_code: { description: 'Trustline asset code.', required: !0 },
                asset_issuer: { description: 'Trustline asset issuer address.', required: !0 },
                limit: { description: 'Trust limit.', required: !1 },
                memo: {
                    description: 'Transaction memo (required for exchanges and some anchors).',
                    required: !1,
                },
                memo_type: { description: 'Transaction memo type.', required: !1 },
                pubkey: {
                    description: 'Specific public key requested by the application.',
                    required: !1,
                },
                network: {
                    description: 'Stellar network identifier or private network passphrase.',
                    required: !1,
                },
                horizon: { description: 'The URL of the Horizon server.', required: !1 },
                callback: {
                    description:
                        'Optional URL callback where signer will POST signed transaction XDR instead of submitting it to Horizon. ',
                    required: !1,
                },
                submit: {
                    description:
                        'If set, the signed transaction will be submitted to the Horizon server instead of returning it to the application.',
                    required: !1,
                    type: Boolean,
                },
            },
            returns: [
                'asset_code',
                'asset_issuer',
                'limit',
                'memo',
                'memo_type',
                'signed_envelope_xdr',
                'pubkey',
                'tx_signature',
                'network',
                'horizon',
            ],
        },
        exchange: {
            risk: 'high',
            title: 'Purchase tokens',
            description: 'Requests permission to buy tokens on Stellar DEX at market price.',
            unsafe: !0,
            implicitFlow: !1,
            params: {
                sell_asset_code: { description: 'Asset code of the asset to sell.', required: !1 },
                sell_asset_issuer: {
                    description: 'Issuer account of the asset to sell.',
                    required: !1,
                },
                buy_asset_code: { description: 'Asset code of the asset to buy.', required: !1 },
                buy_asset_issuer: {
                    description: 'Issuer account of the asset to buy.',
                    required: !1,
                },
                amount: { description: 'The amount of asset to buy.', required: !0 },
                max_price: { description: 'Maximum price the user willing to pay.', required: !0 },
                memo: {
                    description: 'Transaction memo (required for exchanges and some anchors).',
                    required: !1,
                },
                memo_type: { description: 'Transaction memo type.', required: !1 },
                pubkey: {
                    description: 'Specific public key requested by the application.',
                    required: !1,
                },
                network: {
                    description: 'Stellar network identifier or private network passphrase.',
                    required: !1,
                },
                horizon: { description: 'The URL of the Horizon server.', required: !1 },
                callback: {
                    description:
                        'Optional URL callback where signer will POST signed transaction XDR instead of submitting it to Horizon. ',
                    required: !1,
                },
                submit: {
                    description:
                        'If set, the signed transaction will be submitted to the Horizon server instead of returning it to the application.',
                    required: !1,
                    type: Boolean,
                },
            },
            returns: [
                'amount',
                'max_price',
                'sell_asset_code',
                'sell_asset_issuer',
                'buy_asset_code',
                'buy_asset_issuer',
                'memo',
                'memo_type',
                'signed_envelope_xdr',
                'pubkey',
                'tx_signature',
                'network',
                'horizon',
            ],
        },
        implicit_flow: {
            risk: 'high',
            title: 'Implicit permissions',
            description:
                'Requests temporary access token for one or more intents that can be used to execute actions without explicit confirmation from the user. In order to be executed implicitly, an implicit flow permissions for a given intent should be granted and "pubkey" parameter set.',
            unsafe: !0,
            implicitFlow: !1,
            params: {
                intents: { description: 'Requested intents for the implicit flow.', required: !0 },
                network: {
                    description: 'Stellar network identifier or private network passphrase.',
                    required: !1,
                },
            },
            returns: [
                'granted',
                'intents',
                'grants',
                'session',
                'pubkey',
                'network',
                'valid_until',
            ],
        },
    },
    st = {
        unhandledError: {
            message:
                'Unhandled error occurred. If this error persists, please contact Albedo support.',
            code: -1,
        },
        externalError: { message: 'External error occurred.', code: -2 },
        invalidIntentRequest: { message: 'Intent request is invalid.', code: -3 },
        actionRejectedByUser: { message: 'Action request was rejected by the user.', code: -4 },
        horizonError: {
            message: 'Transaction failed when submitted to Stellar network.',
            code: -5,
        },
        callbackError: { message: 'Callback redirect failed.', code: -6 },
    },
    to = '@albedo-link/intent',
    no = '0.9.6',
    io =
        'A lightweight browser wrapper for Albedo API that provides a promise-based interface for all supported intents.',
    oo = 'StellarExpertTeam<info@stellar.expert>',
    ao = 'MIT',
    so = 'https://github.com/stellar-expert/albedo',
    uo = { url: 'https://github.com/stellar-expert/albedo/issues', email: 'info@stellar.expert' },
    co = { type: 'git', url: 'https://github.com/stellar-expert/albedo.git' },
    lo = {
        postbuild: 'node ./build/update-readme.js',
        build: 'webpack --mode=production --config ./webpack.config.js',
        test: './node_modules/.bin/mocha --require @babel/register',
    },
    fo = './lib/albedo.intent.js',
    po = './src/index.js',
    ho = ['stellar', 'SSO', 'signer', 'intent', 'multi-sig'],
    Eo = {
        '@babel/core': '^7.11.6',
        '@babel/plugin-proposal-class-properties': '^7.10.4',
        '@babel/plugin-proposal-decorators': '^7.10.5',
        '@babel/plugin-proposal-object-rest-spread': '^7.11.0',
        '@babel/plugin-proposal-private-methods': '^7.10.4',
        '@babel/plugin-syntax-dynamic-import': '^7.8.3',
        '@babel/preset-env': '^7.11.5',
        '@babel/register': '^7.11.5',
        'babel-loader': '^8.1.0',
        chai: '^4.2.0',
        esm: '^3.2.25',
        mocha: '^8.1.3',
        sinon: '^9.1.0',
        'terser-webpack-plugin': '^4.2.2',
        webpack: '^4.44.2',
        'webpack-cli': '^3.3.12',
    },
    _o = {
        name: to,
        version: no,
        description: io,
        author: oo,
        license: ao,
        homepage: so,
        bugs: uo,
        repository: co,
        scripts: lo,
        main: fo,
        module: po,
        keywords: ho,
        devDependencies: Eo,
    }
function ut(e, r = !1) {
    ;(this.windowHandler = e),
        (this.ephemeral = !!r),
        (this.isLoaded = !1),
        (this.pendingRequests = {}),
        (this.preprocessRequestParams = null),
        (this.onLoaded = new Promise((t, i) => (this.onLoadedCallback = t)).then(() => this)),
        (this.messageHandler = this.messageHandler.bind(this)),
        window.addEventListener('message', this.messageHandler, !1)
}
ut.prototype = {
    isLoaded: !1,
    markLoaded() {
        const { onLoadedCallback: e } = this
        e && ((this.onLoadedCallback = null), (this.isLoaded = !0), e())
    },
    messageHandler({ data: e }) {
        if (e.albedo) return e.albedo, this.markLoaded()
        if (e.albedoIntentResult) {
            const { __reqid: r, ...t } = e.albedoIntentResult,
                i = this.pendingRequests[r]
            i &&
                (delete this.pendingRequests[r],
                i(t.error, t),
                this.ephemeral &&
                    (window.removeEventListener('message', this.messageHandler, !1),
                    this.windowHandler.close()))
        }
    },
    transportCloseHandler() {
        for (let e in this.pendingRequests)
            if (this.pendingRequests.hasOwnProperty(e)) {
                const r = this.pendingRequests[e]
                delete this.pendingRequests[e], r(st.actionRejectedByUser)
            }
    },
    postMessage(e) {
        const r = Xr()
        return new Promise((t, i) => {
            this.onLoaded.then(() => {
                ;(this.pendingRequests[r] = (o, n) => (o ? i(o) : t(n))),
                    (e = Object.assign({ __reqid: r, __albedo_intent_version: _o.version }, e)),
                    this.preprocessRequestParams && (e = this.preprocessRequestParams(e)),
                    this.windowHandler.postMessage(e, '*')
            })
        })
    },
}
function vo(e) {
    const r = `${e}/confirm`,
        t = 440,
        i = 600,
        o = window.screenLeft !== void 0 ? window.screenLeft : window.screenX,
        n = window.screenTop !== void 0 ? window.screenTop : window.screenY,
        s = window.innerWidth
            ? window.innerWidth
            : document.documentElement.clientWidth
            ? document.documentElement.clientWidth
            : screen.width,
        l = window.innerHeight
            ? window.innerHeight
            : document.documentElement.clientHeight
            ? document.documentElement.clientHeight
            : screen.height,
        a = s / 2 - t / 2 + o,
        p = l / 2 - i / 2 + n,
        d = window.open(
            r,
            'auth.albedo.link',
            `height=${i},width=${t},top=${p},left=${a},menubar=0,toolbar=0,location=0,status=0,personalbar=0,scrollbars=0,dependent=1`
        )
    return new ut(d, !0).onLoaded
}
let kr = null
function St(e) {
    if (!kr) {
        const r = document.createElement('iframe')
        ;(r.style.border = 'none'),
            Object.assign(r, {
                width: '0',
                height: '0',
                frameBorder: '0',
                referrerPolicy: 'origin',
                src: `${e}`,
            }),
            document.body.appendChild(r),
            (kr = new ut(r.contentWindow))
    }
    return kr.onLoaded
}
function ct({ session: e, pubkey: r, grants: t, valid_until: i }) {
    ;(this.key = e),
        (this.pubkey = r),
        (this.grants = t.slice()),
        (this.validUntil = i),
        Object.freeze(this),
        Object.freeze(this.grants)
}
ct.prototype = {
    key: '',
    pubkey: '',
    grants: [],
    validUntil: 0,
    get isExpired() {
        return this.validUntil - 2e3 < new Date().getTime()
    },
    toJSON() {
        return {
            session: this.key,
            pubkey: this.pubkey,
            grants: this.grants.slice(),
            valid_until: this.validUntil,
        }
    },
}
const lt = 'albedo_session_'
function ft() {
    return window.sessionStorage
}
function go(e) {
    const r = new ct(e)
    ft().setItem(lt + r.pubkey, JSON.stringify(r))
}
function ui(e, r) {
    let t
    {
        const i = ft().getItem(lt + r)
        i && (t = new ct(JSON.parse(i)))
    }
    return !t || t.isExpired || !t.grants.includes(e) ? null : t
}
function mo() {
    const e = ft()
    return Object.keys(e)
        .filter((r) => r.indexOf(lt) === 0)
        .map((r) => JSON.parse(e.getItem(r)))
}
function yo(e, r) {
    const { intent: t } = e
    if (!t) return Promise.reject(new Error('Parameter "intent" is required.'))
    const i = si[t]
    if (!i) return Promise.reject(new Error(`Unknown intent: "${t}".`))
    let o
    try {
        o = wo(i, e)
    } catch (n) {
        return Promise.reject(n)
    }
    return So(o, r).then((n) => To(o, n))
}
function So(e, r) {
    if (e.pubkey) {
        const t = ui(e.intent, e.pubkey)
        if (t) return (e.session = t.key), St(r)
    }
    return (
        setTimeout(() => {
            e.intent === 'implicit_flow' && St(r)
        }, 200),
        vo(r)
    )
}
function To(e, r) {
    return r.postMessage(e).then((t) => (t.intent === 'implicit_flow' && t.granted && go(t), t))
}
function wo(e, r) {
    if (typeof r != 'object') throw new Error('Intent parameters expected.')
    const { intent: t, pubkey: i } = r,
        o = { intent: t }
    if (i && !/^G[0-9A-Z]{55}$/.test(i))
        throw new Error('Invalid "pubkey" parameter. Stellar account public key expected.')
    for (const n in e.params) {
        const s = e.params[n],
            l = r[n]
        if (l) o[n] = l
        else if (s.required) {
            const a = Object.assign(new Error(), st.invalidIntentRequest)
            throw ((a.ext = `Parameter "${n}" is required for intent "${t}".`), a)
        }
    }
    return o
}
function Ro(e = null) {
    e === null && (e = window.location.search), e[0] === '?' && (e = e.substr(1))
    const r = {}
    for (let t of e.split('&')) {
        const [i, o] = t.split('=').map((n) => decodeURIComponent(n))
        r[i] = o
    }
    return r
}
function Oo(e) {
    typeof document > 'u' ||
        !document.addEventListener ||
        document.addEventListener(
            'click',
            function (t) {
                if (t.target.tagName !== 'A' || (t.target.href || '').indexOf('web+stellar:') !== 0)
                    return
                t.preventDefault(), t.stopImmediatePropagation()
                const { pathname: i, search: o } = new URL(t.target.href)
                if (!['tx', 'pay'].includes(i)) {
                    alert(
                        `Invalid operation requested: ${i}. It's likely an external application error. Please contact support team of ${window.location.origin}.`
                    )
                    return
                }
                const n = Ro(o)
                e.request(i, n)
            },
            !1
        )
}
if (typeof window == 'object' && typeof window.fetch != 'function')
    throw new Error(
        'Browser FetchAPI is not available. For legacy browsers support use polyfills such as whatwg-fetch.'
    )
function Ur() {
    this.frontendUrl = 'https://albedo.link'
}
Ur.prototype = {
    frontendUrl: 'https://albedo.link',
    request(e, r) {
        return yo(Object.assign(r || {}, { intent: e }), this.frontendUrl)
    },
    implicitFlow(e) {
        return this.request('implicit_flow', e)
    },
    publicKey(e) {
        return (
            (e = Object.assign({}, e)), e.token || (e.token = Xr()), this.request('public_key', e)
        )
    },
    tx(e) {
        return this.request('tx', e)
    },
    pay(e) {
        return this.request('pay', e)
    },
    trust(e) {
        return this.request('trust', e)
    },
    exchange(e) {
        return this.request('exchange', e)
    },
    signMessage(e) {
        return (
            (e = Object.assign({}, e, { message: bo(e.message) })), this.request('sign_message', e)
        )
    },
    generateRandomToken() {
        return Xr()
    },
    isImplicitSessionAllowed(e, r) {
        return !!ui(e, r)
    },
    listImplicitSessions() {
        return mo()
    },
    forgetImplicitSession(e) {
        forgetSession(e)
    },
}
function bo(e) {
    switch (typeof e) {
        case 'string':
            return e
        case 'undefined':
            return ''
    }
    return JSON.stringify(e)
}
Ur.intentInterface = si
Ur.intentErrors = st
const ci = new Ur()
Oo(ci)
var Io = {
        keyType: we.albedo,
        signTransaction: function (e) {
            return O.__awaiter(this, void 0, void 0, function () {
                var r, t, i, o, n
                return O.__generator(this, function (s) {
                    switch (s.label) {
                        case 0:
                            if (((r = e.transaction), (t = e.key), t.privateKey !== ''))
                                throw new Error(
                                    'Non-ledger key sent to ledger handler: ' +
                                        JSON.stringify(t.publicKey)
                                )
                            s.label = 1
                        case 1:
                            return s.trys.push([1, 3, , 4]), (i = r.toXDR()), [4, ci.tx({ xdr: i })]
                        case 2:
                            if (((o = s.sent()), !o.signed_envelope_xdr))
                                throw new Error('We couldn’t sign the transaction with Albedo.')
                            return [
                                2,
                                fr.TransactionBuilder.fromXDR(
                                    o.signed_envelope_xdr,
                                    fr.Networks.PUBLIC
                                ),
                            ]
                        case 3:
                            throw (
                                ((n = s.sent()),
                                new Error(
                                    'We couldn’t sign the transaction with Albedo. ' +
                                        n.toString() +
                                        '.'
                                ))
                            )
                        case 4:
                            return [2]
                    }
                })
            })
        },
    },
    $r = {},
    No = {
        get exports() {
            return $r
        },
        set exports(e) {
            $r = e
        },
    }
;(function (e, r) {
    ;(function (t, i) {
        e.exports = i()
    })(Xe, function () {
        return (function (t) {
            var i = {}
            function o(n) {
                if (i[n]) return i[n].exports
                var s = (i[n] = { i: n, l: !1, exports: {} })
                return t[n].call(s.exports, s, s.exports, o), (s.l = !0), s.exports
            }
            return (
                (o.m = t),
                (o.c = i),
                (o.d = function (n, s, l) {
                    o.o(n, s) || Object.defineProperty(n, s, { enumerable: !0, get: l })
                }),
                (o.r = function (n) {
                    typeof Symbol < 'u' &&
                        Symbol.toStringTag &&
                        Object.defineProperty(n, Symbol.toStringTag, { value: 'Module' }),
                        Object.defineProperty(n, '__esModule', { value: !0 })
                }),
                (o.t = function (n, s) {
                    if (
                        (1 & s && (n = o(n)),
                        8 & s || (4 & s && typeof n == 'object' && n && n.__esModule))
                    )
                        return n
                    var l = Object.create(null)
                    if (
                        (o.r(l),
                        Object.defineProperty(l, 'default', { enumerable: !0, value: n }),
                        2 & s && typeof n != 'string')
                    )
                        for (var a in n)
                            o.d(
                                l,
                                a,
                                function (p) {
                                    return n[p]
                                }.bind(null, a)
                            )
                    return l
                }),
                (o.n = function (n) {
                    var s =
                        n && n.__esModule
                            ? function () {
                                  return n.default
                              }
                            : function () {
                                  return n
                              }
                    return o.d(s, 'a', s), s
                }),
                (o.o = function (n, s) {
                    return Object.prototype.hasOwnProperty.call(n, s)
                }),
                (o.p = ''),
                o((o.s = 0))
            )
        })([
            function (t, i, o) {
                var n, s
                o.r(i),
                    (function (E) {
                        ;(E.CREATE_ACCOUNT = 'CREATE_ACCOUNT'),
                            (E.FUND_ACCOUNT = 'FUND_ACCOUNT'),
                            (E.ADD_ACCOUNT = 'ADD_ACCOUNT'),
                            (E.IMPORT_ACCOUNT = 'IMPORT_ACCOUNT'),
                            (E.IMPORT_HARDWARE_WALLET = 'IMPORT_HARDWARE_WALLET'),
                            (E.LOAD_ACCOUNT = 'LOAD_ACCOUNT'),
                            (E.MAKE_ACCOUNT_ACTIVE = 'MAKE_ACCOUNT_ACTIVE'),
                            (E.UPDATE_ACCOUNT_NAME = 'UPDATE_ACCOUNT_NAME'),
                            (E.GET_MNEMONIC_PHRASE = 'GET_MNEMONIC_PHRASE'),
                            (E.CONFIRM_MNEMONIC_PHRASE = 'CONFIRM_MNEMONIC_PHRASE'),
                            (E.RECOVER_ACCOUNT = 'RECOVER_ACCOUNT'),
                            (E.CONFIRM_PASSWORD = 'CONFIRM_PASSWORD'),
                            (E.REJECT_ACCESS = 'REJECT_ACCESS'),
                            (E.GRANT_ACCESS = 'GRANT_ACCESS'),
                            (E.SIGN_TRANSACTION = 'SIGN_TRANSACTION'),
                            (E.HANDLE_SIGNED_HW_TRANSACTION = 'HANDLE_SIGNED_HW_TRANSACTION'),
                            (E.REJECT_TRANSACTION = 'REJECT_TRANSACTION'),
                            (E.SIGN_FREIGHTER_TRANSACTION = 'SIGN_FREIGHTER_TRANSACTION'),
                            (E.SIGN_FREIGHTER_SOROBAN_TRANSACTION =
                                'SIGN_FREIGHTER_SOROBAN_TRANSACTION'),
                            (E.ADD_RECENT_ADDRESS = 'ADD_RECENT_ADDRESS'),
                            (E.LOAD_RECENT_ADDRESSES = 'LOAD_RECENT_ADDRESSES'),
                            (E.SIGN_OUT = 'SIGN_OUT'),
                            (E.SHOW_BACKUP_PHRASE = 'SHOW_BACKUP_PHRASE'),
                            (E.SAVE_SETTINGS = 'SAVE_SETTINGS'),
                            (E.LOAD_SETTINGS = 'LOAD_SETTINGS'),
                            (E.GET_CACHED_ASSET_ICON = 'GET_CACHED_ASSET_ICON'),
                            (E.CACHE_ASSET_ICON = 'CACHE_ASSET_ICON'),
                            (E.GET_CACHED_ASSET_DOMAIN = 'GET_CACHED_ASSET_DOMAIN'),
                            (E.CACHE_ASSET_DOMAIN = 'CACHE_ASSET_DOMAIN'),
                            (E.GET_BLOCKED_DOMAINS = 'GET_BLOCKED_DOMAINS'),
                            (E.ADD_CUSTOM_NETWORK = 'ADD_CUSTOM_NETWORK'),
                            (E.CHANGE_NETWORK = 'CHANGE_NETWORK'),
                            (E.REMOVE_CUSTOM_NETWORK = 'REMOVE_CUSTOM_NETWORK'),
                            (E.EDIT_CUSTOM_NETWORK = 'EDIT_CUSTOM_NETWORK'),
                            (E.RESET_EXP_DATA = 'RESET_EXP_DATA'),
                            (E.ADD_TOKEN_ID = 'ADD_TOKEN_ID'),
                            (E.GET_TOKEN_IDS = 'GET_TOKEN_IDS')
                    })(n || (n = {})),
                    (function (E) {
                        ;(E.REQUEST_ACCESS = 'REQUEST_ACCESS'),
                            (E.SUBMIT_TRANSACTION = 'SUBMIT_TRANSACTION'),
                            (E.REQUEST_NETWORK = 'REQUEST_NETWORK'),
                            (E.REQUEST_NETWORK_DETAILS = 'REQUEST_NETWORK_DETAILS'),
                            (E.REQUEST_CONNECTION_STATUS = 'REQUEST_CONNECTION_STATUS')
                    })(s || (s = {}))
                const l = (E) => {
                        const S = Date.now() + Math.random()
                        return (
                            window.postMessage(
                                { source: 'FREIGHTER_EXTERNAL_MSG_REQUEST', messageId: S, ...E },
                                window.location.origin
                            ),
                            new Promise((m) => {
                                let R = 0
                                E.type === s.REQUEST_CONNECTION_STATUS &&
                                    (R = setTimeout(() => {
                                        m({ isConnected: !1 }),
                                            window.removeEventListener('message', h)
                                    }, 2e3))
                                const h = (_) => {
                                    var y, c
                                    _.source === window &&
                                        ((y = _ == null ? void 0 : _.data) === null || y === void 0
                                            ? void 0
                                            : y.source) === 'FREIGHTER_EXTERNAL_MSG_RESPONSE' &&
                                        ((c = _ == null ? void 0 : _.data) === null || c === void 0
                                            ? void 0
                                            : c.messagedId) === S &&
                                        (m(_.data),
                                        window.removeEventListener('message', h),
                                        clearTimeout(R))
                                }
                                window.addEventListener('message', h, !1)
                            })
                        )
                    },
                    a = () =>
                        (async () => {
                            let E = { publicKey: '', error: '' }
                            try {
                                E = await l({ type: s.REQUEST_ACCESS })
                            } catch (R) {
                                console.error(R)
                            }
                            const { publicKey: S, error: m } = E
                            if (m) throw m
                            return S
                        })(),
                    p = (E, S) =>
                        (async (m, R, h) => {
                            let _ = '',
                                y = '',
                                c = ''
                            typeof R == 'object'
                                ? ((_ = R.network || ''),
                                  (y = R.accountToSign || ''),
                                  (c = R.networkPassphrase || ''))
                                : ((_ = R || ''), (y = h || ''))
                            let w = { signedTransaction: '', error: '' }
                            try {
                                w = await l({
                                    transactionXdr: m,
                                    network: _,
                                    networkPassphrase: c,
                                    accountToSign: y,
                                    type: s.SUBMIT_TRANSACTION,
                                })
                            } catch (D) {
                                console.error(D)
                            }
                            const { signedTransaction: P, error: b } = w
                            if (b) throw b
                            return P
                        })(E, S),
                    d = () =>
                        window != null && window.freighter
                            ? window.freighter
                            : (async () => {
                                  let E = { isConnected: !1 }
                                  try {
                                      E = await l({ type: s.REQUEST_CONNECTION_STATUS })
                                  } catch (S) {
                                      console.error(S)
                                  }
                                  return E.isConnected
                              })(),
                    f = () =>
                        (async () => {
                            let E = { network: '', error: '' }
                            try {
                                E = await l({ type: s.REQUEST_NETWORK })
                            } catch (R) {
                                console.error(R)
                            }
                            const { network: S, error: m } = E
                            if (m) throw m
                            return S
                        })(),
                    u = () =>
                        (async () => {
                            let E = {
                                networkDetails: {
                                    network: '',
                                    networkName: '',
                                    networkUrl: '',
                                    networkPassphrase: '',
                                },
                                error: '',
                            }
                            try {
                                E = await l({ type: s.REQUEST_NETWORK_DETAILS })
                            } catch (y) {
                                console.error(y)
                            }
                            const { networkDetails: S, error: m } = E,
                                { network: R, networkUrl: h, networkPassphrase: _ } = S
                            if (m) throw m
                            return { network: R, networkUrl: h, networkPassphrase: _ }
                        })()
                o.d(i, 'getPublicKey', function () {
                    return a
                }),
                    o.d(i, 'signTransaction', function () {
                        return p
                    }),
                    o.d(i, 'isConnected', function () {
                        return d
                    }),
                    o.d(i, 'getNetwork', function () {
                        return f
                    }),
                    o.d(i, 'getNetworkDetails', function () {
                        return u
                    }),
                    (i.default = {
                        getPublicKey: a,
                        signTransaction: p,
                        isConnected: d,
                        getNetwork: f,
                        getNetworkDetails: u,
                    })
            },
        ])
    })
})(No)
const Ao = ir($r)
var Co = {
        keyType: we.freighter,
        signTransaction: function (e) {
            return O.__awaiter(this, void 0, void 0, function () {
                var r, t, i, o, n
                return O.__generator(this, function (s) {
                    switch (s.label) {
                        case 0:
                            if (
                                ((r = e.transaction),
                                (t = e.key),
                                (i = e.custom),
                                t.privateKey !== '')
                            )
                                throw new Error(
                                    'Non-ledger key sent to ledger handler: ' +
                                        JSON.stringify(t.publicKey)
                                )
                            s.label = 1
                        case 1:
                            return (
                                s.trys.push([1, 3, , 4]),
                                [
                                    4,
                                    Ao.signTransaction(
                                        r.toXDR(),
                                        i && i.network ? i.network : void 0
                                    ),
                                ]
                            )
                        case 2:
                            return (
                                (o = s.sent()),
                                [2, fr.TransactionBuilder.fromXDR(o, fr.Networks.PUBLIC)]
                            )
                        case 3:
                            throw (
                                ((n = s.sent()),
                                new Error(
                                    'We couldn’t sign the transaction with Freighter. ' +
                                        n.toString() +
                                        '.'
                                ))
                            )
                        case 4:
                            return [2]
                    }
                })
            })
        },
    },
    Po = Yi()
const xo = ir(Po)
var Uo = Xi()
const qe = ir(Uo)
var Mo = $i()
function Br(e) {
    let r = []
    return (
        e.split('/').forEach((i) => {
            let o = parseInt(i, 10)
            isNaN(o) || (i.length > 1 && i[i.length - 1] === "'" && (o += 2147483648), r.push(o))
        }),
        r
    )
}
function Fr(e, r) {
    function t(i, o, n) {
        return i >= o.length
            ? n
            : r(o[i], i).then(function (s) {
                  return n.push(s), t(i + 1, o, n)
              })
    }
    return Promise.resolve().then(() => t(0, e, []))
}
function Do(e, r) {
    let t = typeof r < 'u' ? ~~r : 0
    for (var i = 0; i < e.length; i++) {
        const o = e[i]
        let n = (t >>> 8) & 255
        ;(n ^= o & 255),
            (n ^= n >>> 4),
            (t = (t << 8) & 65535),
            (t ^= n),
            (n = (n << 5) & 65535),
            (t ^= n),
            (n = (n << 7) & 65535),
            (t ^= n)
    }
    return t
}
function Lo(e) {
    let r = 48,
        t = Buffer.from(e),
        i = Buffer.from([r]),
        o = Buffer.concat([i, t]),
        n = Buffer.alloc(2)
    n.writeUInt16LE(Do(o), 0)
    let s = Buffer.concat([o, n])
    return xo.encode(s)
}
function ko(e, r, t) {
    return qe.sign.detached.verify(
        new Uint8Array(e.toJSON().data),
        new Uint8Array(r.toJSON().data),
        new Uint8Array(t.toJSON().data)
    )
}
function Tt(e) {
    let r = new Mo.sha256()
    return r.update(e, 'utf8'), r.digest()
}
function qr(e) {
    e.split('/').forEach(function (r) {
        if (!r.toString().endsWith("'"))
            throw new Error(
                "Detected a non-hardened path element in requested BIP32 path. Non-hardended paths are not supported at this time. Please use an all-hardened path. Example: 44'/148'/0'"
            )
    })
}
const vr = 224,
    Bo = 2,
    Fo = 4,
    qo = 6,
    Ko = 8,
    Kr = 16,
    Gr = 150,
    Go = 0,
    Wo = 128,
    Qo = 0,
    jo = 128,
    ur = 36864,
    Wr = 27013,
    wt = 27684,
    Rt = 27685,
    Ho = 27750,
    Ot = 27904,
    rr = 28162,
    bt = 1540
class zo {
    constructor(r, t = 'l0v') {
        ;(this.transport = void 0),
            (this.transport = r),
            r.decorateAppAPIMethods(
                this,
                ['getAppConfiguration', 'getPublicKey', 'signTransaction', 'signHash'],
                t
            )
    }
    getAppConfiguration() {
        return this.transport.send(vr, qo, 0, 0).then((r) => {
            let t = r[0] === 1 || r[1] < 2
            return { version: '' + r[1] + '.' + r[2] + '.' + r[3], multiOpsEnabled: t }
        })
    }
    getPublicKey(r, t, i) {
        qr(r)
        let o = [],
            n,
            s = Br(r),
            l = Buffer.alloc(1 + s.length * 4)
        ;(l[0] = s.length),
            s.forEach((d, f) => {
                l.writeUInt32BE(d, 1 + 4 * f)
            })
        let a = Buffer.from('via lumina', 'ascii')
        o.push(Buffer.concat([l, a]))
        let p = !1
        return Fr(o, (d) =>
            this.transport.send(vr, p ? Kr : Bo, t ? 1 : 0, i ? 1 : 0, d, [ur, rr]).then((f) => {
                Buffer.from(f.slice(f.length - 2)).readUInt16BE(0) === rr &&
                    ((p = !0), o.push(Buffer.alloc(0))),
                    (n = f)
            })
        ).then(() => {
            let d = 0,
                f = n.slice(d, d + 32)
            d += 32
            let u = Lo(f)
            if (t) {
                let E = n.slice(d, d + 64)
                if (!ko(a, E, f))
                    throw new Error('Bad signature. Keypair is invalid. Please report this.')
            }
            return { publicKey: u, raw: f }
        })
    }
    signTransaction(r, t) {
        if ((qr(r), t.length > bt))
            throw new Error('Transaction too large: max = ' + bt + '; actual = ' + t.length)
        let i = [],
            o,
            n = Br(r),
            s = 1 + n.length * 4,
            l = Buffer.alloc(s)
        ;(l[0] = n.length),
            n.forEach(function (d, f) {
                l.writeUInt32BE(d, 1 + 4 * f)
            })
        let a = Gr - s
        if (t.length <= a) i.push(Buffer.concat([l, t]))
        else {
            let d = Buffer.alloc(a),
                f = 0
            for (t.copy(d, 0, f, a), i.push(Buffer.concat([l, d])), f += a; f < t.length; ) {
                let u = t.length - f
                ;(a = u < Gr ? u : Gr),
                    (d = Buffer.alloc(a)),
                    t.copy(d, 0, f, f + a),
                    (f += a),
                    i.push(d)
            }
        }
        let p = !1
        return Fr(i, (d, f) =>
            this.transport
                .send(vr, p ? Kr : Fo, f === 0 ? Go : Wo, f === i.length - 1 ? Qo : jo, d, [
                    ur,
                    Wr,
                    wt,
                    Rt,
                    rr,
                ])
                .then((u) => {
                    Buffer.from(u.slice(u.length - 2)).readUInt16BE(0) === rr &&
                        ((p = !0), i.push(Buffer.alloc(0))),
                        (o = u)
                })
        ).then(() => {
            let d = Buffer.from(o.slice(o.length - 2)).readUInt16BE(0)
            if (d === ur) return { signature: Buffer.from(o.slice(0, o.length - 2)) }
            if (d === wt) return this.signHash_private(r, Tt(t))
            if (d === Rt) return this.signHash_private(r, Tt(t))
            throw new Error('Transaction approval request was rejected')
        })
    }
    signHash(r, t) {
        return qr(r), this.signHash_private(r, t)
    }
    signHash_private(r, t) {
        let i = [],
            o,
            n = Br(r),
            s = Buffer.alloc(1 + n.length * 4)
        ;(s[0] = n.length),
            n.forEach(function (a, p) {
                s.writeUInt32BE(a, 1 + 4 * p)
            }),
            i.push(Buffer.concat([s, t]))
        let l = !1
        return Fr(i, (a) =>
            this.transport.send(vr, l ? Kr : Ko, 0, 0, a, [ur, Wr, Ho, Ot, rr]).then((p) => {
                Buffer.from(p.slice(p.length - 2)).readUInt16BE(0) === rr &&
                    ((l = !0), i.push(Buffer.alloc(0))),
                    (o = p)
            })
        ).then(() => {
            let a = Buffer.from(o.slice(o.length - 2)).readUInt16BE(0)
            if (a === ur) return { signature: Buffer.from(o.slice(0, o.length - 2)) }
            throw a === Wr
                ? new Error('Transaction approval request was rejected')
                : a === Ot
                ? new Error('Hash signing is not supported')
                : new Error('Hash signing not allowed. Have you enabled it in the app settings?')
        })
    }
}
var nr = {},
    Vo = {
        get exports() {
            return nr
        },
        set exports(e) {
            nr = e
        },
    },
    q = q || {},
    Jo = q
q.EXTENSION_ID = 'kmendfapggjehodndflmmgagdbamhnfd'
q.MessageTypes = {
    U2F_REGISTER_REQUEST: 'u2f_register_request',
    U2F_SIGN_REQUEST: 'u2f_sign_request',
    U2F_REGISTER_RESPONSE: 'u2f_register_response',
    U2F_SIGN_RESPONSE: 'u2f_sign_response',
}
q.ErrorCodes = {
    OK: 0,
    OTHER_ERROR: 1,
    BAD_REQUEST: 2,
    CONFIGURATION_UNSUPPORTED: 3,
    DEVICE_INELIGIBLE: 4,
    TIMEOUT: 5,
}
q.Request
q.Response
q.Error
q.SignRequest
q.SignResponse
q.RegisterRequest
q.RegisterResponse
q.disconnect = function () {
    q.port_ && q.port_.port_ && (q.port_.port_.disconnect(), (q.port_ = null))
}
q.getMessagePort = function (e) {
    if (typeof chrome < 'u' && chrome.runtime) {
        var r = { type: q.MessageTypes.U2F_SIGN_REQUEST, signRequests: [] }
        chrome.runtime.sendMessage(q.EXTENSION_ID, r, function () {
            chrome.runtime.lastError ? q.getIframePort_(e) : q.getChromeRuntimePort_(e)
        })
    } else q.getIframePort_(e)
}
q.getChromeRuntimePort_ = function (e) {
    var r = chrome.runtime.connect(q.EXTENSION_ID, { includeTlsChannelId: !0 })
    setTimeout(function () {
        e(null, new q.WrappedChromeRuntimePort_(r))
    }, 0)
}
q.WrappedChromeRuntimePort_ = function (e) {
    this.port_ = e
}
q.WrappedChromeRuntimePort_.prototype.postMessage = function (e) {
    this.port_.postMessage(e)
}
q.WrappedChromeRuntimePort_.prototype.addEventListener = function (e, r) {
    var t = e.toLowerCase()
    t == 'message' || t == 'onmessage'
        ? this.port_.onMessage.addListener(function (i) {
              r({ data: i })
          })
        : console.error('WrappedChromeRuntimePort only supports onMessage')
}
q.getIframePort_ = function (e) {
    var r = 'chrome-extension://' + q.EXTENSION_ID,
        t = document.createElement('iframe')
    ;(t.src = r + '/u2f-comms.html'),
        t.setAttribute('style', 'display:none'),
        document.body.appendChild(t)
    var i = !1,
        o = new MessageChannel(),
        n = function (s) {
            s.data == 'ready'
                ? (o.port1.removeEventListener('message', n), i || ((i = !0), e(null, o.port1)))
                : console.error('First event on iframe port was not "ready"')
        }
    o.port1.addEventListener('message', n),
        o.port1.start(),
        t.addEventListener('load', function () {
            t.contentWindow.postMessage('init', r, [o.port2])
        }),
        setTimeout(function () {
            i || ((i = !0), e(new Error('IFrame extension not supported')))
        }, 200)
}
q.EXTENSION_TIMEOUT_SEC = 30
q.port_ = null
q.waitingForPort_ = []
q.reqCounter_ = 0
q.callbackMap_ = {}
q.getPortSingleton_ = function (e) {
    q.port_
        ? e(null, q.port_)
        : (q.waitingForPort_.length == 0 &&
              q.getMessagePort(function (r, t) {
                  for (
                      r || ((q.port_ = t), q.port_.addEventListener('message', q.responseHandler_));
                      q.waitingForPort_.length;

                  )
                      q.waitingForPort_.shift()(r, t)
              }),
          q.waitingForPort_.push(e))
}
q.responseHandler_ = function (e) {
    var r = e.data,
        t = r.requestId
    if (!t || !q.callbackMap_[t]) {
        console.error('Unknown or missing requestId in response.')
        return
    }
    var i = q.callbackMap_[t]
    delete q.callbackMap_[t], i(null, r.responseData)
}
q.isSupported = function (e) {
    q.getPortSingleton_(function (r, t) {
        e(!r)
    })
}
q.sign = function (e, r, t) {
    q.getPortSingleton_(function (i, o) {
        if (i) return r(i)
        var n = ++q.reqCounter_
        q.callbackMap_[n] = r
        var s = {
            type: q.MessageTypes.U2F_SIGN_REQUEST,
            signRequests: e,
            timeoutSeconds: typeof t < 'u' ? t : q.EXTENSION_TIMEOUT_SEC,
            requestId: n,
        }
        o.postMessage(s)
    })
}
q.register = function (e, r, t, i) {
    q.getPortSingleton_(function (o, n) {
        if (o) return t(o)
        var s = ++q.reqCounter_
        q.callbackMap_[s] = t
        var l = {
            type: q.MessageTypes.U2F_REGISTER_REQUEST,
            signRequests: r,
            registerRequests: e,
            timeoutSeconds: typeof i < 'u' ? i : q.EXTENSION_TIMEOUT_SEC,
            requestId: s,
        }
        n.postMessage(l)
    })
}
var Yo = Ke,
    It = Jo,
    dt = typeof navigator < 'u' && !!navigator.userAgent,
    Xo = dt && navigator.userAgent.match(/Safari\//) && !navigator.userAgent.match(/Chrome\//),
    $o = dt && navigator.userAgent.match(/Edge\/1[2345]/),
    Qr = null
function hr(e) {
    return (
        Qr ||
            (Qr = new e(function (r, t) {
                function i() {
                    r({ u2f: null, native: !0 })
                }
                if (!dt || Xo) return i()
                var o = typeof window.u2f < 'u' && typeof window.u2f.sign == 'function'
                if (
                    (o && r({ u2f: window.u2f, native: !0 }),
                    $o || location.protocol === 'http:' || typeof MessageChannel > 'u')
                )
                    return i()
                It.isSupported(function (n) {
                    n ? r({ u2f: It, native: !1 }) : i()
                })
            })),
        Qr
    )
}
function Ke(e) {
    return {
        isSupported: Zo.bind(e),
        ensureSupport: ea.bind(e),
        register: ra.bind(e),
        sign: ta.bind(e),
        ErrorCodes: Ke.ErrorCodes,
        ErrorNames: Ke.ErrorNames,
    }
}
Ke.ErrorCodes = {
    CANCELLED: -1,
    OK: 0,
    OTHER_ERROR: 1,
    BAD_REQUEST: 2,
    CONFIGURATION_UNSUPPORTED: 3,
    DEVICE_INELIGIBLE: 4,
    TIMEOUT: 5,
}
Ke.ErrorNames = {
    '-1': 'CANCELLED',
    0: 'OK',
    1: 'OTHER_ERROR',
    2: 'BAD_REQUEST',
    3: 'CONFIGURATION_UNSUPPORTED',
    4: 'DEVICE_INELIGIBLE',
    5: 'TIMEOUT',
}
function dr(e, r) {
    var t = r != null ? r.errorCode : 1,
        i = Ke.ErrorNames['' + t],
        o = new Error(e)
    return (o.metaData = { type: i, code: t }), o
}
function li(e, r) {
    var t = {}
    return (
        (t.promise = new e(function (i, o) {
            ;(t.resolve = i), (t.reject = o), r.then(i, o)
        })),
        (t.promise.cancel = function (i, o) {
            hr(e).then(function (n) {
                o && !n.native && n.u2f.disconnect(), t.reject(dr(i, { errorCode: -1 }))
            })
        }),
        t
    )
}
function Zo() {
    var e = this
    return hr(e).then(function (r) {
        return !!r.u2f
    })
}
function pt(e) {
    if (!e.u2f)
        throw location.protocol === 'http:'
            ? new Error("U2F isn't supported over http, only https")
            : new Error('U2F not supported')
}
function ea() {
    var e = this
    return hr(e).then(pt)
}
function ra(e, r, t) {
    var i = this
    return (
        Array.isArray(e) || (e = [e]),
        typeof r == 'number' && typeof t > 'u' && ((t = r), (r = null)),
        r || (r = []),
        li(
            i,
            hr(i).then(function (o) {
                pt(o)
                var n = o.native,
                    s = o.u2f
                return new i(function (l, a) {
                    function p(u) {
                        u.errorCode ? a(dr('Registration failed', u)) : (delete u.errorCode, l(u))
                    }
                    function d(u, E) {
                        u ? a(u) : E.errorCode ? a(dr('Registration failed', E)) : l(E)
                    }
                    if (n) {
                        var f = e[0].appId
                        s.register(f, e, r, p, t)
                    } else s.register(e, r, d, t)
                })
            })
        ).promise
    )
}
function ta(e, r) {
    var t = this
    return (
        Array.isArray(e) || (e = [e]),
        li(
            t,
            hr(t).then(function (i) {
                pt(i)
                var o = i.native,
                    n = i.u2f
                return new t(function (s, l) {
                    function a(u) {
                        u.errorCode ? l(dr('Sign failed', u)) : (delete u.errorCode, s(u))
                    }
                    function p(u, E) {
                        u ? l(u) : E.errorCode ? l(dr('Sign failed', E)) : s(E)
                    }
                    if (o) {
                        var d = e[0].appId,
                            f = e[0].challenge
                        n.sign(d, f, e, a, r)
                    } else n.sign(e, p, r)
                })
            })
        ).promise
    )
}
function Mr(e) {
    Ke[e] = function () {
        if (!Xe.Promise) throw new Error("The platform doesn't natively support promises")
        var r = [].slice.call(arguments)
        return Ke(Xe.Promise)[e].apply(null, r)
    }
}
Mr('isSupported')
Mr('ensureSupport')
Mr('register')
Mr('sign')
;(function (e) {
    e.exports = Yo
})(Vo)
var na = at()
const ia = ir(na)
var M = function (e) {
    var r = function (i, o) {
        Object.assign(this, o),
            (this.name = e),
            (this.message = i || e),
            (this.stack = new Error().stack)
    }
    return (r.prototype = new Error()), r
}
M('AccountNameRequired')
M('AccountNotSupported')
M('AmountRequired')
M('BluetoothRequired')
M('BtcUnmatchedApp')
M('CantOpenDevice')
M('CashAddrNotSupported')
M('CurrencyNotSupported')
M('DeviceAppVerifyNotSupported')
M('DeviceGenuineSocketEarlyClose')
M('DeviceNotGenuine')
M('DeviceOnDashboardExpected')
M('DeviceOnDashboardUnexpected')
M('DeviceInOSUExpected')
M('DeviceHalted')
M('DeviceNameInvalid')
M('DeviceSocketFail')
M('DeviceSocketNoBulkStatus')
M('DisconnectedDevice')
M('DisconnectedDeviceDuringOperation')
M('EnpointConfig')
M('EthAppPleaseEnableContractData')
M('FeeEstimationFailed')
M('FirmwareNotRecognized')
M('HardResetFail')
M('InvalidXRPTag')
M('InvalidAddress')
M('InvalidAddressBecauseDestinationIsAlsoSource')
M('LatestMCUInstalledError')
M('UnknownMCU')
M('LedgerAPIError')
M('LedgerAPIErrorWithMessage')
M('LedgerAPINotAvailable')
M('ManagerAppAlreadyInstalled')
M('ManagerAppRelyOnBTC')
M('ManagerAppDepInstallRequired')
M('ManagerAppDepUninstallRequired')
M('ManagerDeviceLocked')
M('ManagerFirmwareNotEnoughSpace')
M('ManagerNotEnoughSpace')
M('ManagerUninstallBTCDep')
M('NetworkDown')
M('NoAddressesFound')
M('NotEnoughBalance')
M('NotEnoughBalanceToDelegate')
M('NotEnoughBalanceInParentAccount')
M('NotEnoughSpendableBalance')
M('NotEnoughBalanceBecauseDestinationNotCreated')
M('NoAccessToCamera')
M('NotEnoughGas')
M('NotSupportedLegacyAddress')
M('GasLessThanEstimate')
M('PasswordsDontMatch')
M('PasswordIncorrect')
M('RecommendSubAccountsToEmpty')
M('RecommendUndelegation')
M('TimeoutTagged')
M('UnexpectedBootloader')
M('MCUNotGenuineToDashboard')
M('RecipientRequired')
M('UnavailableTezosOriginatedAccountReceive')
M('UnavailableTezosOriginatedAccountSend')
M('UpdateFetchFileFail')
M('UpdateIncorrectHash')
M('UpdateIncorrectSig')
M('UpdateYourApp')
M('UserRefusedDeviceNameChange')
M('UserRefusedAddress')
M('UserRefusedFirmwareUpdate')
M('UserRefusedAllowManager')
M('UserRefusedOnDevice')
M('TransportOpenUserCancelled')
M('TransportInterfaceNotAvailable')
var oa = M('TransportRaceCondition')
M('TransportWebUSBGestureRequired')
M('DeviceShouldStayInApp')
M('WebsocketConnectionError')
M('WebsocketConnectionFailed')
M('WrongDeviceForAccount')
M('WrongAppForCurrency')
M('ETHAddressNonEIP')
M('CantScanQRCode')
M('FeeNotLoaded')
M('FeeRequired')
M('FeeTooHigh')
M('SyncError')
M('PairingFailed')
M('GenuineCheckFailed')
M('LedgerAPI4xx')
M('LedgerAPI5xx')
M('FirmwareOrAppUpdateRequired')
M('NoDBPathGiven')
M('DBWrongPassword')
M('DBNotReset')
function Ye(e, r) {
    ;(this.name = 'TransportError'),
        (this.message = e),
        (this.stack = new Error().stack),
        (this.id = r)
}
Ye.prototype = new Error()
var Zr = {
    PIN_REMAINING_ATTEMPTS: 25536,
    INCORRECT_LENGTH: 26368,
    MISSING_CRITICAL_PARAMETER: 26624,
    COMMAND_INCOMPATIBLE_FILE_STRUCTURE: 27009,
    SECURITY_STATUS_NOT_SATISFIED: 27010,
    CONDITIONS_OF_USE_NOT_SATISFIED: 27013,
    INCORRECT_DATA: 27264,
    NOT_ENOUGH_MEMORY_SPACE: 27268,
    REFERENCED_DATA_NOT_FOUND: 27272,
    FILE_ALREADY_EXISTS: 27273,
    INCORRECT_P1_P2: 27392,
    INS_NOT_SUPPORTED: 27904,
    CLA_NOT_SUPPORTED: 28160,
    TECHNICAL_PROBLEM: 28416,
    OK: 36864,
    MEMORY_PROBLEM: 37440,
    NO_EF_SELECTED: 37888,
    INVALID_OFFSET: 37890,
    FILE_NOT_FOUND: 37892,
    INCONSISTENT_FILE: 37896,
    ALGORITHM_NOT_SUPPORTED: 38020,
    INVALID_KCV: 38021,
    CODE_NOT_INITIALIZED: 38914,
    ACCESS_CONDITION_NOT_FULFILLED: 38916,
    CONTRADICTION_SECRET_CODE_STATUS: 38920,
    CONTRADICTION_INVALIDATION: 38928,
    CODE_BLOCKED: 38976,
    MAX_VALUE_REACHED: 38992,
    GP_AUTH_FAILED: 25344,
    LICENSING: 28482,
    HALTED: 28586,
}
function aa(e) {
    switch (e) {
        case 26368:
            return 'Incorrect length'
        case 26624:
            return 'Missing critical parameter'
        case 27010:
            return 'Security not satisfied (dongle locked or have invalid access rights)'
        case 27013:
            return 'Condition of use not satisfied (denied by the user?)'
        case 27264:
            return 'Invalid data received'
        case 27392:
            return 'Invalid parameter received'
    }
    if (28416 <= e && e <= 28671) return 'Internal error, please report'
}
function fi(e) {
    this.name = 'TransportStatusError'
    var r =
            Object.keys(Zr).find(function (o) {
                return Zr[o] === e
            }) || 'UNKNOWN_ERROR',
        t = aa(e) || r,
        i = e.toString(16)
    ;(this.message = 'Ledger device: ' + t + ' (0x' + i + ')'),
        (this.stack = new Error().stack),
        (this.statusCode = e),
        (this.statusText = r)
}
fi.prototype = new Error()
class $e {
    constructor() {
        ;(this.exchangeTimeout = 3e4),
            (this.unresponsiveTimeout = 15e3),
            (this.deviceModel = null),
            (this._events = new ia()),
            (this.send = async (r, t, i, o, n = Buffer.alloc(0), s = [Zr.OK]) => {
                if (n.length >= 256)
                    throw new Ye(
                        'data.length exceed 256 bytes limit. Got: ' + n.length,
                        'DataLengthTooBig'
                    )
                const l = await this.exchange(
                        Buffer.concat([Buffer.from([r, t, i, o]), Buffer.from([n.length]), n])
                    ),
                    a = l.readUInt16BE(l.length - 2)
                if (!s.some((p) => p === a)) throw new fi(a)
                return l
            }),
            (this.exchangeBusyPromise = void 0),
            (this.exchangeAtomicImpl = async (r) => {
                if (this.exchangeBusyPromise)
                    throw new oa(
                        'An action was already pending on the Ledger device. Please deny or reconnect.'
                    )
                let t
                const i = new Promise((s) => {
                    t = s
                })
                this.exchangeBusyPromise = i
                let o = !1
                const n = setTimeout(() => {
                    ;(o = !0), this.emit('unresponsive')
                }, this.unresponsiveTimeout)
                try {
                    const s = await r()
                    return o && this.emit('responsive'), s
                } finally {
                    clearTimeout(n), t && t(), (this.exchangeBusyPromise = null)
                }
            }),
            (this._appAPIlock = null)
    }
    exchange(r) {
        throw new Error('exchange not implemented')
    }
    setScrambleKey(r) {}
    close() {
        return Promise.resolve()
    }
    on(r, t) {
        this._events.on(r, t)
    }
    off(r, t) {
        this._events.removeListener(r, t)
    }
    emit(r, ...t) {
        this._events.emit(r, ...t)
    }
    setDebugMode() {
        console.warn(
            'setDebugMode is deprecated. use @ledgerhq/logs instead. No logs are emitted in this anymore.'
        )
    }
    setExchangeTimeout(r) {
        this.exchangeTimeout = r
    }
    setExchangeUnresponsiveTimeout(r) {
        this.unresponsiveTimeout = r
    }
    static create(r = 3e3, t) {
        return new Promise((i, o) => {
            let n = !1
            const s = this.listen({
                    next: (a) => {
                        ;(n = !0),
                            s && s.unsubscribe(),
                            l && clearTimeout(l),
                            this.open(a.descriptor, r).then(i, o)
                    },
                    error: (a) => {
                        l && clearTimeout(l), o(a)
                    },
                    complete: () => {
                        l && clearTimeout(l),
                            n || o(new Ye(this.ErrorMessage_NoDeviceFound, 'NoDeviceFound'))
                    },
                }),
                l = t
                    ? setTimeout(() => {
                          s.unsubscribe(),
                              o(new Ye(this.ErrorMessage_ListenTimeout, 'ListenTimeout'))
                      }, t)
                    : null
        })
    }
    decorateAppAPIMethods(r, t, i) {
        for (let o of t) r[o] = this.decorateAppAPIMethod(o, r[o], r, i)
    }
    decorateAppAPIMethod(r, t, i, o) {
        return async (...n) => {
            const { _appAPIlock: s } = this
            if (s)
                return Promise.reject(
                    new Ye('Ledger Device is busy (lock ' + s + ')', 'TransportLocked')
                )
            try {
                return (this._appAPIlock = r), this.setScrambleKey(o), await t.apply(i, n)
            } finally {
                this._appAPIlock = null
            }
        }
    }
}
$e.isSupported = void 0
$e.list = void 0
$e.listen = void 0
$e.open = void 0
$e.ErrorMessage_ListenTimeout = 'No Ledger device found (timeout)'
$e.ErrorMessage_NoDeviceFound = 'No Ledger device found'
let sa = 0
const Be = [],
    Nt = (e, r, t) => {
        const i = { type: e, id: String(++sa), date: new Date() }
        r && (i.message = r), t && (i.data = t), ca(i)
    },
    ua = (e) => (
        Be.push(e),
        () => {
            const r = Be.indexOf(e)
            r !== -1 && ((Be[r] = Be[Be.length - 1]), Be.pop())
        }
    )
function ca(e) {
    for (let r = 0; r < Be.length; r++)
        try {
            Be[r](e)
        } catch (t) {
            console.error(t)
        }
}
typeof window < 'u' && (window.__ledgerLogsListen = ua)
function la(e, r, t) {
    const i = new Ye(r, t)
    return (i.originalError = e), i
}
function fa(e, r) {
    const t = Buffer.alloc(e.length)
    for (let i = 0; i < e.length; i++) t[i] = e[i] ^ r[i % r.length]
    return t
}
const At = (e) => e.replace(/\+/g, '-').replace(/\//g, '_').replace(/=+$/, ''),
    da = (e) => e.replace(/-/g, '+').replace(/_/g, '/') + '=='.substring(0, (3 * e.length) % 4)
function pa(e, r, t, i) {
    const o = fa(e, t),
        n = Buffer.from('0000000000000000000000000000000000000000000000000000000000000000', 'hex'),
        s = {
            version: 'U2F_V2',
            keyHandle: At(o.toString('base64')),
            challenge: At(n.toString('base64')),
            appId: location.origin,
        }
    return (
        Nt('apdu', '=> ' + e.toString('hex')),
        nr.sign(s, r / 1e3).then((l) => {
            const { signatureData: a } = l
            if (typeof a == 'string') {
                const p = Buffer.from(da(a), 'base64')
                let d
                return i ? (d = p.slice(5)) : (d = p), Nt('apdu', '<= ' + d.toString('hex')), d
            } else throw l
        })
    )
}
let et = []
function ha() {
    et.forEach((e) => e.emit('disconnect')), (et = [])
}
function Ea(e) {
    return e.metaData.code === 5
}
class or extends $e {
    static async open(r, t = 5e3) {
        return new or()
    }
    constructor() {
        super(), (this.scrambleKey = void 0), (this.unwrap = !0), et.push(this)
    }
    async exchange(r) {
        try {
            return await pa(r, this.exchangeTimeout, this.scrambleKey, this.unwrap)
        } catch (t) {
            throw typeof t.metaData == 'object'
                ? (Ea(t) && ha(),
                  la(
                      t,
                      'Failed to sign with Ledger device: U2F ' + t.metaData.type,
                      'U2F_' + t.metaData.code
                  ))
                : t
        }
    }
    setScrambleKey(r) {
        this.scrambleKey = Buffer.from(r, 'ascii')
    }
    setUnwrap(r) {
        this.unwrap = r
    }
    close() {
        return Promise.resolve()
    }
}
or.isSupported = nr.isSupported
or.list = () => nr.isSupported().then((e) => (e ? [null] : []))
or.listen = (e) => {
    let r = !1
    return (
        nr.isSupported().then((t) => {
            r ||
                (t
                    ? (e.next({ type: 'add', descriptor: null }), e.complete())
                    : e.error(
                          new Ye(
                              "U2F browser support is needed for Ledger. Please use Chrome, Opera or Firefox with a U2F extension. Also make sure you're on an HTTPS connection",
                              'U2FNotSupported'
                          )
                      ))
        }),
        {
            unsubscribe: () => {
                r = !0
            },
        }
    )
}
var _a = {
        keyType: we.ledger,
        signTransaction: function (e) {
            return O.__awaiter(this, void 0, void 0, function () {
                var r, t, i, o, n, s, l
                return O.__generator(this, function (a) {
                    switch (a.label) {
                        case 0:
                            if (((r = e.transaction), (t = e.key), t.privateKey !== ''))
                                throw new Error(
                                    'Non-ledger key sent to ledger handler: ' +
                                        JSON.stringify(t.publicKey)
                                )
                            return [4, or.create(60 * 1e3)]
                        case 1:
                            return (
                                (i = a.sent()),
                                (o = new zo(i)),
                                [4, o.signTransaction(t.path, r.signatureBase())]
                            )
                        case 2:
                            return (
                                (n = a.sent()),
                                (s = xe.Keypair.fromPublicKey(t.publicKey)),
                                (l = new xe.xdr.DecoratedSignature({
                                    hint: s.signatureHint(),
                                    signature: n.signature,
                                })),
                                r.signatures.push(l),
                                [2, Promise.resolve(r)]
                            )
                    }
                })
            })
        },
    },
    va = {
        keyType: we.ledger,
        signTransaction: function (e) {
            var r = e.transaction,
                t = e.key
            if (t.privateKey === '')
                throw new Error(
                    'Non-plaintext key sent to plaintext handler: ' + JSON.stringify(t.publicKey)
                )
            var i = xe.Keypair.fromSecret(t.privateKey)
            return r.sign(i), Promise.resolve(r)
        },
    },
    di = {},
    Me = {},
    ga = {
        get exports() {
            return Me
        },
        set exports(e) {
            Me = e
        },
    }
;(function (e) {
    function r(t) {
        return t && t.__esModule ? t : { default: t }
    }
    ;(e.exports = r), (e.exports.__esModule = !0), (e.exports.default = e.exports)
})(ga)
var mr = {},
    ma = {
        get exports() {
            return mr
        },
        set exports(e) {
            mr = e
        },
    },
    yr = {},
    ya = {
        get exports() {
            return yr
        },
        set exports(e) {
            yr = e
        },
    },
    Sr = {},
    Sa = {
        get exports() {
            return Sr
        },
        set exports(e) {
            Sr = e
        },
    },
    Ct
function ht() {
    return (
        Ct ||
            ((Ct = 1),
            (function (e) {
                function r(t) {
                    return (
                        (e.exports = r =
                            typeof Symbol == 'function' && typeof Symbol.iterator == 'symbol'
                                ? function (i) {
                                      return typeof i
                                  }
                                : function (i) {
                                      return i &&
                                          typeof Symbol == 'function' &&
                                          i.constructor === Symbol &&
                                          i !== Symbol.prototype
                                          ? 'symbol'
                                          : typeof i
                                  }),
                        (e.exports.__esModule = !0),
                        (e.exports.default = e.exports),
                        r(t)
                    )
                }
                ;(e.exports = r), (e.exports.__esModule = !0), (e.exports.default = e.exports)
            })(Sa)),
        Sr
    )
}
var Tr = {},
    Ta = {
        get exports() {
            return Tr
        },
        set exports(e) {
            Tr = e
        },
    },
    Pt
function wa() {
    return (
        Pt ||
            ((Pt = 1),
            (function (e) {
                var r = ht().default
                function t(i, o) {
                    if (r(i) !== 'object' || i === null) return i
                    var n = i[Symbol.toPrimitive]
                    if (n !== void 0) {
                        var s = n.call(i, o || 'default')
                        if (r(s) !== 'object') return s
                        throw new TypeError('@@toPrimitive must return a primitive value.')
                    }
                    return (o === 'string' ? String : Number)(i)
                }
                ;(e.exports = t), (e.exports.__esModule = !0), (e.exports.default = e.exports)
            })(Ta)),
        Tr
    )
}
var xt
function Ra() {
    return (
        xt ||
            ((xt = 1),
            (function (e) {
                var r = ht().default,
                    t = wa()
                function i(o) {
                    var n = t(o, 'string')
                    return r(n) === 'symbol' ? n : String(n)
                }
                ;(e.exports = i), (e.exports.__esModule = !0), (e.exports.default = e.exports)
            })(ya)),
        yr
    )
}
var Ut
function Er() {
    return (
        Ut ||
            ((Ut = 1),
            (function (e) {
                var r = Ra()
                function t(i, o, n) {
                    return (
                        (o = r(o)),
                        o in i
                            ? Object.defineProperty(i, o, {
                                  value: n,
                                  enumerable: !0,
                                  configurable: !0,
                                  writable: !0,
                              })
                            : (i[o] = n),
                        i
                    )
                }
                ;(e.exports = t), (e.exports.__esModule = !0), (e.exports.default = e.exports)
            })(ma)),
        mr
    )
}
var X = {},
    me = {},
    Mt
function Oa() {
    if (Mt) return me
    ;(Mt = 1),
        (me.__esModule = !0),
        (me.FIAT_RATES_UPDATE = me.NOTIFICATION = me.BLOCK = me.CONNECT = me.ERROR = void 0)
    var e = 'blockchain-error'
    me.ERROR = e
    var r = 'blockchain-connect'
    me.CONNECT = r
    var t = 'blockchain-block'
    me.BLOCK = t
    var i = 'blockchain-notification'
    me.NOTIFICATION = i
    var o = 'fiat-rates-update'
    return (me.FIAT_RATES_UPDATE = o), me
}
var Y = {},
    Dt
function ba() {
    if (Dt) return Y
    ;(Dt = 1),
        (Y.__esModule = !0),
        (Y.WAIT_FOR_SELECTION =
            Y.WORD =
            Y.PASSPHRASE_ON_DEVICE =
            Y.PASSPHRASE =
            Y.PIN =
            Y.BUTTON =
            Y.LOADING =
            Y.USED_ELSEWHERE =
            Y.RELEASED =
            Y.ACQUIRED =
            Y.RELEASE =
            Y.ACQUIRE =
            Y.CHANGED =
            Y.DISCONNECT =
            Y.CONNECT_UNACQUIRED =
            Y.CONNECT =
                void 0)
    var e = 'device-connect'
    Y.CONNECT = e
    var r = 'device-connect_unacquired'
    Y.CONNECT_UNACQUIRED = r
    var t = 'device-disconnect'
    Y.DISCONNECT = t
    var i = 'device-changed'
    Y.CHANGED = i
    var o = 'device-acquire'
    Y.ACQUIRE = o
    var n = 'device-release'
    Y.RELEASE = n
    var s = 'device-acquired'
    Y.ACQUIRED = s
    var l = 'device-released'
    Y.RELEASED = l
    var a = 'device-used_elsewhere'
    Y.USED_ELSEWHERE = a
    var p = 'device-loading'
    Y.LOADING = p
    var d = 'button'
    Y.BUTTON = d
    var f = 'pin'
    Y.PIN = f
    var u = 'passphrase'
    Y.PASSPHRASE = u
    var E = 'passphrase_on_device'
    Y.PASSPHRASE_ON_DEVICE = E
    var S = 'word'
    Y.WORD = S
    var m = 'device-wait_for_selection'
    return (Y.WAIT_FOR_SELECTION = m), Y
}
var ce = {},
    wr = {},
    Ia = {
        get exports() {
            return wr
        },
        set exports(e) {
            wr = e
        },
    },
    Rr = {},
    Na = {
        get exports() {
            return Rr
        },
        set exports(e) {
            Rr = e
        },
    },
    Lt
function Et() {
    return (
        Lt ||
            ((Lt = 1),
            (function (e) {
                function r(t, i) {
                    return (
                        (e.exports = r =
                            Object.setPrototypeOf
                                ? Object.setPrototypeOf.bind()
                                : function (n, s) {
                                      return (n.__proto__ = s), n
                                  }),
                        (e.exports.__esModule = !0),
                        (e.exports.default = e.exports),
                        r(t, i)
                    )
                }
                ;(e.exports = r), (e.exports.__esModule = !0), (e.exports.default = e.exports)
            })(Na)),
        Rr
    )
}
var kt
function pi() {
    return (
        kt ||
            ((kt = 1),
            (function (e) {
                var r = Et()
                function t(i, o) {
                    ;(i.prototype = Object.create(o.prototype)),
                        (i.prototype.constructor = i),
                        r(i, o)
                }
                ;(e.exports = t), (e.exports.__esModule = !0), (e.exports.default = e.exports)
            })(Ia)),
        wr
    )
}
var Or = {},
    Aa = {
        get exports() {
            return Or
        },
        set exports(e) {
            Or = e
        },
    },
    br = {},
    Ca = {
        get exports() {
            return br
        },
        set exports(e) {
            br = e
        },
    },
    Bt
function Pa() {
    return (
        Bt ||
            ((Bt = 1),
            (function (e) {
                function r(t) {
                    return (
                        (e.exports = r =
                            Object.setPrototypeOf
                                ? Object.getPrototypeOf.bind()
                                : function (o) {
                                      return o.__proto__ || Object.getPrototypeOf(o)
                                  }),
                        (e.exports.__esModule = !0),
                        (e.exports.default = e.exports),
                        r(t)
                    )
                }
                ;(e.exports = r), (e.exports.__esModule = !0), (e.exports.default = e.exports)
            })(Ca)),
        br
    )
}
var Ir = {},
    xa = {
        get exports() {
            return Ir
        },
        set exports(e) {
            Ir = e
        },
    },
    Ft
function Ua() {
    return (
        Ft ||
            ((Ft = 1),
            (function (e) {
                function r(t) {
                    return Function.toString.call(t).indexOf('[native code]') !== -1
                }
                ;(e.exports = r), (e.exports.__esModule = !0), (e.exports.default = e.exports)
            })(xa)),
        Ir
    )
}
var Nr = {},
    Ma = {
        get exports() {
            return Nr
        },
        set exports(e) {
            Nr = e
        },
    },
    Ar = {},
    Da = {
        get exports() {
            return Ar
        },
        set exports(e) {
            Ar = e
        },
    },
    qt
function La() {
    return (
        qt ||
            ((qt = 1),
            (function (e) {
                function r() {
                    if (typeof Reflect > 'u' || !Reflect.construct || Reflect.construct.sham)
                        return !1
                    if (typeof Proxy == 'function') return !0
                    try {
                        return (
                            Boolean.prototype.valueOf.call(
                                Reflect.construct(Boolean, [], function () {})
                            ),
                            !0
                        )
                    } catch {
                        return !1
                    }
                }
                ;(e.exports = r), (e.exports.__esModule = !0), (e.exports.default = e.exports)
            })(Da)),
        Ar
    )
}
var Kt
function ka() {
    return (
        Kt ||
            ((Kt = 1),
            (function (e) {
                var r = Et(),
                    t = La()
                function i(o, n, s) {
                    return (
                        t()
                            ? ((e.exports = i = Reflect.construct.bind()),
                              (e.exports.__esModule = !0),
                              (e.exports.default = e.exports))
                            : ((e.exports = i =
                                  function (a, p, d) {
                                      var f = [null]
                                      f.push.apply(f, p)
                                      var u = Function.bind.apply(a, f),
                                          E = new u()
                                      return d && r(E, d.prototype), E
                                  }),
                              (e.exports.__esModule = !0),
                              (e.exports.default = e.exports)),
                        i.apply(null, arguments)
                    )
                }
                ;(e.exports = i), (e.exports.__esModule = !0), (e.exports.default = e.exports)
            })(Ma)),
        Nr
    )
}
var Gt
function Ba() {
    return (
        Gt ||
            ((Gt = 1),
            (function (e) {
                var r = Pa(),
                    t = Et(),
                    i = Ua(),
                    o = ka()
                function n(s) {
                    var l = typeof Map == 'function' ? new Map() : void 0
                    return (
                        (e.exports = n =
                            function (p) {
                                if (p === null || !i(p)) return p
                                if (typeof p != 'function')
                                    throw new TypeError(
                                        'Super expression must either be null or a function'
                                    )
                                if (typeof l < 'u') {
                                    if (l.has(p)) return l.get(p)
                                    l.set(p, d)
                                }
                                function d() {
                                    return o(p, arguments, r(this).constructor)
                                }
                                return (
                                    (d.prototype = Object.create(p.prototype, {
                                        constructor: {
                                            value: d,
                                            enumerable: !1,
                                            writable: !0,
                                            configurable: !0,
                                        },
                                    })),
                                    t(d, p)
                                )
                            }),
                        (e.exports.__esModule = !0),
                        (e.exports.default = e.exports),
                        n(s)
                    )
                }
                ;(e.exports = n), (e.exports.__esModule = !0), (e.exports.default = e.exports)
            })(Aa)),
        Or
    )
}
var Wt
function Fa() {
    if (Wt) return ce
    Wt = 1
    var e = Me
    ;(ce.__esModule = !0),
        (ce.LIBUSB_ERROR_MESSAGE =
            ce.WEBUSB_ERROR_MESSAGE =
            ce.INVALID_PIN_ERROR_MESSAGE =
            ce.WRONG_PREVIOUS_SESSION_ERROR_MESSAGE =
            ce.TypedError =
            ce.TrezorError =
            ce.ERROR_CODES =
                void 0)
    var r = e(pi()),
        t = e(Ba()),
        i = {
            Init_NotInitialized: 'TrezorConnect not yet initialized',
            Init_AlreadyInitialized: 'TrezorConnect has been already initialized',
            Init_IframeBlocked: 'Iframe blocked',
            Init_IframeTimeout: 'Iframe timeout',
            Init_ManifestMissing:
                'Manifest not set. Read more at https://github.com/trezor/connect/blob/develop/docs/index.md',
            Popup_ConnectionMissing: 'Unable to establish connection with iframe',
            Transport_Missing: 'Transport is missing',
            Transport_InvalidProtobuf: '',
            Method_InvalidPackage:
                'This version of trezor-connect is not suitable to work without browser. Use trezor-connect@extended package instead',
            Method_InvalidParameter: '',
            Method_NotAllowed: 'Method not allowed for this configuration',
            Method_PermissionsNotGranted: 'Permissions not granted',
            Method_Cancel: 'Cancelled',
            Method_Interrupted: 'Popup closed',
            Method_UnknownCoin: 'Coin not found',
            Method_AddressNotMatch: 'Addresses do not match',
            Method_FirmwareUpdate_DownloadFailed: 'Failed to download firmware binary',
            Method_CustomMessage_Callback: 'Parameter "callback" is not a function',
            Method_Discovery_BundleException: '',
            Method_Override: 'override',
            Method_NoResponse: 'Call resolved without response',
            Backend_NotSupported: 'BlockchainLink settings not found in coins.json',
            Backend_WorkerMissing: '',
            Backend_Disconnected: 'Backend disconnected',
            Backend_Invalid: 'Invalid backend',
            Backend_Error: '',
            Runtime: '',
            Device_NotFound: 'Device not found',
            Device_InitializeFailed: '',
            Device_FwException: '',
            Device_ModeException: '',
            Device_Disconnected: 'Device disconnected',
            Device_UsedElsewhere: 'Device is used in another window',
            Device_InvalidState: 'Passphrase is incorrect',
            Device_CallInProgress: 'Device call in progress',
        }
    ce.ERROR_CODES = i
    var o = (function (d) {
        ;(0, r.default)(f, d)
        function f(u, E) {
            var S
            return (S = d.call(this, E) || this), (S.code = u), (S.message = E), S
        }
        return f
    })((0, t.default)(Error))
    ce.TrezorError = o
    var n = function (f, u) {
        return new o(f, u || i[f])
    }
    ce.TypedError = n
    var s = 'wrong previous session'
    ce.WRONG_PREVIOUS_SESSION_ERROR_MESSAGE = s
    var l = 'PIN invalid'
    ce.INVALID_PIN_ERROR_MESSAGE = l
    var a = 'NetworkError: Unable to claim interface.'
    ce.WEBUSB_ERROR_MESSAGE = a
    var p = 'LIBUSB_ERROR'
    return (ce.LIBUSB_ERROR_MESSAGE = p), ce
}
var ye = {},
    Qt
function hi() {
    if (Qt) return ye
    ;(Qt = 1),
        (ye.__esModule = !0),
        (ye.CALL = ye.ERROR = ye.INIT = ye.LOADED = ye.BOOTSTRAP = void 0)
    var e = 'iframe-bootstrap'
    ye.BOOTSTRAP = e
    var r = 'iframe-loaded'
    ye.LOADED = r
    var t = 'iframe-init'
    ye.INIT = t
    var i = 'iframe-error'
    ye.ERROR = i
    var o = 'iframe-call'
    return (ye.CALL = o), ye
}
var cr = {},
    jt
function qa() {
    if (jt) return cr
    ;(jt = 1), (cr.__esModule = !0), (cr.TYPES = void 0)
    var e = Object.freeze({
        bitcoin: 'Bitcoin',
        ethereum: 'Ethereum',
        eos: 'Eos',
        nem: 'NEM',
        stellar: 'Stellar',
        cardano: 'Cardano',
        ripple: 'Ripple',
        tezos: 'Tezors',
        binance: 'Binance',
    })
    return (cr.TYPES = e), cr
}
var oe = {},
    Ht
function Ei() {
    if (Ht) return oe
    ;(Ht = 1),
        (oe.__esModule = !0),
        (oe.CLOSE_WINDOW =
            oe.CANCEL_POPUP_REQUEST =
            oe.CLOSED =
            oe.HANDSHAKE =
            oe.EXTENSION_USB_PERMISSIONS =
            oe.ERROR =
            oe.INIT =
            oe.LOADED =
            oe.BOOTSTRAP =
                void 0)
    var e = 'popup-bootstrap'
    oe.BOOTSTRAP = e
    var r = 'popup-loaded'
    oe.LOADED = r
    var t = 'popup-init'
    oe.INIT = t
    var i = 'popup-error'
    oe.ERROR = i
    var o = 'open-usb-permissions'
    oe.EXTENSION_USB_PERMISSIONS = o
    var n = 'popup-handshake'
    oe.HANDSHAKE = n
    var s = 'popup-closed'
    oe.CLOSED = s
    var l = 'ui-cancel-popup-request'
    oe.CANCEL_POPUP_REQUEST = l
    var a = 'window.close'
    return (oe.CLOSE_WINDOW = a), oe
}
var le = {},
    zt
function Ka() {
    if (zt) return le
    ;(zt = 1),
        (le.__esModule = !0),
        (le.START_PENDING =
            le.DISABLE_WEBUSB =
            le.REQUEST =
            le.STREAM =
            le.UPDATE =
            le.ERROR =
            le.START =
                void 0)
    var e = 'transport-start'
    le.START = e
    var r = 'transport-error'
    le.ERROR = r
    var t = 'transport-update'
    le.UPDATE = t
    var i = 'transport-stream'
    le.STREAM = i
    var o = 'transport-request_device'
    le.REQUEST = o
    var n = 'transport-disable_webusb'
    le.DISABLE_WEBUSB = n
    var s = 'transport-start_pending'
    return (le.START_PENDING = s), le
}
var N = {},
    Vt
function _i() {
    if (Vt) return N
    ;(Vt = 1),
        (N.__esModule = !0),
        (N.IFRAME_FAILURE =
            N.ADDRESS_VALIDATION =
            N.BUNDLE_PROGRESS =
            N.LOGIN_CHALLENGE_RESPONSE =
            N.LOGIN_CHALLENGE_REQUEST =
            N.CUSTOM_MESSAGE_RESPONSE =
            N.CUSTOM_MESSAGE_REQUEST =
            N.CHANGE_SETTINGS =
            N.RECEIVE_WORD =
            N.RECEIVE_FEE =
            N.RECEIVE_ACCOUNT =
            N.CHANGE_ACCOUNT =
            N.RECEIVE_DEVICE =
            N.RECEIVE_PASSPHRASE =
            N.RECEIVE_PIN =
            N.RECEIVE_CONFIRMATION =
            N.RECEIVE_PERMISSION =
            N.REQUEST_WORD =
            N.REQUEST_BUTTON =
            N.INSUFFICIENT_FUNDS =
            N.UPDATE_CUSTOM_FEE =
            N.SELECT_FEE =
            N.SELECT_ACCOUNT =
            N.SELECT_DEVICE =
            N.SET_OPERATION =
            N.LOADING =
            N.CONNECT =
            N.INVALID_PASSPHRASE_ACTION =
            N.INVALID_PASSPHRASE =
            N.REQUEST_PASSPHRASE_ON_DEVICE =
            N.REQUEST_PASSPHRASE =
            N.INVALID_PIN =
            N.REQUEST_PIN =
            N.REQUEST_CONFIRMATION =
            N.REQUEST_PERMISSION =
            N.CLOSE_UI_WINDOW =
            N.REQUEST_UI_WINDOW =
            N.DEVICE_NEEDS_BACKUP =
            N.FIRMWARE_PROGRESS =
            N.FIRMWARE_NOT_INSTALLED =
            N.FIRMWARE_NOT_COMPATIBLE =
            N.FIRMWARE_NOT_SUPPORTED =
            N.FIRMWARE_OUTDATED =
            N.FIRMWARE_OLD =
            N.SEEDLESS =
            N.INITIALIZE =
            N.REQUIRE_MODE =
            N.NOT_IN_BOOTLOADER =
            N.BOOTLOADER =
            N.TRANSPORT =
                void 0)
    var e = 'ui-no_transport'
    N.TRANSPORT = e
    var r = 'ui-device_bootloader_mode'
    N.BOOTLOADER = r
    var t = 'ui-device_not_in_bootloader_mode'
    N.NOT_IN_BOOTLOADER = t
    var i = 'ui-device_require_mode'
    N.REQUIRE_MODE = i
    var o = 'ui-device_not_initialized'
    N.INITIALIZE = o
    var n = 'ui-device_seedless'
    N.SEEDLESS = n
    var s = 'ui-device_firmware_old'
    N.FIRMWARE_OLD = s
    var l = 'ui-device_firmware_outdated'
    N.FIRMWARE_OUTDATED = l
    var a = 'ui-device_firmware_unsupported'
    N.FIRMWARE_NOT_SUPPORTED = a
    var p = 'ui-device_firmware_not_compatible'
    N.FIRMWARE_NOT_COMPATIBLE = p
    var d = 'ui-device_firmware_not_installed'
    N.FIRMWARE_NOT_INSTALLED = d
    var f = 'ui-firmware-progress'
    N.FIRMWARE_PROGRESS = f
    var u = 'ui-device_needs_backup'
    N.DEVICE_NEEDS_BACKUP = u
    var E = 'ui-request_window'
    N.REQUEST_UI_WINDOW = E
    var S = 'ui-close_window'
    N.CLOSE_UI_WINDOW = S
    var m = 'ui-request_permission'
    N.REQUEST_PERMISSION = m
    var R = 'ui-request_confirmation'
    N.REQUEST_CONFIRMATION = R
    var h = 'ui-request_pin'
    N.REQUEST_PIN = h
    var _ = 'ui-invalid_pin'
    N.INVALID_PIN = _
    var y = 'ui-request_passphrase'
    N.REQUEST_PASSPHRASE = y
    var c = 'ui-request_passphrase_on_device'
    N.REQUEST_PASSPHRASE_ON_DEVICE = c
    var w = 'ui-invalid_passphrase'
    N.INVALID_PASSPHRASE = w
    var P = 'ui-invalid_passphrase_action'
    N.INVALID_PASSPHRASE_ACTION = P
    var b = 'ui-connect'
    N.CONNECT = b
    var D = 'ui-loading'
    N.LOADING = D
    var W = 'ui-set_operation'
    N.SET_OPERATION = W
    var K = 'ui-select_device'
    N.SELECT_DEVICE = K
    var j = 'ui-select_account'
    N.SELECT_ACCOUNT = j
    var z = 'ui-select_fee'
    N.SELECT_FEE = z
    var H = 'ui-update_custom_fee'
    N.UPDATE_CUSTOM_FEE = H
    var he = 'ui-insufficient_funds'
    N.INSUFFICIENT_FUNDS = he
    var k = 'ui-button'
    N.REQUEST_BUTTON = k
    var I = 'ui-request_word'
    N.REQUEST_WORD = I
    var L = 'ui-receive_permission'
    N.RECEIVE_PERMISSION = L
    var Q = 'ui-receive_confirmation'
    N.RECEIVE_CONFIRMATION = Q
    var U = 'ui-receive_pin'
    N.RECEIVE_PIN = U
    var x = 'ui-receive_passphrase'
    N.RECEIVE_PASSPHRASE = x
    var B = 'ui-receive_device'
    N.RECEIVE_DEVICE = B
    var G = 'ui-change_account'
    N.CHANGE_ACCOUNT = G
    var g = 'ui-receive_account'
    N.RECEIVE_ACCOUNT = g
    var v = 'ui-receive_fee'
    N.RECEIVE_FEE = v
    var A = 'ui-receive_word'
    N.RECEIVE_WORD = A
    var T = 'ui-change_settings'
    N.CHANGE_SETTINGS = T
    var V = 'ui-custom_request'
    N.CUSTOM_MESSAGE_REQUEST = V
    var J = 'ui-custom_response'
    N.CUSTOM_MESSAGE_RESPONSE = J
    var ne = 'ui-login_challenge_request'
    N.LOGIN_CHALLENGE_REQUEST = ne
    var ee = 'ui-login_challenge_response'
    N.LOGIN_CHALLENGE_RESPONSE = ee
    var re = 'ui-bundle_progress'
    N.BUNDLE_PROGRESS = re
    var ae = 'ui-address_validation'
    N.ADDRESS_VALIDATION = ae
    var Z = 'ui-iframe_failure'
    return (N.IFRAME_FAILURE = Z), N
}
var Se = {},
    Jt
function Ga() {
    if (Jt) return Se
    ;(Jt = 1),
        (Se.__esModule = !0),
        (Se.POOL_RELAY_TYPE =
            Se.CERTIFICATE_TYPE =
            Se.ADDRESS_TYPE =
            Se.NETWORK_IDS =
            Se.PROTOCOL_MAGICS =
                void 0)
    var e = Object.freeze({ mainnet: 764824073, testnet: 1097911063 })
    Se.PROTOCOL_MAGICS = e
    var r = Object.freeze({ mainnet: 1, testnet: 0 })
    Se.NETWORK_IDS = r
    var t = Object.freeze({ Base: 0, Pointer: 4, Enterprise: 6, Byron: 8, Reward: 14 })
    Se.ADDRESS_TYPE = t
    var i = Object.freeze({
        StakeRegistration: 0,
        StakeDeregistration: 1,
        StakeDelegation: 2,
        StakePoolRegistration: 3,
    })
    Se.CERTIFICATE_TYPE = i
    var o = Object.freeze({ SingleHostIp: 0, SingleHostName: 1, MultipleHostName: 2 })
    return (Se.POOL_RELAY_TYPE = o), Se
}
var Yt
function Ge() {
    if (Yt) return X
    ;(Yt = 1),
        (X.__esModule = !0),
        (X.CARDANO =
            X.UI =
            X.TRANSPORT =
            X.POPUP =
            X.NETWORK =
            X.IFRAME =
            X.ERRORS =
            X.DEVICE =
            X.BLOCKCHAIN =
            X.BLOCKCHAIN_EVENT =
            X.RESPONSE_EVENT =
            X.TRANSPORT_EVENT =
            X.DEVICE_EVENT =
            X.UI_EVENT =
            X.CORE_EVENT =
                void 0)
    var e = d(Oa())
    X.BLOCKCHAIN = e
    var r = d(ba())
    X.DEVICE = r
    var t = d(Fa())
    X.ERRORS = t
    var i = d(hi())
    X.IFRAME = i
    var o = d(qa())
    X.NETWORK = o
    var n = d(Ei())
    X.POPUP = n
    var s = d(Ka())
    X.TRANSPORT = s
    var l = d(_i())
    X.UI = l
    var a = d(Ga())
    X.CARDANO = a
    function p(h) {
        if (typeof WeakMap != 'function') return null
        var _ = new WeakMap(),
            y = new WeakMap()
        return (p = function (w) {
            return w ? y : _
        })(h)
    }
    function d(h, _) {
        if (!_ && h && h.__esModule) return h
        if (h === null || (typeof h != 'object' && typeof h != 'function')) return { default: h }
        var y = p(_)
        if (y && y.has(h)) return y.get(h)
        var c = {},
            w = Object.defineProperty && Object.getOwnPropertyDescriptor
        for (var P in h)
            if (P !== 'default' && Object.prototype.hasOwnProperty.call(h, P)) {
                var b = w ? Object.getOwnPropertyDescriptor(h, P) : null
                b && (b.get || b.set) ? Object.defineProperty(c, P, b) : (c[P] = h[P])
            }
        return (c.default = h), y && y.set(h, c), c
    }
    var f = 'CORE_EVENT'
    X.CORE_EVENT = f
    var u = 'UI_EVENT'
    X.UI_EVENT = u
    var E = 'DEVICE_EVENT'
    X.DEVICE_EVENT = E
    var S = 'TRANSPORT_EVENT'
    X.TRANSPORT_EVENT = S
    var m = 'RESPONSE_EVENT'
    X.RESPONSE_EVENT = m
    var R = 'BLOCKCHAIN_EVENT'
    return (X.BLOCKCHAIN_EVENT = R), X
}
var te = {},
    Cr = {},
    Wa = {
        get exports() {
            return Cr
        },
        set exports(e) {
            Cr = e
        },
    },
    Xt
function Qa() {
    return (
        Xt ||
            ((Xt = 1),
            (function (e) {
                var r = ht().default
                function t() {
                    ;(e.exports = t =
                        function () {
                            return i
                        }),
                        (e.exports.__esModule = !0),
                        (e.exports.default = e.exports)
                    var i = {},
                        o = Object.prototype,
                        n = o.hasOwnProperty,
                        s =
                            Object.defineProperty ||
                            function (k, I, L) {
                                k[I] = L.value
                            },
                        l = typeof Symbol == 'function' ? Symbol : {},
                        a = l.iterator || '@@iterator',
                        p = l.asyncIterator || '@@asyncIterator',
                        d = l.toStringTag || '@@toStringTag'
                    function f(k, I, L) {
                        return (
                            Object.defineProperty(k, I, {
                                value: L,
                                enumerable: !0,
                                configurable: !0,
                                writable: !0,
                            }),
                            k[I]
                        )
                    }
                    try {
                        f({}, '')
                    } catch {
                        f = function (L, Q, U) {
                            return (L[Q] = U)
                        }
                    }
                    function u(k, I, L, Q) {
                        var U = I && I.prototype instanceof m ? I : m,
                            x = Object.create(U.prototype),
                            B = new z(Q || [])
                        return s(x, '_invoke', { value: D(k, L, B) }), x
                    }
                    function E(k, I, L) {
                        try {
                            return { type: 'normal', arg: k.call(I, L) }
                        } catch (Q) {
                            return { type: 'throw', arg: Q }
                        }
                    }
                    i.wrap = u
                    var S = {}
                    function m() {}
                    function R() {}
                    function h() {}
                    var _ = {}
                    f(_, a, function () {
                        return this
                    })
                    var y = Object.getPrototypeOf,
                        c = y && y(y(H([])))
                    c && c !== o && n.call(c, a) && (_ = c)
                    var w = (h.prototype = m.prototype = Object.create(_))
                    function P(k) {
                        ;['next', 'throw', 'return'].forEach(function (I) {
                            f(k, I, function (L) {
                                return this._invoke(I, L)
                            })
                        })
                    }
                    function b(k, I) {
                        function L(U, x, B, G) {
                            var g = E(k[U], k, x)
                            if (g.type !== 'throw') {
                                var v = g.arg,
                                    A = v.value
                                return A && r(A) == 'object' && n.call(A, '__await')
                                    ? I.resolve(A.__await).then(
                                          function (T) {
                                              L('next', T, B, G)
                                          },
                                          function (T) {
                                              L('throw', T, B, G)
                                          }
                                      )
                                    : I.resolve(A).then(
                                          function (T) {
                                              ;(v.value = T), B(v)
                                          },
                                          function (T) {
                                              return L('throw', T, B, G)
                                          }
                                      )
                            }
                            G(g.arg)
                        }
                        var Q
                        s(this, '_invoke', {
                            value: function (x, B) {
                                function G() {
                                    return new I(function (g, v) {
                                        L(x, B, g, v)
                                    })
                                }
                                return (Q = Q ? Q.then(G, G) : G())
                            },
                        })
                    }
                    function D(k, I, L) {
                        var Q = 'suspendedStart'
                        return function (U, x) {
                            if (Q === 'executing') throw new Error('Generator is already running')
                            if (Q === 'completed') {
                                if (U === 'throw') throw x
                                return he()
                            }
                            for (L.method = U, L.arg = x; ; ) {
                                var B = L.delegate
                                if (B) {
                                    var G = W(B, L)
                                    if (G) {
                                        if (G === S) continue
                                        return G
                                    }
                                }
                                if (L.method === 'next') L.sent = L._sent = L.arg
                                else if (L.method === 'throw') {
                                    if (Q === 'suspendedStart') throw ((Q = 'completed'), L.arg)
                                    L.dispatchException(L.arg)
                                } else L.method === 'return' && L.abrupt('return', L.arg)
                                Q = 'executing'
                                var g = E(k, I, L)
                                if (g.type === 'normal') {
                                    if (
                                        ((Q = L.done ? 'completed' : 'suspendedYield'), g.arg === S)
                                    )
                                        continue
                                    return { value: g.arg, done: L.done }
                                }
                                g.type === 'throw' &&
                                    ((Q = 'completed'), (L.method = 'throw'), (L.arg = g.arg))
                            }
                        }
                    }
                    function W(k, I) {
                        var L = I.method,
                            Q = k.iterator[L]
                        if (Q === void 0)
                            return (
                                (I.delegate = null),
                                (L === 'throw' &&
                                    k.iterator.return &&
                                    ((I.method = 'return'),
                                    (I.arg = void 0),
                                    W(k, I),
                                    I.method === 'throw')) ||
                                    (L !== 'return' &&
                                        ((I.method = 'throw'),
                                        (I.arg = new TypeError(
                                            "The iterator does not provide a '" + L + "' method"
                                        )))),
                                S
                            )
                        var U = E(Q, k.iterator, I.arg)
                        if (U.type === 'throw')
                            return (I.method = 'throw'), (I.arg = U.arg), (I.delegate = null), S
                        var x = U.arg
                        return x
                            ? x.done
                                ? ((I[k.resultName] = x.value),
                                  (I.next = k.nextLoc),
                                  I.method !== 'return' && ((I.method = 'next'), (I.arg = void 0)),
                                  (I.delegate = null),
                                  S)
                                : x
                            : ((I.method = 'throw'),
                              (I.arg = new TypeError('iterator result is not an object')),
                              (I.delegate = null),
                              S)
                    }
                    function K(k) {
                        var I = { tryLoc: k[0] }
                        1 in k && (I.catchLoc = k[1]),
                            2 in k && ((I.finallyLoc = k[2]), (I.afterLoc = k[3])),
                            this.tryEntries.push(I)
                    }
                    function j(k) {
                        var I = k.completion || {}
                        ;(I.type = 'normal'), delete I.arg, (k.completion = I)
                    }
                    function z(k) {
                        ;(this.tryEntries = [{ tryLoc: 'root' }]),
                            k.forEach(K, this),
                            this.reset(!0)
                    }
                    function H(k) {
                        if (k) {
                            var I = k[a]
                            if (I) return I.call(k)
                            if (typeof k.next == 'function') return k
                            if (!isNaN(k.length)) {
                                var L = -1,
                                    Q = function U() {
                                        for (; ++L < k.length; )
                                            if (n.call(k, L))
                                                return (U.value = k[L]), (U.done = !1), U
                                        return (U.value = void 0), (U.done = !0), U
                                    }
                                return (Q.next = Q)
                            }
                        }
                        return { next: he }
                    }
                    function he() {
                        return { value: void 0, done: !0 }
                    }
                    return (
                        (R.prototype = h),
                        s(w, 'constructor', { value: h, configurable: !0 }),
                        s(h, 'constructor', { value: R, configurable: !0 }),
                        (R.displayName = f(h, d, 'GeneratorFunction')),
                        (i.isGeneratorFunction = function (k) {
                            var I = typeof k == 'function' && k.constructor
                            return (
                                !!I &&
                                (I === R || (I.displayName || I.name) === 'GeneratorFunction')
                            )
                        }),
                        (i.mark = function (k) {
                            return (
                                Object.setPrototypeOf
                                    ? Object.setPrototypeOf(k, h)
                                    : ((k.__proto__ = h), f(k, d, 'GeneratorFunction')),
                                (k.prototype = Object.create(w)),
                                k
                            )
                        }),
                        (i.awrap = function (k) {
                            return { __await: k }
                        }),
                        P(b.prototype),
                        f(b.prototype, p, function () {
                            return this
                        }),
                        (i.AsyncIterator = b),
                        (i.async = function (k, I, L, Q, U) {
                            U === void 0 && (U = Promise)
                            var x = new b(u(k, I, L, Q), U)
                            return i.isGeneratorFunction(I)
                                ? x
                                : x.next().then(function (B) {
                                      return B.done ? B.value : x.next()
                                  })
                        }),
                        P(w),
                        f(w, d, 'Generator'),
                        f(w, a, function () {
                            return this
                        }),
                        f(w, 'toString', function () {
                            return '[object Generator]'
                        }),
                        (i.keys = function (k) {
                            var I = Object(k),
                                L = []
                            for (var Q in I) L.push(Q)
                            return (
                                L.reverse(),
                                function U() {
                                    for (; L.length; ) {
                                        var x = L.pop()
                                        if (x in I) return (U.value = x), (U.done = !1), U
                                    }
                                    return (U.done = !0), U
                                }
                            )
                        }),
                        (i.values = H),
                        (z.prototype = {
                            constructor: z,
                            reset: function (I) {
                                if (
                                    ((this.prev = 0),
                                    (this.next = 0),
                                    (this.sent = this._sent = void 0),
                                    (this.done = !1),
                                    (this.delegate = null),
                                    (this.method = 'next'),
                                    (this.arg = void 0),
                                    this.tryEntries.forEach(j),
                                    !I)
                                )
                                    for (var L in this)
                                        L.charAt(0) === 't' &&
                                            n.call(this, L) &&
                                            !isNaN(+L.slice(1)) &&
                                            (this[L] = void 0)
                            },
                            stop: function () {
                                this.done = !0
                                var I = this.tryEntries[0].completion
                                if (I.type === 'throw') throw I.arg
                                return this.rval
                            },
                            dispatchException: function (I) {
                                if (this.done) throw I
                                var L = this
                                function Q(v, A) {
                                    return (
                                        (B.type = 'throw'),
                                        (B.arg = I),
                                        (L.next = v),
                                        A && ((L.method = 'next'), (L.arg = void 0)),
                                        !!A
                                    )
                                }
                                for (var U = this.tryEntries.length - 1; U >= 0; --U) {
                                    var x = this.tryEntries[U],
                                        B = x.completion
                                    if (x.tryLoc === 'root') return Q('end')
                                    if (x.tryLoc <= this.prev) {
                                        var G = n.call(x, 'catchLoc'),
                                            g = n.call(x, 'finallyLoc')
                                        if (G && g) {
                                            if (this.prev < x.catchLoc) return Q(x.catchLoc, !0)
                                            if (this.prev < x.finallyLoc) return Q(x.finallyLoc)
                                        } else if (G) {
                                            if (this.prev < x.catchLoc) return Q(x.catchLoc, !0)
                                        } else {
                                            if (!g)
                                                throw new Error(
                                                    'try statement without catch or finally'
                                                )
                                            if (this.prev < x.finallyLoc) return Q(x.finallyLoc)
                                        }
                                    }
                                }
                            },
                            abrupt: function (I, L) {
                                for (var Q = this.tryEntries.length - 1; Q >= 0; --Q) {
                                    var U = this.tryEntries[Q]
                                    if (
                                        U.tryLoc <= this.prev &&
                                        n.call(U, 'finallyLoc') &&
                                        this.prev < U.finallyLoc
                                    ) {
                                        var x = U
                                        break
                                    }
                                }
                                x &&
                                    (I === 'break' || I === 'continue') &&
                                    x.tryLoc <= L &&
                                    L <= x.finallyLoc &&
                                    (x = null)
                                var B = x ? x.completion : {}
                                return (
                                    (B.type = I),
                                    (B.arg = L),
                                    x
                                        ? ((this.method = 'next'), (this.next = x.finallyLoc), S)
                                        : this.complete(B)
                                )
                            },
                            complete: function (I, L) {
                                if (I.type === 'throw') throw I.arg
                                return (
                                    I.type === 'break' || I.type === 'continue'
                                        ? (this.next = I.arg)
                                        : I.type === 'return'
                                        ? ((this.rval = this.arg = I.arg),
                                          (this.method = 'return'),
                                          (this.next = 'end'))
                                        : I.type === 'normal' && L && (this.next = L),
                                    S
                                )
                            },
                            finish: function (I) {
                                for (var L = this.tryEntries.length - 1; L >= 0; --L) {
                                    var Q = this.tryEntries[L]
                                    if (Q.finallyLoc === I)
                                        return this.complete(Q.completion, Q.afterLoc), j(Q), S
                                }
                            },
                            catch: function (I) {
                                for (var L = this.tryEntries.length - 1; L >= 0; --L) {
                                    var Q = this.tryEntries[L]
                                    if (Q.tryLoc === I) {
                                        var U = Q.completion
                                        if (U.type === 'throw') {
                                            var x = U.arg
                                            j(Q)
                                        }
                                        return x
                                    }
                                }
                                throw new Error('illegal catch attempt')
                            },
                            delegateYield: function (I, L, Q) {
                                return (
                                    (this.delegate = { iterator: H(I), resultName: L, nextLoc: Q }),
                                    this.method === 'next' && (this.arg = void 0),
                                    S
                                )
                            },
                        }),
                        i
                    )
                }
                ;(e.exports = t), (e.exports.__esModule = !0), (e.exports.default = e.exports)
            })(Wa)),
        Cr
    )
}
var jr, $t
function Dr() {
    if ($t) return jr
    $t = 1
    var e = Qa()()
    jr = e
    try {
        regeneratorRuntime = e
    } catch {
        typeof globalThis == 'object'
            ? (globalThis.regeneratorRuntime = e)
            : Function('r', 'regeneratorRuntime = r')(e)
    }
    return jr
}
var Pr = {},
    ja = {
        get exports() {
            return Pr
        },
        set exports(e) {
            Pr = e
        },
    },
    Zt
function Lr() {
    return (
        Zt ||
            ((Zt = 1),
            (function (e) {
                function r(i, o, n, s, l, a, p) {
                    try {
                        var d = i[a](p),
                            f = d.value
                    } catch (u) {
                        n(u)
                        return
                    }
                    d.done ? o(f) : Promise.resolve(f).then(s, l)
                }
                function t(i) {
                    return function () {
                        var o = this,
                            n = arguments
                        return new Promise(function (s, l) {
                            var a = i.apply(o, n)
                            function p(f) {
                                r(a, s, l, p, d, 'next', f)
                            }
                            function d(f) {
                                r(a, s, l, p, d, 'throw', f)
                            }
                            p(void 0)
                        })
                    }
                }
                ;(e.exports = t), (e.exports.__esModule = !0), (e.exports.default = e.exports)
            })(ja)),
        Pr
    )
}
var Hr = {},
    xr = {},
    Ha = {
        get exports() {
            return xr
        },
        set exports(e) {
            xr = e
        },
    },
    en
function za() {
    return (
        en ||
            ((en = 1),
            (function (e) {
                function r(t) {
                    if (t === void 0)
                        throw new ReferenceError(
                            "this hasn't been initialised - super() hasn't been called"
                        )
                    return t
                }
                ;(e.exports = r), (e.exports.__esModule = !0), (e.exports.default = e.exports)
            })(Ha)),
        xr
    )
}
var lr = {},
    rn
function Va() {
    if (rn) return lr
    ;(rn = 1), (lr.__esModule = !0), (lr.showPopupRequest = void 0)
    var e = 'TrezorConnectInteractionLayer',
        r =
            `
    <div class="trezorconnect-container" id="` +
            e +
            `">
        <div class="trezorconnect-window">
            <div class="trezorconnect-head">
                <svg class="trezorconnect-logo" x="0px" y="0px" viewBox="0 0 163.7 41.9" width="78px" height="20px" preserveAspectRatio="xMinYMin meet">
                    <polygon points="101.1,12.8 118.2,12.8 118.2,17.3 108.9,29.9 118.2,29.9 118.2,35.2 101.1,35.2 101.1,30.7 110.4,18.1 101.1,18.1"/>
                    <path d="M158.8,26.9c2.1-0.8,4.3-2.9,4.3-6.6c0-4.5-3.1-7.4-7.7-7.4h-10.5v22.3h5.8v-7.5h2.2l4.1,7.5h6.7L158.8,26.9z M154.7,22.5 h-4V18h4c1.5,0,2.5,0.9,2.5,2.2C157.2,21.6,156.2,22.5,154.7,22.5z"/>
                    <path d="M130.8,12.5c-6.8,0-11.6,4.9-11.6,11.5s4.9,11.5,11.6,11.5s11.7-4.9,11.7-11.5S137.6,12.5,130.8,12.5z M130.8,30.3 c-3.4,0-5.7-2.6-5.7-6.3c0-3.8,2.3-6.3,5.7-6.3c3.4,0,5.8,2.6,5.8,6.3C136.6,27.7,134.2,30.3,130.8,30.3z"/>
                    <polygon points="82.1,12.8 98.3,12.8 98.3,18 87.9,18 87.9,21.3 98,21.3 98,26.4 87.9,26.4 87.9,30 98.3,30 98.3,35.2 82.1,35.2 "/>
                    <path d="M24.6,9.7C24.6,4.4,20,0,14.4,0S4.2,4.4,4.2,9.7v3.1H0v22.3h0l14.4,6.7l14.4-6.7h0V12.9h-4.2V9.7z M9.4,9.7 c0-2.5,2.2-4.5,5-4.5s5,2,5,4.5v3.1H9.4V9.7z M23,31.5l-8.6,4l-8.6-4V18.1H23V31.5z"/>
                    <path d="M79.4,20.3c0-4.5-3.1-7.4-7.7-7.4H61.2v22.3H67v-7.5h2.2l4.1,7.5H80l-4.9-8.3C77.2,26.1,79.4,24,79.4,20.3z M71,22.5h-4V18 h4c1.5,0,2.5,0.9,2.5,2.2C73.5,21.6,72.5,22.5,71,22.5z"/>
                    <polygon points="40.5,12.8 58.6,12.8 58.6,18.1 52.4,18.1 52.4,35.2 46.6,35.2 46.6,18.1 40.5,18.1 "/>
                </svg>
                <div class="trezorconnect-close">
                    <svg x="0px" y="0px" viewBox="24 24 60 60" width="24px" height="24px" preserveAspectRatio="xMinYMin meet">
                        <polygon class="st0" points="40,67.9 42.1,70 55,57.1 67.9,70 70,67.9 57.1,55 70,42.1 67.9,40 55,52.9 42.1,40 40,42.1 52.9,55 "/>
                    </svg>
                </div>
            </div>
            <div class="trezorconnect-body">
                <h3>Popup was blocked</h3>
                <p>Please click to “Continue” to open popup manually</p>
                <button class="trezorconnect-open">Continue</button>
            </div>
        </div>
    </div>
`,
        t = function (o, n) {
            if (!document.getElementById(e)) {
                var s = document.createElement('div')
                ;(s.id = e),
                    (s.className = 'trezorconnect-container'),
                    (s.innerHTML = r),
                    document.body && document.body.appendChild(s)
                var l = s.getElementsByClassName('trezorconnect-open')[0]
                l.onclick = function () {
                    o(), document.body && document.body.removeChild(s)
                }
                var a = s.getElementsByClassName('trezorconnect-close')[0]
                a.onclick = function () {
                    n(), document.body && document.body.removeChild(s)
                }
            }
        }
    return (lr.showPopupRequest = t), lr
}
var tr = {},
    tn
function vi() {
    if (tn) return tr
    ;(tn = 1), (tr.__esModule = !0), (tr.getOnionDomain = r), (tr.getOrigin = void 0)
    var e = function (i) {
        if (typeof i != 'string') return 'unknown'
        if (i.indexOf('file://') === 0) return 'file://'
        var o = i.match(/^.+\:\/\/[^\/]+/)
        return Array.isArray(o) && o.length > 0 ? o[0] : 'unknown'
    }
    tr.getOrigin = e
    function r(t, i) {
        if (Array.isArray(t))
            return t.map(function (d) {
                return r(d, i)
            })
        if (typeof t == 'string') {
            var o,
                n =
                    (o = t.match(/^(http|ws)s?:\/\/([^:/]+\.)?([^/.]+\.[^/.]+)(\/.*)?$/i)) != null
                        ? o
                        : [],
                s = n[1],
                l = n[2],
                a = n[3],
                p = n[4]
            return !a || !i[a] ? t : s + '://' + (l || '') + i[a] + (p || '')
        }
        return t
    }
    return tr
}
var ke = {},
    nn
function gi() {
    if (nn) return ke
    nn = 1
    var e = Me
    ;(ke.__esModule = !0),
        (ke.create = i),
        (ke.createAsync = o),
        (ke.resolveTimeoutPromise = n),
        (ke.rejectTimeoutPromise = void 0)
    var r = e(Dr()),
        t = e(Lr())
    function i(l, a) {
        var p = function (S) {},
            d = function (S) {},
            f,
            u = new Promise(
                (function () {
                    var E = (0, t.default)(
                        r.default.mark(function S(m, R) {
                            return r.default.wrap(
                                function (_) {
                                    for (;;)
                                        switch ((_.prev = _.next)) {
                                            case 0:
                                                if (((p = m), (d = R), typeof l != 'function')) {
                                                    _.next = 11
                                                    break
                                                }
                                                return (_.prev = 3), (_.next = 6), l()
                                            case 6:
                                                _.next = 11
                                                break
                                            case 8:
                                                ;(_.prev = 8), (_.t0 = _.catch(3)), R(_.t0)
                                            case 11:
                                                typeof l == 'string' && (f = l)
                                            case 12:
                                            case 'end':
                                                return _.stop()
                                        }
                                },
                                S,
                                null,
                                [[3, 8]]
                            )
                        })
                    )
                    return function (S, m) {
                        return E.apply(this, arguments)
                    }
                })()
            )
        return { id: f, device: a, resolve: p, reject: d, promise: u }
    }
    function o(l) {
        var a = function (E) {},
            p = function (E) {},
            d = new Promise(function (u, E) {
                ;(a = u), (p = E)
            }),
            f = (function () {
                var u = (0, t.default)(
                    r.default.mark(function E() {
                        return r.default.wrap(function (m) {
                            for (;;)
                                switch ((m.prev = m.next)) {
                                    case 0:
                                        return (m.next = 2), l()
                                    case 2:
                                    case 'end':
                                        return m.stop()
                                }
                        }, E)
                    })
                )
                return function () {
                    return u.apply(this, arguments)
                }
            })()
        return {
            resolve: a,
            reject: p,
            promise: d,
            run: function () {
                return f(), d
            },
        }
    }
    function n(l, a) {
        return new Promise(function (p) {
            setTimeout(function () {
                p(a)
            }, l)
        })
    }
    var s = function (a, p) {
        return new Promise(function (d, f) {
            setTimeout(function () {
                f(p)
            }, a)
        })
    }
    return (ke.rejectTimeoutPromise = s), ke
}
var on
function Ja() {
    return (
        on ||
            ((on = 1),
            (function (e) {
                var r = Me
                ;(e.__esModule = !0), (e.default = void 0)
                var t = r(Dr()),
                    i = r(Lr()),
                    o = r(za()),
                    n = r(pi()),
                    s = r(Er()),
                    l = r(at()),
                    a = m(Ei()),
                    p = m(hi()),
                    d = m(_i()),
                    f = Va(),
                    u = vi(),
                    E = gi()
                function S(c) {
                    if (typeof WeakMap != 'function') return null
                    var w = new WeakMap(),
                        P = new WeakMap()
                    return (S = function (D) {
                        return D ? P : w
                    })(c)
                }
                function m(c, w) {
                    if (!w && c && c.__esModule) return c
                    if (c === null || (typeof c != 'object' && typeof c != 'function'))
                        return { default: c }
                    var P = S(w)
                    if (P && P.has(c)) return P.get(c)
                    var b = {},
                        D = Object.defineProperty && Object.getOwnPropertyDescriptor
                    for (var W in c)
                        if (W !== 'default' && Object.prototype.hasOwnProperty.call(c, W)) {
                            var K = D ? Object.getOwnPropertyDescriptor(c, W) : null
                            K && (K.get || K.set) ? Object.defineProperty(b, W, K) : (b[W] = c[W])
                        }
                    return (b.default = c), P && P.set(c, b), b
                }
                var R = 850,
                    h = 500,
                    _ = 3e3,
                    y = (function (c) {
                        ;(0, n.default)(w, c)
                        function w(b) {
                            var D
                            return (
                                (D = c.call(this) || this),
                                (0, s.default)((0, o.default)(D), 'requestTimeout', 0),
                                (0, s.default)((0, o.default)(D), 'closeInterval', 0),
                                (0, s.default)((0, o.default)(D), 'extensionTabId', 0),
                                (D.settings = b),
                                (D.origin = (0, u.getOrigin)(b.popupSrc)),
                                (D.handleMessage = D.handleMessage.bind((0, o.default)(D))),
                                (D.iframeHandshake = (0, E.create)(p.LOADED)),
                                D.settings.env === 'webextension' &&
                                    ((D.handleExtensionConnect = D.handleExtensionConnect.bind(
                                        (0, o.default)(D)
                                    )),
                                    (D.handleExtensionMessage = D.handleExtensionMessage.bind(
                                        (0, o.default)(D)
                                    )),
                                    chrome.runtime.onConnect.addListener(D.handleExtensionConnect)),
                                window.addEventListener('message', D.handleMessage, !1),
                                D
                            )
                        }
                        var P = w.prototype
                        return (
                            (P.request = function (D) {
                                var W = this
                                if ((D === void 0 && (D = !1), this.locked)) {
                                    this._window &&
                                        (this.settings.env === 'webextension'
                                            ? chrome.tabs.update(this._window.id, { active: !0 })
                                            : this._window.focus())
                                    return
                                }
                                var K = this.open.bind(this)
                                if (((this.locked = !0), !this.settings.supportedBrowser)) K()
                                else {
                                    var j = D || this.settings.env === 'webextension' ? 1 : R
                                    this.requestTimeout = window.setTimeout(function () {
                                        ;(W.requestTimeout = 0), K(D)
                                    }, j)
                                }
                            }),
                            (P.cancel = function () {
                                this.close()
                            }),
                            (P.unlock = function () {
                                this.locked = !1
                            }),
                            (P.open = function (D) {
                                var W = this,
                                    K = this.settings.popupSrc
                                if (!this.settings.supportedBrowser) {
                                    this.openWrapper(K + '#unsupported')
                                    return
                                }
                                ;(this.popupPromise = (0, E.create)(a.LOADED)),
                                    this.openWrapper(D ? K + '#loading' : K),
                                    (this.closeInterval = window.setInterval(function () {
                                        W._window &&
                                            (W.settings.env === 'webextension'
                                                ? chrome.tabs.get(W._window.id, function (j) {
                                                      j || (W.close(), W.emit(a.CLOSED))
                                                  })
                                                : W._window.closed && (W.close(), W.emit(a.CLOSED)))
                                    }, h)),
                                    (this.openTimeout = window.setTimeout(function () {
                                        W.close(),
                                            (0, f.showPopupRequest)(W.open.bind(W), function () {
                                                W.emit(a.CLOSED)
                                            })
                                    }, _))
                            }),
                            (P.openWrapper = function (D) {
                                var W = this
                                this.settings.env === 'webextension'
                                    ? chrome.windows.getCurrent(null, function (K) {
                                          K.type !== 'normal'
                                              ? chrome.windows.create({ url: D }, function (j) {
                                                    chrome.tabs.query(
                                                        { windowId: j.id, active: !0 },
                                                        function (z) {
                                                            W._window = z[0]
                                                        }
                                                    )
                                                })
                                              : chrome.tabs.query(
                                                    { currentWindow: !0, active: !0 },
                                                    function (j) {
                                                        ;(W.extensionTabId = j[0].id),
                                                            chrome.tabs.create(
                                                                { url: D, index: j[0].index + 1 },
                                                                function (z) {
                                                                    W._window = z
                                                                }
                                                            )
                                                    }
                                                )
                                      })
                                    : this.settings.env === 'electron'
                                    ? (this._window = window.open(D, 'modal'))
                                    : ((this._window = window.open('', '_blank')),
                                      this._window && (this._window.location.href = D))
                            }),
                            (P.handleExtensionConnect = function (D) {
                                if (D.name === 'trezor-connect') {
                                    if (
                                        !this._window ||
                                        (this._window && this._window.id !== D.sender.tab.id)
                                    ) {
                                        D.disconnect()
                                        return
                                    }
                                    window.clearTimeout(this.openTimeout),
                                        (this.extensionPort = D),
                                        this.extensionPort.onMessage.addListener(
                                            this.handleExtensionMessage
                                        )
                                }
                            }),
                            (P.handleExtensionMessage = function (D) {
                                var W = this
                                if (this.extensionPort) {
                                    var K = this.extensionPort,
                                        j = D.data
                                    if (!(!j || typeof j != 'object'))
                                        if (j.type === a.ERROR) {
                                            var z =
                                                j.payload && typeof j.payload.error == 'string'
                                                    ? j.payload.error
                                                    : null
                                            this.emit(a.CLOSED, z ? 'Popup error: ' + z : null),
                                                this.close()
                                        } else
                                            j.type === a.LOADED
                                                ? (this.popupPromise && this.popupPromise.resolve(),
                                                  this.iframeHandshake.promise.then(function (H) {
                                                      K.postMessage({
                                                          type: a.INIT,
                                                          payload: {
                                                              settings: W.settings,
                                                              useBroadcastChannel: H,
                                                          },
                                                      })
                                                  }))
                                                : j.type === a.EXTENSION_USB_PERMISSIONS
                                                ? chrome.tabs.query(
                                                      { currentWindow: !0, active: !0 },
                                                      function (H) {
                                                          chrome.tabs.create(
                                                              {
                                                                  url: 'trezor-usb-permissions.html',
                                                                  index: H[0].index + 1,
                                                              },
                                                              function (he) {}
                                                          )
                                                      }
                                                  )
                                                : j.type === a.CLOSE_WINDOW &&
                                                  (this.emit(a.CLOSED), this.close())
                                }
                            }),
                            (P.handleMessage = function (D) {
                                var W = this,
                                    K = D.data
                                if (
                                    !(
                                        (0, u.getOrigin)(D.origin) !== this.origin ||
                                        !K ||
                                        typeof K != 'object'
                                    )
                                )
                                    if (K.type === p.LOADED) {
                                        var j =
                                            K.payload &&
                                            typeof K.payload.useBroadcastChannel == 'boolean'
                                                ? K.payload.useBroadcastChannel
                                                : !1
                                        this.iframeHandshake.resolve(j)
                                    } else if (K.type === a.BOOTSTRAP)
                                        window.clearTimeout(this.openTimeout)
                                    else if (K.type === a.ERROR && this._window) {
                                        var z =
                                            K.payload && typeof K.payload.error == 'string'
                                                ? K.payload.error
                                                : null
                                        this.emit(a.CLOSED, z ? 'Popup error: ' + z : null),
                                            this.close()
                                    } else
                                        K.type === a.LOADED
                                            ? (this.popupPromise && this.popupPromise.resolve(),
                                              this.iframeHandshake.promise.then(function (H) {
                                                  W._window.postMessage(
                                                      {
                                                          type: a.INIT,
                                                          payload: {
                                                              settings: W.settings,
                                                              useBroadcastChannel: H,
                                                          },
                                                      },
                                                      W.origin
                                                  )
                                              }))
                                            : (K.type === a.CANCEL_POPUP_REQUEST ||
                                                  K.type === d.CLOSE_UI_WINDOW) &&
                                              this.close()
                            }),
                            (P.close = function () {
                                ;(this.locked = !1),
                                    (this.popupPromise = void 0),
                                    this.requestTimeout &&
                                        (window.clearTimeout(this.requestTimeout),
                                        (this.requestTimeout = 0)),
                                    this.openTimeout &&
                                        (window.clearTimeout(this.openTimeout),
                                        (this.openTimeout = 0)),
                                    this.closeInterval &&
                                        (window.clearInterval(this.closeInterval),
                                        (this.closeInterval = 0)),
                                    this.extensionPort &&
                                        (this.extensionPort.disconnect(),
                                        (this.extensionPort = null)),
                                    this.extensionTabId &&
                                        (chrome.tabs.update(this.extensionTabId, { active: !0 }),
                                        (this.extensionTabId = 0)),
                                    this._window &&
                                        (this.settings.env === 'webextension'
                                            ? (chrome.runtime.lastError,
                                              chrome.tabs.remove(this._window.id, function () {
                                                  chrome.runtime.lastError
                                              }))
                                            : this._window.close(),
                                        (this._window = null))
                            }),
                            (P.postMessage = (function () {
                                var b = (0, i.default)(
                                    t.default.mark(function W(K) {
                                        var j = this
                                        return t.default.wrap(
                                            function (H) {
                                                for (;;)
                                                    switch ((H.prev = H.next)) {
                                                        case 0:
                                                            if (
                                                                !(
                                                                    !this._window &&
                                                                    K.type !==
                                                                        d.REQUEST_UI_WINDOW &&
                                                                    this.openTimeout
                                                                )
                                                            ) {
                                                                H.next = 4
                                                                break
                                                            }
                                                            return (
                                                                this.close(),
                                                                (0, f.showPopupRequest)(
                                                                    this.open.bind(this),
                                                                    function () {
                                                                        j.emit(a.CLOSED)
                                                                    }
                                                                ),
                                                                H.abrupt('return')
                                                            )
                                                        case 4:
                                                            if (!this.popupPromise) {
                                                                H.next = 7
                                                                break
                                                            }
                                                            return (
                                                                (H.next = 7),
                                                                this.popupPromise.promise
                                                            )
                                                        case 7:
                                                            this._window &&
                                                                this._window.postMessage(
                                                                    K,
                                                                    this.origin
                                                                )
                                                        case 8:
                                                        case 'end':
                                                            return H.stop()
                                                    }
                                            },
                                            W,
                                            this
                                        )
                                    })
                                )
                                function D(W) {
                                    return b.apply(this, arguments)
                                }
                                return D
                            })()),
                            w
                        )
                    })(l.default)
                e.default = y
            })(Hr)),
        Hr
    )
}
var $ = {},
    zr = {},
    an
function Ya() {
    return (
        an ||
            ((an = 1),
            (function (e) {
                ;(e.__esModule = !0), (e.default = void 0)
                var r =
                        '.trezorconnect-container{position:fixed!important;display:-webkit-box!important;display:-webkit-flex!important;display:-ms-flexbox!important;display:flex!important;-webkit-box-orient:vertical!important;-webkit-box-direction:normal!important;-webkit-flex-direction:column!important;-ms-flex-direction:column!important;flex-direction:column!important;-webkit-box-align:center!important;-webkit-align-items:center!important;-ms-flex-align:center!important;align-items:center!important;z-index:10000!important;width:100%!important;height:100%!important;top:0!important;left:0!important;background:rgba(0,0,0,.35)!important;overflow:auto!important;padding:20px!important;margin:0!important}.trezorconnect-container .trezorconnect-window{position:relative!important;display:block!important;width:370px!important;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif!important;margin:auto!important;border-radius:3px!important;background-color:#fff!important;text-align:center!important;overflow:hidden!important}.trezorconnect-container .trezorconnect-window .trezorconnect-head{text-align:left;padding:12px 24px!important;display:-webkit-box!important;display:-webkit-flex!important;display:-ms-flexbox!important;display:flex!important;-webkit-box-align:center!important;-webkit-align-items:center!important;-ms-flex-align:center!important;align-items:center!important}.trezorconnect-container .trezorconnect-window .trezorconnect-head .trezorconnect-logo{-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1}.trezorconnect-container .trezorconnect-window .trezorconnect-head .trezorconnect-close{cursor:pointer!important;height:24px!important}.trezorconnect-container .trezorconnect-window .trezorconnect-head .trezorconnect-close svg{fill:#757575;-webkit-transition:fill .3s ease-in-out!important;transition:fill .3s ease-in-out!important}.trezorconnect-container .trezorconnect-window .trezorconnect-head .trezorconnect-close:hover svg{fill:#494949}.trezorconnect-container .trezorconnect-window .trezorconnect-body{padding:24px 24px 32px!important;background:#FBFBFB!important;border-top:1px solid #EBEBEB}.trezorconnect-container .trezorconnect-window .trezorconnect-body h3{color:#505050!important;font-size:16px!important;font-weight:500!important}.trezorconnect-container .trezorconnect-window .trezorconnect-body p{margin:8px 0 24px!important;font-weight:400!important;color:#A9A9A9!important;font-size:12px!important}.trezorconnect-container .trezorconnect-window .trezorconnect-body button{width:100%!important;padding:12px 24px!important;margin:0!important;border-radius:3px!important;font-size:14px!important;font-weight:300!important;cursor:pointer!important;background:#01B757!important;color:#fff!important;border:0!important;-webkit-transition:background-color .3s ease-in-out!important;transition:background-color .3s ease-in-out!important}.trezorconnect-container .trezorconnect-window .trezorconnect-body button:hover{background-color:#00AB51!important}.trezorconnect-container .trezorconnect-window .trezorconnect-body button:active{background-color:#009546!important}/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImlucHV0IiwiJHN0ZGluIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQWNBLHlCQUNJLFNBQUEsZ0JBQ0EsUUFBQSxzQkFDQSxRQUFBLHVCQUNBLFFBQUEsc0JBRUEsUUFBQSxlQUNBLG1CQUFBLG1CQUNBLHNCQUFBLGlCQUNBLHVCQUFBLGlCQUNBLG1CQUFBLGlCQUNBLGVBQUEsaUJBRUEsa0JBQUEsaUJBQ0Esb0JBQUEsaUJBQ0EsZUFBQSxpQkNmTSxZQUFhLGlCREFyQixRQUFTLGdCQWtCSCxNQUFBLGVBQ0EsT0FBQSxlQUNBLElBQUEsWUFDQSxLQUFBLFlBQ0EsV0FBQSwwQkFDQSxTQUFBLGVBQ0EsUUFBQSxlQUNBLE9BQUEsWUNkUiwrQ0RYRSxTQUFVLG1CQTZCQSxRQUFBLGdCQUNBLE1BQUEsZ0JBQ0EsWUFBQSxjQUFBLG1CQUFBLFdBQUEsT0FBQSxpQkFBQSxNQUFBLHFCQUNBLE9BQUEsZUNmVixjQUFlLGNEakJmLGlCQWlCRSxlQWtCWSxXQUFBLGlCQ2ZkLFNBQVUsaUJEbUJJLG1FQUNBLFdBQUEsS0NoQmQsUUFBUyxLQUFLLGVEeEJkLFFBQVMsc0JBMENTLFFBQUEsdUJBQ0EsUUFBQSxzQkNmbEIsUUFBUyxlRGlCSyxrQkE1QlosaUJBOEJvQixvQkFBQSxpQkNoQmxCLGVBQWdCLGlCRC9CWixZQWlCTixpQkFzQ1EsdUZBQ0EsaUJBQUEsRUNwQlYsYUFBYyxFRHBDVixTQUFVLEVBMkRBLEtBQUEsRUFFQSx3RkNwQmQsT0FBUSxrQkR6Q1IsT0FBUSxlQWlFTSw0RkFDQSxLQUFBLFFBQ0EsbUJBQUEsS0FBQSxJQUFBLHNCQ3BCZCxXQUFZLEtBQUssSUFBSyxzQkR3QlIsa0dBQ0EsS0FBQSxRQUVBLG1FQUNBLFFBQUEsS0FBQSxLQUFBLGVBQ0EsV0FBQSxrQkFDQSxXQUFBLElBQUEsTUFBQSxRQUVBLHNFQUNBLE1BQUEsa0JBQ0EsVUFBQSxlQ3JCZCxZQUFhLGNEd0JLLHFFQ3JCbEIsT0FBUSxJQUFJLEVBQUksZUR3QkYsWUFBQSxjQUNJLE1BQUEsa0JDdEJsQixVQUFXLGVBRWIsMEVBQ0UsTUFBTyxlQUNQLFFBQVMsS0FBSyxlQUNkLE9BQVEsWUFDUixjQUFlLGNBQ2YsVUFBVyxlQUNYLFlBQWEsY0FDYixPQUFRLGtCQUNSLFdBQVksa0JBQ1osTUFBTyxlQUNQLE9BQVEsWUFDUixtQkFBb0IsaUJBQWlCLElBQUssc0JBQzFDLFdBQVksaUJBQWlCLElBQUssc0JBRXBDLGdGQUNFLGlCQUFrQixrQkFFcEIsaUZBQ0UsaUJBQWtCIn0= */',
                    t = r
                e.default = t
            })(zr)),
        zr
    )
}
var sn
function Xa() {
    if (sn) return $
    sn = 1
    var e = Me
    ;($.__esModule = !0),
        ($.clearTimeout =
            $.dispose =
            $.postMessage =
            $.init =
            $.messagePromises =
            $.error =
            $.timeout =
            $.initPromise =
            $.origin =
            $.instance =
                void 0)
    var r = e(Dr()),
        t = e(Lr()),
        i = gi(),
        o = Ge(),
        n = vi(),
        s = e(Ya()),
        l
    $.instance = l
    var a
    $.origin = a
    var p = (0, i.create)()
    $.initPromise = p
    var d = 0
    $.timeout = d
    var f
    $.error = f
    var u = 0,
        E = {}
    $.messagePromises = E
    var S = (function () {
        var c = (0, t.default)(
            r.default.mark(function w(P) {
                var b, D, W, K, j
                return r.default.wrap(
                    function (H) {
                        for (;;)
                            switch ((H.prev = H.next)) {
                                case 0:
                                    return (
                                        ($.initPromise = p = (0, i.create)()),
                                        (b = document.getElementById('trezorconnect')),
                                        b
                                            ? ($.instance = l = b)
                                            : (($.instance = l = document.createElement('iframe')),
                                              (l.frameBorder = '0'),
                                              (l.width = '0px'),
                                              (l.height = '0px'),
                                              (l.style.position = 'absolute'),
                                              (l.style.display = 'none'),
                                              (l.style.border = '0px'),
                                              (l.style.width = '0px'),
                                              (l.style.height = '0px'),
                                              (l.id = 'trezorconnect')),
                                        P.env === 'web'
                                            ? ((W = P.manifest
                                                  ? JSON.stringify(P.manifest)
                                                  : 'undefined'),
                                              (K =
                                                  'version=' +
                                                  P.version +
                                                  '&manifest=' +
                                                  encodeURIComponent(btoa(JSON.stringify(W)))),
                                              (D = P.iframeSrc + '?' + K))
                                            : (D = P.iframeSrc),
                                        l.setAttribute('src', D),
                                        P.webusb && l.setAttribute('allow', 'usb'),
                                        ($.origin = a = (0, n.getOrigin)(l.src)),
                                        ($.timeout = d =
                                            window.setTimeout(function () {
                                                p.reject(o.ERRORS.TypedError('Init_IframeTimeout'))
                                            }, 1e4)),
                                        (j = function () {
                                            if (!l) {
                                                p.reject(o.ERRORS.TypedError('Init_IframeBlocked'))
                                                return
                                            }
                                            try {
                                                var k = l.contentWindow.location.origin
                                                if (!k || k === 'null') {
                                                    R()
                                                    return
                                                }
                                            } catch {}
                                            var I
                                            typeof chrome < 'u' &&
                                                chrome.runtime &&
                                                typeof chrome.runtime.onConnect < 'u' &&
                                                (chrome.runtime.onConnect.addListener(
                                                    function () {}
                                                ),
                                                (I = chrome.runtime.id)),
                                                l.contentWindow.postMessage(
                                                    {
                                                        type: o.IFRAME.INIT,
                                                        payload: { settings: P, extension: I },
                                                    },
                                                    a
                                                ),
                                                (l.onload = void 0)
                                        }),
                                        l.attachEvent ? l.attachEvent('onload', j) : (l.onload = j),
                                        document.body && (document.body.appendChild(l), m()),
                                        (H.prev = 11),
                                        (H.next = 14),
                                        p.promise
                                    )
                                case 14:
                                    H.next = 20
                                    break
                                case 16:
                                    throw (
                                        ((H.prev = 16),
                                        (H.t0 = H.catch(11)),
                                        l &&
                                            (l.parentNode && l.parentNode.removeChild(l),
                                            ($.instance = l = null)),
                                        H.t0)
                                    )
                                case 20:
                                    return (
                                        (H.prev = 20),
                                        window.clearTimeout(d),
                                        ($.timeout = d = 0),
                                        H.finish(20)
                                    )
                                case 24:
                                case 'end':
                                    return H.stop()
                            }
                    },
                    w,
                    null,
                    [[11, 16, 20, 24]]
                )
            })
        )
        return function (P) {
            return c.apply(this, arguments)
        }
    })()
    $.init = S
    var m = function () {
            if (!l) throw o.ERRORS.TypedError('Init_IframeBlocked')
            var w = l.ownerDocument,
                P = w.head || w.getElementsByTagName('head')[0],
                b = document.createElement('style')
            b.setAttribute('type', 'text/css'),
                b.setAttribute('id', 'TrezorConnectStylesheet'),
                b.styleSheet
                    ? ((b.styleSheet.cssText = s.default), P.appendChild(b))
                    : (b.appendChild(document.createTextNode(s.default)), P.append(b))
        },
        R = function () {
            window.clearTimeout(d),
                ($.error = f = o.ERRORS.TypedError('Init_IframeBlocked')),
                _(),
                p.reject(f)
        },
        h = function (w, P) {
            if ((P === void 0 && (P = !0), !l)) throw o.ERRORS.TypedError('Init_IframeBlocked')
            if (P) {
                u++, (w.id = u), (E[u] = (0, i.create)())
                var b = E[u].promise
                return l.contentWindow.postMessage(w, a), b
            }
            return l.contentWindow.postMessage(w, a), null
        }
    $.postMessage = h
    var _ = function () {
        if (l && l.parentNode)
            try {
                l.parentNode.removeChild(l)
            } catch {}
        ;($.instance = l = null), ($.timeout = d = 0)
    }
    $.dispose = _
    var y = function () {
        window.clearTimeout(d)
    }
    return ($.clearTimeout = y), $
}
var Vr = {},
    un
function $a() {
    return (
        un ||
            ((un = 1),
            (function (e) {
                ;(e.__esModule = !0), (e.default = void 0)
                var r = function (o, n) {
                        var s = o || '.trezor-webusb-button',
                            l = document.querySelectorAll(s),
                            a = n + '?' + Date.now()
                        l.forEach(function (p) {
                            if (p.getElementsByTagName('iframe').length < 1) {
                                var d = p.getBoundingClientRect(),
                                    f = document.createElement('iframe')
                                ;(f.frameBorder = '0'),
                                    (f.width = Math.round(d.width) + 'px'),
                                    (f.height = Math.round(d.height) + 'px'),
                                    (f.style.position = 'absolute'),
                                    (f.style.top = '0px'),
                                    (f.style.left = '0px'),
                                    (f.style.zIndex = '1'),
                                    f.setAttribute('allow', 'usb'),
                                    f.setAttribute('scrolling', 'no'),
                                    (f.src = a),
                                    p.append(f)
                            }
                        })
                    },
                    t = r
                e.default = t
            })(Vr)),
        Vr
    )
}
var Je = {},
    cn
function Za() {
    if (cn) return Je
    ;(cn = 1), (Je.__esModule = !0), (Je.errorMessage = Je.parseMessage = void 0)
    var e = function (i) {
        var o = { event: i.event, type: i.type, payload: i.payload }
        return (
            typeof i.id == 'number' && (o.id = i.id),
            typeof i.success == 'boolean' && (o.success = i.success),
            o
        )
    }
    Je.parseMessage = e
    var r = function (i) {
        return { success: !1, payload: { error: i.message, code: i.code } }
    }
    return (Je.errorMessage = r), Je
}
var Te = {},
    ln
function es() {
    if (ln) return Te
    ln = 1
    var e = Me
    ;(Te.__esModule = !0),
        (Te.BlockchainMessage =
            Te.ResponseMessage =
            Te.TransportMessage =
            Te.DeviceMessage =
            Te.UiMessage =
                void 0)
    var r = e(Er()),
        t = Ge()
    function i(d, f) {
        var u = Object.keys(d)
        if (Object.getOwnPropertySymbols) {
            var E = Object.getOwnPropertySymbols(d)
            f &&
                (E = E.filter(function (S) {
                    return Object.getOwnPropertyDescriptor(d, S).enumerable
                })),
                u.push.apply(u, E)
        }
        return u
    }
    function o(d) {
        for (var f = 1; f < arguments.length; f++) {
            var u = arguments[f] != null ? arguments[f] : {}
            f % 2
                ? i(Object(u), !0).forEach(function (E) {
                      ;(0, r.default)(d, E, u[E])
                  })
                : Object.getOwnPropertyDescriptors
                ? Object.defineProperties(d, Object.getOwnPropertyDescriptors(u))
                : i(Object(u)).forEach(function (E) {
                      Object.defineProperty(d, E, Object.getOwnPropertyDescriptor(u, E))
                  })
        }
        return d
    }
    var n = function (f, u) {
        return { event: t.UI_EVENT, type: f, payload: u }
    }
    Te.UiMessage = n
    var s = function (f, u) {
        return { event: t.DEVICE_EVENT, type: f, payload: u }
    }
    Te.DeviceMessage = s
    var l = function (f, u) {
        return {
            event: t.TRANSPORT_EVENT,
            type: f,
            payload: u.error ? o(o({}, u), {}, { error: u.error.message, code: u.error.code }) : u,
        }
    }
    Te.TransportMessage = l
    var a = function (f, u, E) {
        return (
            E === void 0 && (E = null),
            {
                event: t.RESPONSE_EVENT,
                type: t.RESPONSE_EVENT,
                id: f,
                success: u,
                payload: u ? E : { error: E.error.message, code: E.error.code },
            }
        )
    }
    Te.ResponseMessage = a
    var p = function (f, u) {
        return { event: t.BLOCKCHAIN_EVENT, type: f, payload: u }
    }
    return (Te.BlockchainMessage = p), Te
}
var Ae = {},
    fn
function rs() {
    if (fn) return Ae
    fn = 1
    var e = Me
    ;(Ae.__esModule = !0), (Ae.parse = Ae.corsValidator = Ae.getEnv = Ae.DEFAULT_PRIORITY = void 0)
    var r = e(Er())
    function t(S, m) {
        var R = Object.keys(S)
        if (Object.getOwnPropertySymbols) {
            var h = Object.getOwnPropertySymbols(S)
            m &&
                (h = h.filter(function (_) {
                    return Object.getOwnPropertyDescriptor(S, _).enumerable
                })),
                R.push.apply(R, h)
        }
        return R
    }
    function i(S) {
        for (var m = 1; m < arguments.length; m++) {
            var R = arguments[m] != null ? arguments[m] : {}
            m % 2
                ? t(Object(R), !0).forEach(function (h) {
                      ;(0, r.default)(S, h, R[h])
                  })
                : Object.getOwnPropertyDescriptors
                ? Object.defineProperties(S, Object.getOwnPropertyDescriptors(R))
                : t(Object(R)).forEach(function (h) {
                      Object.defineProperty(S, h, Object.getOwnPropertyDescriptor(R, h))
                  })
        }
        return S
    }
    var o = '8.2.12',
        n = o.split('.').map(function (S) {
            return parseInt(S, 10)
        }),
        s = n[0] + '/',
        l = 'https://connect.trezor.io/' + s,
        a = 2
    Ae.DEFAULT_PRIORITY = a
    var p = {
            configSrc: './data/config.json',
            version: o,
            debug: !1,
            priority: a,
            trustedHost: !1,
            connectSrc: l,
            iframeSrc: l + 'iframe.html',
            popup: !0,
            popupSrc: l + 'popup.html',
            webusbSrc: l + 'webusb.html',
            transportReconnect: !1,
            webusb: !0,
            pendingTransportEvent: !0,
            supportedBrowser:
                typeof navigator < 'u' ? !/Trident|MSIE|Edge/.test(navigator.userAgent) : !0,
            manifest: null,
            env: 'web',
            lazyLoad: !1,
            timestamp: new Date().getTime(),
            interactionTimeout: 600,
        },
        d = function (m) {
            if (m && typeof m.email == 'string' && typeof m.appUrl == 'string')
                return { email: m.email, appUrl: m.appUrl }
        },
        f = function () {
            if (typeof chrome < 'u' && chrome.runtime && typeof chrome.runtime.onConnect < 'u')
                return 'webextension'
            if (typeof navigator < 'u') {
                if (
                    typeof navigator.product == 'string' &&
                    navigator.product.toLowerCase() === 'reactnative'
                )
                    return 'react-native'
                var m = navigator.userAgent.toLowerCase()
                if (m.indexOf(' electron/') > -1) return 'electron'
            }
            return 'web'
        }
    Ae.getEnv = f
    var u = function (m) {
        if (
            typeof m == 'string' &&
            (m.match(/^https:\/\/([A-Za-z0-9\-_]+\.)*trezor\.io\//) ||
                m.match(/^https?:\/\/localhost:[58][0-9]{3}\//) ||
                m.match(/^https:\/\/([A-Za-z0-9\-_]+\.)*sldev\.cz\//) ||
                m.match(
                    /^https?:\/\/([A-Za-z0-9\-_]+\.)*trezoriovpjcahpzkrewelclulmszwbqpzmzgub37gbcjlvluxtruqad\.onion\//
                ))
        )
            return m
    }
    Ae.corsValidator = u
    var E = function (m) {
        m === void 0 && (m = {})
        var R = i({}, p)
        if (
            (Object.prototype.hasOwnProperty.call(m, 'debug') &&
                (typeof m.debug == 'boolean'
                    ? (R.debug = m.debug)
                    : typeof m.debug == 'string' && (R.debug = m.debug === 'true')),
            typeof m.connectSrc == 'string' && (R.connectSrc = m.connectSrc),
            typeof Xe < 'u' &&
                typeof Xe.__TREZOR_CONNECT_SRC == 'string' &&
                ((R.connectSrc = u(Xe.__TREZOR_CONNECT_SRC)), (R.debug = !0)),
            typeof window < 'u' && window.location && typeof window.location.search == 'string')
        ) {
            var h = window.location.search.split('&'),
                _ = h.find(function (P) {
                    return P.indexOf('trezor-connect-src') >= 0
                })
            if (_) {
                var y = _.split('='),
                    c = y[1]
                ;(R.connectSrc = u(decodeURIComponent(c))), (R.debug = !0)
            }
        }
        var w = R.connectSrc || l
        return (
            (R.iframeSrc = w + 'iframe.html'),
            (R.popupSrc = w + 'popup.html'),
            (R.webusbSrc = w + 'webusb.html'),
            typeof m.transportReconnect == 'boolean' &&
                (R.transportReconnect = m.transportReconnect),
            typeof m.webusb == 'boolean' && (R.webusb = m.webusb),
            typeof m.popup == 'boolean' && (R.popup = m.popup),
            typeof m.lazyLoad == 'boolean' && (R.lazyLoad = m.lazyLoad),
            typeof m.pendingTransportEvent == 'boolean' &&
                (R.pendingTransportEvent = m.pendingTransportEvent),
            typeof window < 'u' &&
                window.location &&
                window.location.protocol === 'file:' &&
                ((R.origin = 'file://' + window.location.pathname), (R.webusb = !1)),
            typeof m.extension == 'string' && (R.extension = m.extension),
            typeof m.env == 'string' ? (R.env = m.env) : (R.env = f()),
            typeof m.timestamp == 'number' && (R.timestamp = m.timestamp),
            typeof m.interactionTimeout == 'number' &&
                (R.interactionTimeout = m.interactionTimeout),
            typeof m.manifest == 'object' && (R.manifest = d(m.manifest)),
            R
        )
    }
    return (Ae.parse = E), Ae
}
var Ce = {},
    dn
function ts() {
    if (dn) return Ce
    ;(dn = 1),
        (Ce.__esModule = !0),
        (Ce.getLog = Ce.enableLogByPrefix = Ce.enableLog = Ce.initLog = void 0)
    var e = {
            DescriptorStream: 'color: #77ab59',
            DeviceList: 'color: #36802d',
            Device: 'color: #bada55',
            Core: 'color: #c9df8a',
            IFrame: 'color: #FFFFFF; background: #f4a742;',
            Popup: 'color: #f48a00',
        },
        r = 100,
        t = (function () {
            function a(d, f) {
                ;(this.prefix = d),
                    (this.enabled = f),
                    (this.messages = []),
                    (this.css = e[d] || 'color: #000000; background: #FFFFFF;')
            }
            var p = a.prototype
            return (
                (p.addMessage = function (f, u) {
                    for (
                        var E = arguments.length, S = new Array(E > 2 ? E - 2 : 0), m = 2;
                        m < E;
                        m++
                    )
                        S[m - 2] = arguments[m]
                    this.messages.push({
                        level: f,
                        prefix: u,
                        message: S,
                        timestamp: new Date().getTime(),
                    }),
                        this.messages.length > r && this.messages.shift()
                }),
                (p.log = function () {
                    for (var f = arguments.length, u = new Array(f), E = 0; E < f; E++)
                        u[E] = arguments[E]
                    if (
                        (this.addMessage.apply(this, ['log', this.prefix].concat(u)), this.enabled)
                    ) {
                        var S
                        ;(S = console).log.apply(S, [this.prefix].concat(u))
                    }
                }),
                (p.error = function () {
                    for (var f = arguments.length, u = new Array(f), E = 0; E < f; E++)
                        u[E] = arguments[E]
                    if (
                        (this.addMessage.apply(this, ['error', this.prefix].concat(u)),
                        this.enabled)
                    ) {
                        var S
                        ;(S = console).error.apply(S, [this.prefix].concat(u))
                    }
                }),
                (p.warn = function () {
                    for (var f = arguments.length, u = new Array(f), E = 0; E < f; E++)
                        u[E] = arguments[E]
                    if (
                        (this.addMessage.apply(this, ['warn', this.prefix].concat(u)), this.enabled)
                    ) {
                        var S
                        ;(S = console).warn.apply(S, [this.prefix].concat(u))
                    }
                }),
                (p.debug = function () {
                    for (var f = arguments.length, u = new Array(f), E = 0; E < f; E++)
                        u[E] = arguments[E]
                    if (
                        (this.addMessage.apply(this, ['debug', this.prefix].concat(u)),
                        this.enabled)
                    ) {
                        var S
                        ;(S = console).log.apply(S, ['%c' + this.prefix, this.css].concat(u))
                    }
                }),
                a
            )
        })(),
        i = {},
        o = function (p, d) {
            var f = new t(p, !!d)
            return (i[p] = f), f
        }
    Ce.initLog = o
    var n = function (p) {
        Object.keys(i).forEach(function (d) {
            i[d].enabled = p
        })
    }
    Ce.enableLog = n
    var s = function (p, d) {
        i[p] && (i[p].enabled = d)
    }
    Ce.enableLogByPrefix = s
    var l = function () {
        var p = []
        return (
            Object.keys(i).forEach(function (d) {
                p = p.concat(i[d].messages)
            }),
            p.sort(function (d, f) {
                return d.timestamp - f.timestamp
            }),
            p
        )
    }
    return (Ce.getLog = l), Ce
}
var Jr = {},
    pn = {},
    hn = {},
    En
function mi() {
    return En || (En = 1), hn
}
var _n = {},
    vn
function yi() {
    return vn || ((vn = 1), Ge()), _n
}
var gn = {},
    mn
function Si() {
    return mn || (mn = 1), gn
}
var F = {},
    yn
function Ti() {
    if (yn) return F
    ;(yn = 1),
        (F.__esModule = !0),
        (F.Enum_TezosBallotType =
            F.Enum_TezosContractType =
            F.Enum_StellarSignerType =
            F.Enum_StellarMemoType =
            F.Enum_StellarAssetType =
            F.Enum_NEMImportanceTransferMode =
            F.Enum_NEMModificationType =
            F.Enum_NEMSupplyChangeType =
            F.Enum_NEMMosaicLevy =
            F.Enum_WordRequestType =
            F.Enum_RecoveryDeviceType =
            F.Enum_SdProtectOperationType =
            F.Enum_Capability =
            F.Enum_SafetyCheckLevel =
            F.Enum_BackupType =
            F.Enum_EthereumDataType =
            F.Enum_DebugButton =
            F.Enum_PinMatrixRequestType =
            F.Enum_ButtonRequestType =
            F.Enum_FailureType =
            F.Enum_CardanoTxWitnessType =
            F.Enum_CardanoTxSigningMode =
            F.Enum_CardanoTxAuxiliaryDataSupplementType =
            F.Enum_CardanoPoolRelayType =
            F.Enum_CardanoCertificateType =
            F.Enum_CardanoNativeScriptHashDisplayFormat =
            F.Enum_CardanoNativeScriptType =
            F.Enum_CardanoAddressType =
            F.Enum_CardanoDerivationType =
            F.Enum_RequestType =
            F.Enum_AmountUnit =
            F.Enum_DecredStakingSpendType =
            F.Enum_OutputScriptType =
            F.Enum_InputScriptType =
            F.Enum_BinanceTimeInForce =
            F.Enum_BinanceOrderSide =
            F.Enum_BinanceOrderType =
                void 0)
    var e = Object.freeze({ OT_UNKNOWN: 0, MARKET: 1, LIMIT: 2, OT_RESERVED: 3 })
    F.Enum_BinanceOrderType = e
    var r = Object.freeze({ SIDE_UNKNOWN: 0, BUY: 1, SELL: 2 })
    F.Enum_BinanceOrderSide = r
    var t = Object.freeze({ TIF_UNKNOWN: 0, GTE: 1, TIF_RESERVED: 2, IOC: 3 })
    F.Enum_BinanceTimeInForce = t
    var i = Object.freeze({
        SPENDADDRESS: 0,
        SPENDMULTISIG: 1,
        EXTERNAL: 2,
        SPENDWITNESS: 3,
        SPENDP2SHWITNESS: 4,
        SPENDTAPROOT: 5,
    })
    F.Enum_InputScriptType = i
    var o = Object.freeze({
        PAYTOADDRESS: 0,
        PAYTOSCRIPTHASH: 1,
        PAYTOMULTISIG: 2,
        PAYTOOPRETURN: 3,
        PAYTOWITNESS: 4,
        PAYTOP2SHWITNESS: 5,
        PAYTOTAPROOT: 6,
    })
    F.Enum_OutputScriptType = o
    var n = Object.freeze({ SSGen: 0, SSRTX: 1 })
    F.Enum_DecredStakingSpendType = n
    var s = Object.freeze({ BITCOIN: 0, MILLIBITCOIN: 1, MICROBITCOIN: 2, SATOSHI: 3 })
    F.Enum_AmountUnit = s
    var l = Object.freeze({
        TXINPUT: 0,
        TXOUTPUT: 1,
        TXMETA: 2,
        TXFINISHED: 3,
        TXEXTRADATA: 4,
        TXORIGINPUT: 5,
        TXORIGOUTPUT: 6,
        TXPAYMENTREQ: 7,
    })
    F.Enum_RequestType = l
    var a = Object.freeze({ LEDGER: 0, ICARUS: 1, ICARUS_TREZOR: 2 })
    F.Enum_CardanoDerivationType = a
    var p = Object.freeze({
        BASE: 0,
        BASE_SCRIPT_KEY: 1,
        BASE_KEY_SCRIPT: 2,
        BASE_SCRIPT_SCRIPT: 3,
        POINTER: 4,
        POINTER_SCRIPT: 5,
        ENTERPRISE: 6,
        ENTERPRISE_SCRIPT: 7,
        BYRON: 8,
        REWARD: 14,
        REWARD_SCRIPT: 15,
    })
    F.Enum_CardanoAddressType = p
    var d = Object.freeze({
        PUB_KEY: 0,
        ALL: 1,
        ANY: 2,
        N_OF_K: 3,
        INVALID_BEFORE: 4,
        INVALID_HEREAFTER: 5,
    })
    F.Enum_CardanoNativeScriptType = d
    var f = Object.freeze({ HIDE: 0, BECH32: 1, POLICY_ID: 2 })
    F.Enum_CardanoNativeScriptHashDisplayFormat = f
    var u = Object.freeze({
        STAKE_REGISTRATION: 0,
        STAKE_DEREGISTRATION: 1,
        STAKE_DELEGATION: 2,
        STAKE_POOL_REGISTRATION: 3,
    })
    F.Enum_CardanoCertificateType = u
    var E = Object.freeze({ SINGLE_HOST_IP: 0, SINGLE_HOST_NAME: 1, MULTIPLE_HOST_NAME: 2 })
    F.Enum_CardanoPoolRelayType = E
    var S = Object.freeze({ NONE: 0, CATALYST_REGISTRATION_SIGNATURE: 1 })
    F.Enum_CardanoTxAuxiliaryDataSupplementType = S
    var m = Object.freeze({
        ORDINARY_TRANSACTION: 0,
        POOL_REGISTRATION_AS_OWNER: 1,
        MULTISIG_TRANSACTION: 2,
        PLUTUS_TRANSACTION: 3,
    })
    F.Enum_CardanoTxSigningMode = m
    var R = Object.freeze({ BYRON_WITNESS: 0, SHELLEY_WITNESS: 1 })
    F.Enum_CardanoTxWitnessType = R
    var h = Object.freeze({
        Failure_UnexpectedMessage: 1,
        Failure_ButtonExpected: 2,
        Failure_DataError: 3,
        Failure_ActionCancelled: 4,
        Failure_PinExpected: 5,
        Failure_PinCancelled: 6,
        Failure_PinInvalid: 7,
        Failure_InvalidSignature: 8,
        Failure_ProcessError: 9,
        Failure_NotEnoughFunds: 10,
        Failure_NotInitialized: 11,
        Failure_PinMismatch: 12,
        Failure_WipeCodeMismatch: 13,
        Failure_InvalidSession: 14,
        Failure_FirmwareError: 99,
    })
    F.Enum_FailureType = h
    var _ = Object.freeze({
        ButtonRequest_Other: 1,
        ButtonRequest_FeeOverThreshold: 2,
        ButtonRequest_ConfirmOutput: 3,
        ButtonRequest_ResetDevice: 4,
        ButtonRequest_ConfirmWord: 5,
        ButtonRequest_WipeDevice: 6,
        ButtonRequest_ProtectCall: 7,
        ButtonRequest_SignTx: 8,
        ButtonRequest_FirmwareCheck: 9,
        ButtonRequest_Address: 10,
        ButtonRequest_PublicKey: 11,
        ButtonRequest_MnemonicWordCount: 12,
        ButtonRequest_MnemonicInput: 13,
        _Deprecated_ButtonRequest_PassphraseType: 14,
        ButtonRequest_UnknownDerivationPath: 15,
        ButtonRequest_RecoveryHomepage: 16,
        ButtonRequest_Success: 17,
        ButtonRequest_Warning: 18,
        ButtonRequest_PassphraseEntry: 19,
        ButtonRequest_PinEntry: 20,
    })
    F.Enum_ButtonRequestType = _
    var y = Object.freeze({
        PinMatrixRequestType_Current: 1,
        PinMatrixRequestType_NewFirst: 2,
        PinMatrixRequestType_NewSecond: 3,
        PinMatrixRequestType_WipeCodeFirst: 4,
        PinMatrixRequestType_WipeCodeSecond: 5,
    })
    F.Enum_PinMatrixRequestType = y
    var c = Object.freeze({ NO: 0, YES: 1, INFO: 2 })
    F.Enum_DebugButton = c
    var w = Object.freeze({
        UINT: 1,
        INT: 2,
        BYTES: 3,
        STRING: 4,
        BOOL: 5,
        ADDRESS: 6,
        ARRAY: 7,
        STRUCT: 8,
    })
    F.Enum_EthereumDataType = w
    var P = Object.freeze({ Bip39: 0, Slip39_Basic: 1, Slip39_Advanced: 2 })
    F.Enum_BackupType = P
    var b = Object.freeze({ Strict: 0, PromptAlways: 1, PromptTemporarily: 2 })
    F.Enum_SafetyCheckLevel = b
    var D = Object.freeze({
        Capability_Bitcoin: 1,
        Capability_Bitcoin_like: 2,
        Capability_Binance: 3,
        Capability_Cardano: 4,
        Capability_Crypto: 5,
        Capability_EOS: 6,
        Capability_Ethereum: 7,
        Capability_Lisk: 8,
        Capability_Monero: 9,
        Capability_NEM: 10,
        Capability_Ripple: 11,
        Capability_Stellar: 12,
        Capability_Tezos: 13,
        Capability_U2F: 14,
        Capability_Shamir: 15,
        Capability_ShamirGroups: 16,
        Capability_PassphraseEntry: 17,
    })
    F.Enum_Capability = D
    var W = Object.freeze({ DISABLE: 0, ENABLE: 1, REFRESH: 2 })
    F.Enum_SdProtectOperationType = W
    var K = Object.freeze({ RecoveryDeviceType_ScrambledWords: 0, RecoveryDeviceType_Matrix: 1 })
    F.Enum_RecoveryDeviceType = K
    var j = Object.freeze({
        WordRequestType_Plain: 0,
        WordRequestType_Matrix9: 1,
        WordRequestType_Matrix6: 2,
    })
    F.Enum_WordRequestType = j
    var z = Object.freeze({ MosaicLevy_Absolute: 1, MosaicLevy_Percentile: 2 })
    F.Enum_NEMMosaicLevy = z
    var H = Object.freeze({ SupplyChange_Increase: 1, SupplyChange_Decrease: 2 })
    F.Enum_NEMSupplyChangeType = H
    var he = Object.freeze({ CosignatoryModification_Add: 1, CosignatoryModification_Delete: 2 })
    F.Enum_NEMModificationType = he
    var k = Object.freeze({ ImportanceTransfer_Activate: 1, ImportanceTransfer_Deactivate: 2 })
    F.Enum_NEMImportanceTransferMode = k
    var I = Object.freeze({ NATIVE: 0, ALPHANUM4: 1, ALPHANUM12: 2 })
    F.Enum_StellarAssetType = I
    var L = Object.freeze({ NONE: 0, TEXT: 1, ID: 2, HASH: 3, RETURN: 4 })
    F.Enum_StellarMemoType = L
    var Q = Object.freeze({ ACCOUNT: 0, PRE_AUTH: 1, HASH: 2 })
    F.Enum_StellarSignerType = Q
    var U = Object.freeze({ Implicit: 0, Originated: 1 })
    F.Enum_TezosContractType = U
    var x = Object.freeze({ Yay: 0, Nay: 1, Pass: 2 })
    return (F.Enum_TezosBallotType = x), F
}
var Sn = {},
    Tn
function wi() {
    return Tn || (Tn = 1), Sn
}
var wn = {},
    Rn
function Ri() {
    return Rn || (Rn = 1), wn
}
var On = {},
    bn
function Oi() {
    return bn || (bn = 1), On
}
var fe = {},
    In
function bi() {
    if (In) return fe
    ;(In = 1),
        (fe.__esModule = !0),
        (fe.CardanoTxWitnessType =
            fe.CardanoTxSigningMode =
            fe.CardanoPoolRelayType =
            fe.CardanoNativeScriptHashDisplayFormat =
            fe.CardanoNativeScriptType =
            fe.CardanoCertificateType =
            fe.CardanoAddressType =
                void 0)
    var e = Ti()
    return (
        (fe.CardanoAddressType = e.Enum_CardanoAddressType),
        (fe.CardanoCertificateType = e.Enum_CardanoCertificateType),
        (fe.CardanoNativeScriptType = e.Enum_CardanoNativeScriptType),
        (fe.CardanoNativeScriptHashDisplayFormat = e.Enum_CardanoNativeScriptHashDisplayFormat),
        (fe.CardanoPoolRelayType = e.Enum_CardanoPoolRelayType),
        (fe.CardanoTxSigningMode = e.Enum_CardanoTxSigningMode),
        (fe.CardanoTxWitnessType = e.Enum_CardanoTxWitnessType),
        fe
    )
}
var Nn = {},
    An
function Ii() {
    return An || (An = 1), Nn
}
var Cn = {},
    Pn
function Ni() {
    return Pn || (Pn = 1), Cn
}
var xn = {},
    Un
function Ai() {
    return Un || (Un = 1), xn
}
var Mn = {},
    Dn
function Ci() {
    return Dn || (Dn = 1), Mn
}
var Ln = {},
    kn
function Pi() {
    return kn || (kn = 1), Ln
}
var Bn = {},
    Fn
function xi() {
    return Fn || (Fn = 1), Bn
}
var qn = {},
    Kn
function Ui() {
    return Kn || (Kn = 1), qn
}
var Gn = {},
    Wn
function Mi() {
    return Wn || (Wn = 1), Gn
}
var Qn = {},
    jn
function Di() {
    return jn || ((jn = 1), Ge()), Qn
}
var Hn = {},
    zn
function Li() {
    return zn || ((zn = 1), Ge()), Hn
}
var Vn
function ns() {
    if (Vn) return pn
    ;(Vn = 1),
        r(Ge()),
        r(mi()),
        r(yi()),
        r(Si()),
        r(Ti()),
        r(wi()),
        r(Ri()),
        r(Oi()),
        r(bi()),
        r(Ii()),
        r(Ni()),
        r(Ai()),
        r(Ci()),
        r(Pi()),
        r(xi()),
        r(Ui()),
        r(Mi()),
        r(Di()),
        r(Li())
    function e(t) {
        if (typeof WeakMap != 'function') return null
        var i = new WeakMap(),
            o = new WeakMap()
        return (e = function (s) {
            return s ? o : i
        })(t)
    }
    function r(t, i) {
        if (!i && t && t.__esModule) return t
        if (t === null || (typeof t != 'object' && typeof t != 'function')) return { default: t }
        var o = e(i)
        if (o && o.has(t)) return o.get(t)
        var n = {},
            s = Object.defineProperty && Object.getOwnPropertyDescriptor
        for (var l in t)
            if (l !== 'default' && Object.prototype.hasOwnProperty.call(t, l)) {
                var a = s ? Object.getOwnPropertyDescriptor(t, l) : null
                a && (a.get || a.set) ? Object.defineProperty(n, l, a) : (n[l] = t[l])
            }
        return (n.default = t), o && o.set(t, n), n
    }
    return pn
}
var Jn = {},
    Yn
function is() {
    return Yn || (Yn = 1), Jn
}
var Xn
function ki() {
    return (
        Xn ||
            ((Xn = 1),
            (function (e) {
                e.__esModule = !0
                var r = ns()
                Object.keys(r).forEach(function (c) {
                    c === 'default' ||
                        c === '__esModule' ||
                        (c in e && e[c] === r[c]) ||
                        (e[c] = r[c])
                })
                var t = Di()
                Object.keys(t).forEach(function (c) {
                    c === 'default' ||
                        c === '__esModule' ||
                        (c in e && e[c] === t[c]) ||
                        (e[c] = t[c])
                })
                var i = Mi()
                Object.keys(i).forEach(function (c) {
                    c === 'default' ||
                        c === '__esModule' ||
                        (c in e && e[c] === i[c]) ||
                        (e[c] = i[c])
                })
                var o = mi()
                Object.keys(o).forEach(function (c) {
                    c === 'default' ||
                        c === '__esModule' ||
                        (c in e && e[c] === o[c]) ||
                        (e[c] = o[c])
                })
                var n = wi()
                Object.keys(n).forEach(function (c) {
                    c === 'default' ||
                        c === '__esModule' ||
                        (c in e && e[c] === n[c]) ||
                        (e[c] = n[c])
                })
                var s = yi()
                Object.keys(s).forEach(function (c) {
                    c === 'default' ||
                        c === '__esModule' ||
                        (c in e && e[c] === s[c]) ||
                        (e[c] = s[c])
                })
                var l = Si()
                Object.keys(l).forEach(function (c) {
                    c === 'default' ||
                        c === '__esModule' ||
                        (c in e && e[c] === l[c]) ||
                        (e[c] = l[c])
                })
                var a = Ri()
                Object.keys(a).forEach(function (c) {
                    c === 'default' ||
                        c === '__esModule' ||
                        (c in e && e[c] === a[c]) ||
                        (e[c] = a[c])
                })
                var p = Oi()
                Object.keys(p).forEach(function (c) {
                    c === 'default' ||
                        c === '__esModule' ||
                        (c in e && e[c] === p[c]) ||
                        (e[c] = p[c])
                })
                var d = bi()
                Object.keys(d).forEach(function (c) {
                    c === 'default' ||
                        c === '__esModule' ||
                        (c in e && e[c] === d[c]) ||
                        (e[c] = d[c])
                })
                var f = Ii()
                Object.keys(f).forEach(function (c) {
                    c === 'default' ||
                        c === '__esModule' ||
                        (c in e && e[c] === f[c]) ||
                        (e[c] = f[c])
                })
                var u = Ni()
                Object.keys(u).forEach(function (c) {
                    c === 'default' ||
                        c === '__esModule' ||
                        (c in e && e[c] === u[c]) ||
                        (e[c] = u[c])
                })
                var E = Ai()
                Object.keys(E).forEach(function (c) {
                    c === 'default' ||
                        c === '__esModule' ||
                        (c in e && e[c] === E[c]) ||
                        (e[c] = E[c])
                })
                var S = Ci()
                Object.keys(S).forEach(function (c) {
                    c === 'default' ||
                        c === '__esModule' ||
                        (c in e && e[c] === S[c]) ||
                        (e[c] = S[c])
                })
                var m = Pi()
                Object.keys(m).forEach(function (c) {
                    c === 'default' ||
                        c === '__esModule' ||
                        (c in e && e[c] === m[c]) ||
                        (e[c] = m[c])
                })
                var R = xi()
                Object.keys(R).forEach(function (c) {
                    c === 'default' ||
                        c === '__esModule' ||
                        (c in e && e[c] === R[c]) ||
                        (e[c] = R[c])
                })
                var h = Ui()
                Object.keys(h).forEach(function (c) {
                    c === 'default' ||
                        c === '__esModule' ||
                        (c in e && e[c] === h[c]) ||
                        (e[c] = h[c])
                })
                var _ = Li()
                Object.keys(_).forEach(function (c) {
                    c === 'default' ||
                        c === '__esModule' ||
                        (c in e && e[c] === _[c]) ||
                        (e[c] = _[c])
                })
                var y = is()
                Object.keys(y).forEach(function (c) {
                    c === 'default' ||
                        c === '__esModule' ||
                        (c in e && e[c] === y[c]) ||
                        (e[c] = y[c])
                })
            })(Jr)),
        Jr
    )
}
var $n
function os() {
    if ($n) return te
    $n = 1
    var e = Me
    ;(te.__esModule = !0),
        (te.disableWebUSB =
            te.requestLogin =
            te.customMessage =
            te.getSettings =
            te.renderWebUSBButton =
            te.uiResponse =
            te.call =
            te.init =
            te.cancel =
            te.dispose =
            te.manifest =
            te.eventEmitter =
                void 0)
    var r = e(Dr()),
        t = e(Lr()),
        i = e(Er()),
        o = e(at()),
        n = e(Ja()),
        s = S(Xa()),
        l = e($a()),
        a = Za(),
        p = es(),
        d = rs(),
        f = ts(),
        u = Ge()
    S(ki())
    function E(U) {
        if (typeof WeakMap != 'function') return null
        var x = new WeakMap(),
            B = new WeakMap()
        return (E = function (g) {
            return g ? B : x
        })(U)
    }
    function S(U, x) {
        if (!x && U && U.__esModule) return U
        if (U === null || (typeof U != 'object' && typeof U != 'function')) return { default: U }
        var B = E(x)
        if (B && B.has(U)) return B.get(U)
        var G = {},
            g = Object.defineProperty && Object.getOwnPropertyDescriptor
        for (var v in U)
            if (v !== 'default' && Object.prototype.hasOwnProperty.call(U, v)) {
                var A = g ? Object.getOwnPropertyDescriptor(U, v) : null
                A && (A.get || A.set) ? Object.defineProperty(G, v, A) : (G[v] = U[v])
            }
        return (G.default = U), B && B.set(U, G), G
    }
    function m(U, x) {
        var B = Object.keys(U)
        if (Object.getOwnPropertySymbols) {
            var G = Object.getOwnPropertySymbols(U)
            x &&
                (G = G.filter(function (g) {
                    return Object.getOwnPropertyDescriptor(U, g).enumerable
                })),
                B.push.apply(B, G)
        }
        return B
    }
    function R(U) {
        for (var x = 1; x < arguments.length; x++) {
            var B = arguments[x] != null ? arguments[x] : {}
            x % 2
                ? m(Object(B), !0).forEach(function (G) {
                      ;(0, i.default)(U, G, B[G])
                  })
                : Object.getOwnPropertyDescriptors
                ? Object.defineProperties(U, Object.getOwnPropertyDescriptors(B))
                : m(Object(B)).forEach(function (G) {
                      Object.defineProperty(U, G, Object.getOwnPropertyDescriptor(B, G))
                  })
        }
        return U
    }
    var h = new o.default()
    te.eventEmitter = h
    var _ = (0, f.initLog)('[trezor-connect.js]'),
        y = (0, d.parse)(),
        c,
        w = function () {
            var x = new n.default(y)
            return (
                x.on(u.POPUP.CLOSED, function (B) {
                    s.postMessage({ type: u.POPUP.CLOSED, payload: B ? { error: B } : null }, !1)
                }),
                x
            )
        },
        P = function (x) {
            y = (0, d.parse)(R(R({}, y), {}, { manifest: x }))
        }
    te.manifest = P
    var b = function () {
        h.removeAllListeners(), s.dispose(), (y = (0, d.parse)()), c && c.close()
    }
    te.dispose = b
    var D = function (x) {
        c && c.emit(u.POPUP.CLOSED, x)
    }
    te.cancel = D
    var W = function (x) {
            if (x.origin === s.origin) {
                var B = (0, a.parseMessage)(x.data),
                    G = B.event,
                    g = B.type,
                    v = B.payload,
                    A = B.id || 0
                switch ((_.log('handleMessage', B), G)) {
                    case u.RESPONSE_EVENT:
                        s.messagePromises[A]
                            ? (s.messagePromises[A].resolve({
                                  id: A,
                                  success: B.success,
                                  payload: v,
                              }),
                              delete s.messagePromises[A])
                            : _.warn('Unknown message id ' + A)
                        break
                    case u.DEVICE_EVENT:
                        h.emit(G, B), h.emit(g, v)
                        break
                    case u.TRANSPORT_EVENT:
                        h.emit(G, B), h.emit(g, v)
                        break
                    case u.BLOCKCHAIN_EVENT:
                        h.emit(G, B), h.emit(g, v)
                        break
                    case u.UI_EVENT:
                        if (g === u.IFRAME.BOOTSTRAP) {
                            s.clearTimeout()
                            break
                        }
                        g === u.IFRAME.LOADED && s.initPromise.resolve(),
                            g === u.IFRAME.ERROR && s.initPromise.reject(v.error),
                            h.emit(G, B),
                            h.emit(g, v)
                        break
                    default:
                        _.log('Undefined message', G, x)
                }
            }
        },
        K = (function () {
            var U = (0, t.default)(
                r.default.mark(function x(B) {
                    return r.default.wrap(function (g) {
                        for (;;)
                            switch ((g.prev = g.next)) {
                                case 0:
                                    if (
                                        (B === void 0 && (B = {}),
                                        console.warn(
                                            'trezor-connect version 8 has been deprecated. Please start using @trezor/connect version 9 https://www.npmjs.com/package/@trezor/connect'
                                        ),
                                        !s.instance)
                                    ) {
                                        g.next = 4
                                        break
                                    }
                                    throw u.ERRORS.TypedError('Init_AlreadyInitialized')
                                case 4:
                                    if (((y = (0, d.parse)(R(R({}, y), B))), y.manifest)) {
                                        g.next = 7
                                        break
                                    }
                                    throw u.ERRORS.TypedError('Init_ManifestMissing')
                                case 7:
                                    if (!y.lazyLoad) {
                                        g.next = 10
                                        break
                                    }
                                    return (y.lazyLoad = !1), g.abrupt('return')
                                case 10:
                                    return (
                                        c || (c = w()),
                                        (_.enabled = !!y.debug),
                                        window.addEventListener('message', W),
                                        window.addEventListener('unload', b),
                                        (g.next = 16),
                                        s.init(y)
                                    )
                                case 16:
                                case 'end':
                                    return g.stop()
                            }
                    }, x)
                })
            )
            return function (B) {
                return U.apply(this, arguments)
            }
        })()
    te.init = K
    var j = (function () {
        var U = (0, t.default)(
            r.default.mark(function x(B) {
                var G
                return r.default.wrap(
                    function (v) {
                        for (;;)
                            switch ((v.prev = v.next)) {
                                case 0:
                                    if (!(!s.instance && !s.timeout)) {
                                        v.next = 15
                                        break
                                    }
                                    if (((y = (0, d.parse)(y)), y.manifest)) {
                                        v.next = 4
                                        break
                                    }
                                    return v.abrupt(
                                        'return',
                                        (0, a.errorMessage)(
                                            u.ERRORS.TypedError('Init_ManifestMissing')
                                        )
                                    )
                                case 4:
                                    return (
                                        c || (c = w()),
                                        c.request(!0),
                                        (v.prev = 6),
                                        (v.next = 9),
                                        K(y)
                                    )
                                case 9:
                                    v.next = 15
                                    break
                                case 11:
                                    return (
                                        (v.prev = 11),
                                        (v.t0 = v.catch(6)),
                                        c &&
                                            (['Init_IframeBlocked', 'Init_IframeTimeout'].includes(
                                                v.t0.code
                                            )
                                                ? c.postMessage(
                                                      (0, p.UiMessage)(u.UI.IFRAME_FAILURE)
                                                  )
                                                : c.close()),
                                        v.abrupt('return', (0, a.errorMessage)(v.t0))
                                    )
                                case 15:
                                    if (!s.timeout) {
                                        v.next = 17
                                        break
                                    }
                                    return v.abrupt(
                                        'return',
                                        (0, a.errorMessage)(
                                            u.ERRORS.TypedError('Init_ManifestMissing')
                                        )
                                    )
                                case 17:
                                    if (!s.error) {
                                        v.next = 19
                                        break
                                    }
                                    return v.abrupt('return', (0, a.errorMessage)(s.error))
                                case 19:
                                    return (
                                        y.popup && c && c.request(),
                                        (v.prev = 20),
                                        (v.next = 23),
                                        s.postMessage({ type: u.IFRAME.CALL, payload: B })
                                    )
                                case 23:
                                    if (((G = v.sent), !G)) {
                                        v.next = 27
                                        break
                                    }
                                    return (
                                        !G.success &&
                                            G.payload.code !== 'Device_CallInProgress' &&
                                            c &&
                                            c.unlock(),
                                        v.abrupt('return', G)
                                    )
                                case 27:
                                    return (
                                        c && c.unlock(),
                                        v.abrupt(
                                            'return',
                                            (0, a.errorMessage)(
                                                u.ERRORS.TypedError('Method_NoResponse')
                                            )
                                        )
                                    )
                                case 31:
                                    return (
                                        (v.prev = 31),
                                        (v.t1 = v.catch(20)),
                                        _.error('__call error', v.t1),
                                        c && c.close(),
                                        v.abrupt('return', (0, a.errorMessage)(v.t1))
                                    )
                                case 36:
                                case 'end':
                                    return v.stop()
                            }
                    },
                    x,
                    null,
                    [
                        [6, 11],
                        [20, 31],
                    ]
                )
            })
        )
        return function (B) {
            return U.apply(this, arguments)
        }
    })()
    te.call = j
    var z = function (x) {
            s.postMessage({ event: u.UI_EVENT, type: u.UI.CUSTOM_MESSAGE_RESPONSE, payload: x })
        },
        H = function (x) {
            if (!s.instance) throw u.ERRORS.TypedError('Init_NotInitialized')
            var B = x.type,
                G = x.payload
            s.postMessage({ event: u.UI_EVENT, type: B, payload: G })
        }
    te.uiResponse = H
    var he = function (x) {
        ;(0, l.default)(x, y.webusbSrc)
    }
    te.renderWebUSBButton = he
    var k = function () {
        return s.instance
            ? j({ method: 'getSettings' })
            : Promise.resolve((0, a.errorMessage)(u.ERRORS.TypedError('Init_NotInitialized')))
    }
    te.getSettings = k
    var I = (function () {
        var U = (0, t.default)(
            r.default.mark(function x(B) {
                var G, g, v
                return r.default.wrap(function (T) {
                    for (;;)
                        switch ((T.prev = T.next)) {
                            case 0:
                                if (s.instance) {
                                    T.next = 2
                                    break
                                }
                                throw u.ERRORS.TypedError('Init_NotInitialized')
                            case 2:
                                if (typeof B.callback == 'function') {
                                    T.next = 4
                                    break
                                }
                                return T.abrupt(
                                    'return',
                                    (0, a.errorMessage)(
                                        u.ERRORS.TypedError('Method_CustomMessage_Callback')
                                    )
                                )
                            case 4:
                                return (
                                    (G = B.callback),
                                    (g = (function () {
                                        var V = (0, t.default)(
                                            r.default.mark(function J(ne) {
                                                var ee, re
                                                return r.default.wrap(function (Z) {
                                                    for (;;)
                                                        switch ((Z.prev = Z.next)) {
                                                            case 0:
                                                                if (
                                                                    ((ee = ne.data),
                                                                    !(
                                                                        ee &&
                                                                        ee.type ===
                                                                            u.UI
                                                                                .CUSTOM_MESSAGE_REQUEST
                                                                    ))
                                                                ) {
                                                                    Z.next = 6
                                                                    break
                                                                }
                                                                return (Z.next = 4), G(ee.payload)
                                                            case 4:
                                                                ;(re = Z.sent),
                                                                    z(re || { message: 'release' })
                                                            case 6:
                                                            case 'end':
                                                                return Z.stop()
                                                        }
                                                }, J)
                                            })
                                        )
                                        return function (ne) {
                                            return V.apply(this, arguments)
                                        }
                                    })()),
                                    window.addEventListener('message', g, !1),
                                    (T.next = 9),
                                    j(R(R({ method: 'customMessage' }, B), {}, { callback: null }))
                                )
                            case 9:
                                return (
                                    (v = T.sent),
                                    window.removeEventListener('message', g),
                                    T.abrupt('return', v)
                                )
                            case 12:
                            case 'end':
                                return T.stop()
                        }
                }, x)
            })
        )
        return function (B) {
            return U.apply(this, arguments)
        }
    })()
    te.customMessage = I
    var L = (function () {
        var U = (0, t.default)(
            r.default.mark(function x(B) {
                var G, g, v
                return r.default.wrap(function (T) {
                    for (;;)
                        switch ((T.prev = T.next)) {
                            case 0:
                                if (s.instance) {
                                    T.next = 2
                                    break
                                }
                                throw u.ERRORS.TypedError('Init_NotInitialized')
                            case 2:
                                if (typeof B.callback != 'function') {
                                    T.next = 11
                                    break
                                }
                                return (
                                    (G = B.callback),
                                    (g = (function () {
                                        var V = (0, t.default)(
                                            r.default.mark(function J(ne) {
                                                var ee, re
                                                return r.default.wrap(
                                                    function (Z) {
                                                        for (;;)
                                                            switch ((Z.prev = Z.next)) {
                                                                case 0:
                                                                    if (
                                                                        ((ee = ne.data),
                                                                        !(
                                                                            ee &&
                                                                            ee.type ===
                                                                                u.UI
                                                                                    .LOGIN_CHALLENGE_REQUEST
                                                                        ))
                                                                    ) {
                                                                        Z.next = 12
                                                                        break
                                                                    }
                                                                    return (
                                                                        (Z.prev = 2),
                                                                        (Z.next = 5),
                                                                        G()
                                                                    )
                                                                case 5:
                                                                    ;(re = Z.sent),
                                                                        s.postMessage({
                                                                            event: u.UI_EVENT,
                                                                            type: u.UI
                                                                                .LOGIN_CHALLENGE_RESPONSE,
                                                                            payload: re,
                                                                        }),
                                                                        (Z.next = 12)
                                                                    break
                                                                case 9:
                                                                    ;(Z.prev = 9),
                                                                        (Z.t0 = Z.catch(2)),
                                                                        s.postMessage({
                                                                            event: u.UI_EVENT,
                                                                            type: u.UI
                                                                                .LOGIN_CHALLENGE_RESPONSE,
                                                                            payload: Z.t0.message,
                                                                        })
                                                                case 12:
                                                                case 'end':
                                                                    return Z.stop()
                                                            }
                                                    },
                                                    J,
                                                    null,
                                                    [[2, 9]]
                                                )
                                            })
                                        )
                                        return function (ne) {
                                            return V.apply(this, arguments)
                                        }
                                    })()),
                                    window.addEventListener('message', g, !1),
                                    (T.next = 8),
                                    j(
                                        R(
                                            R({ method: 'requestLogin' }, B),
                                            {},
                                            { asyncChallenge: !0, callback: null }
                                        )
                                    )
                                )
                            case 8:
                                return (
                                    (v = T.sent),
                                    window.removeEventListener('message', g),
                                    T.abrupt('return', v)
                                )
                            case 11:
                                return T.abrupt('return', j(R({ method: 'requestLogin' }, B)))
                            case 12:
                            case 'end':
                                return T.stop()
                        }
                }, x)
            })
        )
        return function (B) {
            return U.apply(this, arguments)
        }
    })()
    te.requestLogin = L
    var Q = function () {
        if (!s.instance) throw u.ERRORS.TypedError('Init_NotInitialized')
        s.postMessage({ event: u.UI_EVENT, type: u.TRANSPORT.DISABLE_WEBUSB })
    }
    return (te.disableWebUSB = Q), te
}
;(function (e) {
    var r = Me
    e.__esModule = !0
    var t = {}
    e.default = void 0
    var i = r(Er()),
        o = Ge()
    Object.keys(o).forEach(function (f) {
        f === 'default' ||
            f === '__esModule' ||
            Object.prototype.hasOwnProperty.call(t, f) ||
            (f in e && e[f] === o[f]) ||
            (e[f] = o[f])
    })
    var n = os(),
        s = ki()
    Object.keys(s).forEach(function (f) {
        f === 'default' ||
            f === '__esModule' ||
            Object.prototype.hasOwnProperty.call(t, f) ||
            (f in e && e[f] === s[f]) ||
            (e[f] = s[f])
    })
    function l(f, u) {
        var E = Object.keys(f)
        if (Object.getOwnPropertySymbols) {
            var S = Object.getOwnPropertySymbols(f)
            u &&
                (S = S.filter(function (m) {
                    return Object.getOwnPropertyDescriptor(f, m).enumerable
                })),
                E.push.apply(E, S)
        }
        return E
    }
    function a(f) {
        for (var u = 1; u < arguments.length; u++) {
            var E = arguments[u] != null ? arguments[u] : {}
            u % 2
                ? l(Object(E), !0).forEach(function (S) {
                      ;(0, i.default)(f, S, E[S])
                  })
                : Object.getOwnPropertyDescriptors
                ? Object.defineProperties(f, Object.getOwnPropertyDescriptors(E))
                : l(Object(E)).forEach(function (S) {
                      Object.defineProperty(f, S, Object.getOwnPropertyDescriptor(E, S))
                  })
        }
        return f
    }
    var p = {
            manifest: n.manifest,
            init: n.init,
            getSettings: n.getSettings,
            on: function (u, E) {
                n.eventEmitter.on(u, E)
            },
            off: function (u, E) {
                n.eventEmitter.removeListener(u, E)
            },
            removeAllListeners: function () {
                n.eventEmitter.removeAllListeners()
            },
            uiResponse: n.uiResponse,
            blockchainGetAccountBalanceHistory: function (u) {
                return (0, n.call)(a({ method: 'blockchainGetAccountBalanceHistory' }, u))
            },
            blockchainGetCurrentFiatRates: function (u) {
                return (0, n.call)(a({ method: 'blockchainGetCurrentFiatRates' }, u))
            },
            blockchainGetFiatRatesForTimestamps: function (u) {
                return (0, n.call)(a({ method: 'blockchainGetFiatRatesForTimestamps' }, u))
            },
            blockchainDisconnect: function (u) {
                return (0, n.call)(a({ method: 'blockchainDisconnect' }, u))
            },
            blockchainEstimateFee: function (u) {
                return (0, n.call)(a({ method: 'blockchainEstimateFee' }, u))
            },
            blockchainGetTransactions: function (u) {
                return (0, n.call)(a({ method: 'blockchainGetTransactions' }, u))
            },
            blockchainSetCustomBackend: function (u) {
                return (0, n.call)(a({ method: 'blockchainSetCustomBackend' }, u))
            },
            blockchainSubscribe: function (u) {
                return (0, n.call)(a({ method: 'blockchainSubscribe' }, u))
            },
            blockchainSubscribeFiatRates: function (u) {
                return (0, n.call)(a({ method: 'blockchainSubscribeFiatRates' }, u))
            },
            blockchainUnsubscribe: function (u) {
                return (0, n.call)(a({ method: 'blockchainUnsubscribe' }, u))
            },
            blockchainUnsubscribeFiatRates: function (u) {
                return (0, n.call)(a({ method: 'blockchainUnsubscribeFiatRates' }, u))
            },
            customMessage: function (u) {
                return (0, n.customMessage)(u)
            },
            requestLogin: function (u) {
                return (0, n.requestLogin)(u)
            },
            cardanoGetAddress: function (u) {
                var E = n.eventEmitter.listenerCount(o.UI.ADDRESS_VALIDATION) > 0
                return (0, n.call)(
                    a(a({ method: 'cardanoGetAddress' }, u), {}, { useEventListener: E })
                )
            },
            cardanoGetNativeScriptHash: function (u) {
                return (0, n.call)(a({ method: 'cardanoGetNativeScriptHash' }, u))
            },
            cardanoGetPublicKey: function (u) {
                return (0, n.call)(a({ method: 'cardanoGetPublicKey' }, u))
            },
            cardanoSignTransaction: function (u) {
                return (0, n.call)(a({ method: 'cardanoSignTransaction' }, u))
            },
            cipherKeyValue: function (u) {
                return (0, n.call)(a({ method: 'cipherKeyValue' }, u))
            },
            composeTransaction: function (u) {
                return (0, n.call)(a({ method: 'composeTransaction' }, u))
            },
            ethereumGetAddress: function (u) {
                var E = n.eventEmitter.listenerCount(o.UI.ADDRESS_VALIDATION) > 0
                return (0, n.call)(
                    a(a({ method: 'ethereumGetAddress' }, u), {}, { useEventListener: E })
                )
            },
            ethereumGetPublicKey: function (u) {
                return (0, n.call)(a({ method: 'ethereumGetPublicKey' }, u))
            },
            ethereumSignMessage: function (u) {
                return (0, n.call)(a({ method: 'ethereumSignMessage' }, u))
            },
            ethereumSignTransaction: function (u) {
                return (0, n.call)(a({ method: 'ethereumSignTransaction' }, u))
            },
            ethereumSignTypedData: function (u) {
                return (0, n.call)(a({ method: 'ethereumSignTypedData' }, u))
            },
            ethereumVerifyMessage: function (u) {
                return (0, n.call)(a({ method: 'ethereumVerifyMessage' }, u))
            },
            getAccountInfo: function (u) {
                return (0, n.call)(a({ method: 'getAccountInfo' }, u))
            },
            getAddress: function (u) {
                var E = n.eventEmitter.listenerCount(o.UI.ADDRESS_VALIDATION) > 0
                return (0, n.call)(a(a({ method: 'getAddress' }, u), {}, { useEventListener: E }))
            },
            getDeviceState: function (u) {
                return (0, n.call)(a({ method: 'getDeviceState' }, u))
            },
            getFeatures: function (u) {
                return (0, n.call)(a({ method: 'getFeatures' }, u))
            },
            getPublicKey: function (u) {
                return (0, n.call)(a({ method: 'getPublicKey' }, u))
            },
            liskGetAddress: function () {
                return (0, n.call)({ method: 'liskDeprecated' })
            },
            liskGetPublicKey: function () {
                return (0, n.call)({ method: 'liskDeprecated' })
            },
            liskSignMessage: function () {
                return (0, n.call)({ method: 'liskDeprecated' })
            },
            liskSignTransaction: function () {
                return (0, n.call)({ method: 'liskDeprecated' })
            },
            liskVerifyMessage: function () {
                return (0, n.call)({ method: 'liskDeprecated' })
            },
            nemGetAddress: function (u) {
                var E = n.eventEmitter.listenerCount(o.UI.ADDRESS_VALIDATION) > 0
                return (0, n.call)(
                    a(a({ method: 'nemGetAddress' }, u), {}, { useEventListener: E })
                )
            },
            nemSignTransaction: function (u) {
                return (0, n.call)(a({ method: 'nemSignTransaction' }, u))
            },
            pushTransaction: function (u) {
                return (0, n.call)(a({ method: 'pushTransaction' }, u))
            },
            rippleGetAddress: function (u) {
                var E = n.eventEmitter.listenerCount(o.UI.ADDRESS_VALIDATION) > 0
                return (0, n.call)(
                    a(a({ method: 'rippleGetAddress' }, u), {}, { useEventListener: E })
                )
            },
            rippleSignTransaction: function (u) {
                return (0, n.call)(a({ method: 'rippleSignTransaction' }, u))
            },
            signMessage: function (u) {
                return (0, n.call)(a({ method: 'signMessage' }, u))
            },
            signTransaction: function (u) {
                return (0, n.call)(a({ method: 'signTransaction' }, u))
            },
            stellarGetAddress: function (u) {
                var E = n.eventEmitter.listenerCount(o.UI.ADDRESS_VALIDATION) > 0
                return (0, n.call)(
                    a(a({ method: 'stellarGetAddress' }, u), {}, { useEventListener: E })
                )
            },
            stellarSignTransaction: function (u) {
                return (0, n.call)(a({ method: 'stellarSignTransaction' }, u))
            },
            tezosGetAddress: function (u) {
                var E = n.eventEmitter.listenerCount(o.UI.ADDRESS_VALIDATION) > 0
                return (0, n.call)(
                    a(a({ method: 'tezosGetAddress' }, u), {}, { useEventListener: E })
                )
            },
            tezosGetPublicKey: function (u) {
                return (0, n.call)(a({ method: 'tezosGetPublicKey' }, u))
            },
            tezosSignTransaction: function (u) {
                return (0, n.call)(a({ method: 'tezosSignTransaction' }, u))
            },
            eosGetPublicKey: function (u) {
                return (0, n.call)(a({ method: 'eosGetPublicKey' }, u))
            },
            eosSignTransaction: function (u) {
                return (0, n.call)(a({ method: 'eosSignTransaction' }, u))
            },
            binanceGetAddress: function (u) {
                var E = n.eventEmitter.listenerCount(o.UI.ADDRESS_VALIDATION) > 0
                return (0, n.call)(
                    a(a({ method: 'binanceGetAddress' }, u), {}, { useEventListener: E })
                )
            },
            binanceGetPublicKey: function (u) {
                return (0, n.call)(a({ method: 'binanceGetPublicKey' }, u))
            },
            binanceSignTransaction: function (u) {
                return (0, n.call)(a({ method: 'binanceSignTransaction' }, u))
            },
            verifyMessage: function (u) {
                return (0, n.call)(a({ method: 'verifyMessage' }, u))
            },
            resetDevice: function (u) {
                return (0, n.call)(a({ method: 'resetDevice' }, u))
            },
            wipeDevice: function (u) {
                return (0, n.call)(a({ method: 'wipeDevice' }, u))
            },
            applyFlags: function (u) {
                return (0, n.call)(a({ method: 'applyFlags' }, u))
            },
            applySettings: function (u) {
                return (0, n.call)(a({ method: 'applySettings' }, u))
            },
            backupDevice: function (u) {
                return (0, n.call)(a({ method: 'backupDevice' }, u))
            },
            changePin: function (u) {
                return (0, n.call)(a({ method: 'changePin' }, u))
            },
            firmwareUpdate: function (u) {
                return (0, n.call)(a({ method: 'firmwareUpdate' }, u))
            },
            recoveryDevice: function (u) {
                return (0, n.call)(a({ method: 'recoveryDevice' }, u))
            },
            getCoinInfo: function (u) {
                return (0, n.call)(a({ method: 'getCoinInfo' }, u))
            },
            rebootToBootloader: function (u) {
                return (0, n.call)(a({ method: 'rebootToBootloader' }, u))
            },
            setProxy: function (u) {
                return (0, n.call)(a({ method: 'setProxy' }, u))
            },
            dispose: n.dispose,
            cancel: n.cancel,
            renderWebUSBButton: n.renderWebUSBButton,
            disableWebUSB: n.disableWebUSB,
        },
        d = p
    e.default = d
})(di)
const Zn = ir(di)
var as = function (e) {
        var r = 0,
            t,
            i = e.weight
        if (typeof e.ed25519PublicKey == 'string') {
            var o = xe.Keypair.fromPublicKey(e.ed25519PublicKey)
            t = o.rawPublicKey().toString('hex')
        }
        return (
            e.preAuthTx instanceof Buffer && ((r = 1), (t = e.preAuthTx.toString('hex'))),
            e.sha256Hash instanceof Buffer && ((r = 2), (t = e.sha256Hash.toString('hex'))),
            { type: r, key: t, weight: i }
        )
    },
    Yr = function (e) {
        return e.isNative()
            ? { type: 0, code: e.getCode() }
            : {
                  type: e.getAssetType() === 'credit_alphanum4' ? 1 : 2,
                  code: e.getCode(),
                  issuer: e.getIssuer(),
              }
    },
    ss = function (e) {
        return new ro(e).times(1e7).toString()
    },
    us = function (e) {
        switch (e) {
            case 'pathPaymentStrictReceive':
                return 'pathPayment'
            case 'createPassiveSellOffer':
                return 'createPassiveOffer'
            case 'manageSellOffer':
                return 'manageOffer'
            default:
                return e
        }
    },
    cs = function (e) {
        switch (e.type) {
            case xe.MemoText:
                return { type: 1, text: e.value }
            case xe.MemoID:
                return { type: 2, id: e.value }
            case xe.MemoHash:
                return { type: 3, hash: e.value ? e.value.toString('hex') : '' }
            case xe.MemoReturn:
                return { type: 4, hash: e.value ? e.value.toString('hex') : '' }
            default:
                return { type: 0 }
        }
    },
    ls = function (e) {
        if (e)
            return {
                minTime: Number.parseInt(e.minTime, 10),
                maxTime: Number.parseInt(e.maxTime, 10),
            }
    },
    fs = function (e, r) {
        var t = ['amount', 'sendMax', 'destAmount', 'startingBalance', 'limit'],
            i = ['asset', 'sendAsset', 'destAsset', 'selling', 'buying', 'line'],
            o = r.operations.map(function (n, s) {
                var l = O.__assign({}, n)
                if (
                    (l.signer && (l.signer = as(l.signer)),
                    l.path && (l.path = l.path.map(Yr)),
                    typeof l.price == 'string')
                ) {
                    var a = r.tx.operations()[s]
                    l.price = { n: a.body().value().price().n(), d: a.body().value().price().d() }
                }
                if (
                    (t.forEach(function (d) {
                        typeof l[d] == 'string' && (l[d] = ss(l[d]))
                    }),
                    i.forEach(function (d) {
                        l[d] && (l[d] = Yr(l[d]))
                    }),
                    l.type === 'allowTrust')
                ) {
                    var p = new xe.Asset(l.assetCode, l.trustor)
                    l.assetType = Yr(p).type
                }
                return (
                    l.type === 'manageData' && l.value && (l.value = l.value.toString('hex')),
                    (l.type = us(n.type)),
                    l
                )
            })
        return {
            path: e,
            networkPassphrase: r.networkPassphrase,
            transaction: {
                source: r.source,
                fee: Number(r.fee),
                sequence: r.sequence,
                memo: cs(r.memo),
                timebounds: ls(r.timeBounds),
                operations: o,
            },
        }
    },
    ds = {
        keyType: we.trezor,
        signTransaction: function (e) {
            return O.__awaiter(this, void 0, void 0, function () {
                var r, t, i, o, n, s, l
                return O.__generator(this, function (a) {
                    switch (a.label) {
                        case 0:
                            if (
                                ((r = e.transaction),
                                (t = e.key),
                                (i = e.custom),
                                t.privateKey !== '')
                            )
                                throw new Error(
                                    'Non-ledger key sent to ledger handler: ' +
                                        JSON.stringify(t.publicKey)
                                )
                            if (!i || !i.email || !i.appUrl)
                                throw new Error(`Trezor Connect manifest with "email" and "appUrl" props is required.
        Make sure they are passed through "custom" prop.`)
                            a.label = 1
                        case 1:
                            return (
                                a.trys.push([1, 3, , 4]),
                                Zn.manifest({ email: i.email, appUrl: i.appUrl }),
                                (o = fs("m/44'/148'/0'", r)),
                                [4, Zn.stellarSignTransaction(o)]
                            )
                        case 2:
                            if (((n = a.sent()), n.success))
                                return (
                                    (s = Buffer.from(n.payload.signature, 'hex').toString(
                                        'base64'
                                    )),
                                    r.addSignature(t.publicKey, s),
                                    [2, r]
                                )
                            throw new Error(
                                n.payload.error || 'We couldn’t sign the transaction with Trezor.'
                            )
                        case 3:
                            throw (
                                ((l = a.sent()),
                                new Error(
                                    'We couldn’t sign the transaction with Trezor. ' +
                                        l.toString() +
                                        '.'
                                ))
                            )
                        case 4:
                            return [2]
                    }
                })
            })
        },
    },
    ps = (function () {
        function e(r) {
            var t
            ;(this.encrypterMap = {}),
                (this.keyHandlerMap =
                    ((t = {}),
                    (t[we.albedo] = Io),
                    (t[we.ledger] = _a),
                    (t[we.freighter] = Co),
                    (t[we.plaintextKey] = va),
                    (t[we.trezor] = ds),
                    t)),
                (this.keyCache = {}),
                (this.keyStore = r.keyStore),
                (this.shouldCache = r.shouldCache || !1),
                (this.defaultNetworkPassphrase = r.defaultNetworkPassphrase || xe.Networks.PUBLIC)
        }
        return (
            (e.prototype.registerKeyHandler = function (r) {
                this.keyHandlerMap[r.keyType] = r
            }),
            (e.prototype.registerEncrypter = function (r) {
                this.encrypterMap[r.name] = r
            }),
            (e.prototype.setDefaultNetworkPassphrase = function (r) {
                this.defaultNetworkPassphrase = r
            }),
            (e.prototype.storeKey = function (r) {
                return O.__awaiter(this, void 0, void 0, function () {
                    var t, i, o, n, s, l, a, p
                    return O.__generator(this, function (d) {
                        switch (d.label) {
                            case 0:
                                return (
                                    (t = r.key),
                                    (i = r.password),
                                    (o = r.encrypterName),
                                    (n = t.id || '' + Math.random()),
                                    (s = O.__assign({}, t, { id: n })),
                                    (l = this.encrypterMap[o]),
                                    [4, l.encryptKey({ key: s, password: i })]
                                )
                            case 1:
                                return (a = d.sent()), [4, this.keyStore.storeKeys([a])]
                            case 2:
                                return (p = d.sent()), this._writeIndexCache(s.id, s), [2, p[0]]
                        }
                    })
                })
            }),
            (e.prototype.loadKey = function (r, t) {
                return O.__awaiter(this, void 0, void 0, function () {
                    var i, o, n, s, l
                    return O.__generator(this, function (a) {
                        switch (a.label) {
                            case 0:
                                return [4, this.keyStore.loadAllKeys()]
                            case 1:
                                if (
                                    ((i = a.sent()),
                                    (o = i.filter(function (p) {
                                        return p.id === r
                                    })),
                                    !o.length)
                                )
                                    throw new Error("Key not found with id '" + r + "'.")
                                if (o.length > 1)
                                    throw new Error(
                                        "Too many keys found with id '" +
                                            r +
                                            "', that’s not supposed to happen!"
                                    )
                                ;(n = o[0]), (s = this.encrypterMap[n.encrypterName]), (a.label = 2)
                            case 2:
                                return (
                                    a.trys.push([2, 4, , 5]),
                                    [4, s.decryptKey({ encryptedKey: n, password: t })]
                                )
                            case 3:
                                return (l = a.sent()), [3, 5]
                            case 4:
                                throw (
                                    (a.sent(),
                                    new Error(
                                        "Couldn’t decrypt key '" +
                                            r +
                                            "' with the supplied password."
                                    ))
                                )
                            case 5:
                                return [2, l]
                        }
                    })
                })
            }),
            (e.prototype.loadAllKeyIds = function () {
                return O.__awaiter(this, void 0, void 0, function () {
                    var r
                    return O.__generator(this, function (t) {
                        switch (t.label) {
                            case 0:
                                return [4, this.keyStore.loadAllKeys()]
                            case 1:
                                return (
                                    (r = t.sent()),
                                    [
                                        2,
                                        r.map(function (i) {
                                            return i.id
                                        }),
                                    ]
                                )
                        }
                    })
                })
            }),
            (e.prototype.removeKey = function (r) {
                return O.__awaiter(this, void 0, void 0, function () {
                    var t
                    return O.__generator(this, function (i) {
                        switch (i.label) {
                            case 0:
                                return [4, this.keyStore.removeKey(r)]
                            case 1:
                                return (t = i.sent()), this._writeIndexCache(r, void 0), [2, t]
                        }
                    })
                })
            }),
            (e.prototype.signTransaction = function (r) {
                return O.__awaiter(this, void 0, void 0, function () {
                    var t, i, o, n, s, l, a, p, d
                    return O.__generator(this, function (f) {
                        switch (f.label) {
                            case 0:
                                return (
                                    (t = r.transaction),
                                    (i = r.id),
                                    (o = r.password),
                                    (n = r.custom),
                                    (s = this._readFromCache(i)),
                                    s ? [3, 3] : [4, this.keyStore.loadKey(i)]
                                )
                            case 1:
                                if (((l = f.sent()), !l))
                                    throw new Error(
                                        "Couldn't sign the transaction: no key with id '" +
                                            i +
                                            "' found."
                                    )
                                return (
                                    (a = this.encrypterMap[l.encrypterName]),
                                    [4, a.decryptKey({ encryptedKey: l, password: o })]
                                )
                            case 2:
                                ;(s = f.sent()), this._writeIndexCache(i, s), (f.label = 3)
                            case 3:
                                return (
                                    (p = this.keyHandlerMap[s.type]),
                                    [4, p.signTransaction({ transaction: t, key: s, custom: n })]
                                )
                            case 4:
                                return (d = f.sent()), [2, d]
                        }
                    })
                })
            }),
            (e.prototype.fetchAuthToken = function (r) {
                return O.__awaiter(this, void 0, void 0, function () {
                    var t, i, o, n, s, l, a, p, d, f, u, E, S, m, R, h, _, y, c, w, P, b, D, W, K, j
                    return O.__generator(this, function (z) {
                        switch (z.label) {
                            case 0:
                                if (
                                    ((t = r.id),
                                    (i = r.password),
                                    (o = r.authServer),
                                    (n = r.authServerKey),
                                    (s = r.authServerHomeDomains),
                                    (l = r.account),
                                    t === void 0)
                                )
                                    throw new Error('Required parameter `id` is missing!')
                                if (i === void 0)
                                    throw new Error('Required parameter `password` is missing!')
                                if (!o)
                                    throw new Error('Required parameter `authServer` is missing!')
                                if (!n)
                                    throw new Error(
                                        'Required parameter `authServerKey` is missing!'
                                    )
                                if (!s)
                                    throw new Error(
                                        'Required parameter `authServerHomeDomains` is missing!'
                                    )
                                return (
                                    (a = this._readFromCache(t)),
                                    a ? [3, 3] : [4, this.keyStore.loadKey(t)]
                                )
                            case 1:
                                if (((p = z.sent()), !p))
                                    throw new Error(
                                        "Couldn't fetch an auth token: no key with id '" +
                                            t +
                                            "' found."
                                    )
                                return (
                                    (d = this.encrypterMap[p.encrypterName]),
                                    [4, d.decryptKey({ encryptedKey: p, password: i })]
                                )
                            case 2:
                                ;(a = z.sent()), this._writeIndexCache(t, a), (z.label = 3)
                            case 3:
                                return (
                                    (l = l || a.publicKey),
                                    [4, fetch(o + '?account=' + encodeURIComponent(l))]
                                )
                            case 4:
                                return (f = z.sent()), f.status === 200 ? [3, 6] : [4, f.text()]
                            case 5:
                                throw (
                                    ((u = z.sent()),
                                    new Error(
                                        `[KeyManager#fetchAuthToken] Failed to fetch a challenge transaction,
          error: ` + JSON.stringify(u)
                                    ))
                                )
                            case 6:
                                return (
                                    (E = a.network || this.defaultNetworkPassphrase), [4, f.text()]
                                )
                            case 7:
                                S = z.sent()
                                try {
                                    m = JSON.parse(S)
                                } catch {
                                    throw new Error(
                                        'Request for challenge returned invalid JSON: ' + S
                                    )
                                }
                                if (m.error) throw new Error(m.error)
                                if (m.network_passphrase !== void 0 && E !== m.network_passphrase)
                                    throw new Error(
                                        `
            Network mismatch: the transfer server expects "` +
                                            m.network_passphrase +
                                            `",
            but you're using "` +
                                            E +
                                            `"
            `
                                    )
                                return (
                                    (R = fr.Utils.readChallengeTx(
                                        m.transaction,
                                        n,
                                        E,
                                        s,
                                        new URL(o).hostname
                                    ).tx),
                                    (h = this.keyHandlerMap[a.type]),
                                    [4, h.signTransaction({ transaction: R, key: a })]
                                )
                            case 8:
                                return (
                                    (_ = z.sent()),
                                    (y = _.toEnvelope().toXDR().toString('base64')),
                                    [
                                        4,
                                        fetch(o, {
                                            method: 'POST',
                                            body: JSON.stringify({ transaction: y }),
                                            headers: { 'Content-Type': 'application/json' },
                                        }),
                                    ]
                                )
                            case 9:
                                return (c = z.sent()), c.status === 200 ? [3, 11] : [4, c.text()]
                            case 10:
                                w = z.sent()
                                try {
                                    throw (
                                        ((P = JSON.parse(w)),
                                        new Error(
                                            `[KeyManager#fetchAuthToken] Failed to return a signed transaction,
          error: ` + P.error
                                        ))
                                    )
                                } catch {
                                    throw new Error(
                                        `[KeyManager#fetchAuthToken] Failed to return a signed transaction,
          error code ` +
                                            c.status +
                                            ` and status text
          "` +
                                            w +
                                            '"'
                                    )
                                }
                                z.label = 11
                            case 11:
                                return [4, c.text()]
                            case 12:
                                b = z.sent()
                                try {
                                    if (
                                        ((D = JSON.parse(b)),
                                        (W = D.token),
                                        (K = D.message),
                                        (j = D.status),
                                        j === !1 && K)
                                    )
                                        throw new Error(K)
                                    return [2, W]
                                } catch {
                                    throw new Error(
                                        `[KeyManager#fetchAuthToken] Failed to validate signed transaction
        response, server responded with ` + b
                                    )
                                }
                                return [2]
                        }
                    })
                })
            }),
            (e.prototype.changePassword = function (r) {
                return O.__awaiter(this, void 0, void 0, function () {
                    var t,
                        i,
                        o,
                        n,
                        s = this
                    return O.__generator(this, function (l) {
                        switch (l.label) {
                            case 0:
                                return (
                                    (t = r.oldPassword),
                                    (i = r.newPassword),
                                    [4, this.keyStore.loadAllKeys()]
                                )
                            case 1:
                                return (
                                    (o = l.sent()),
                                    [
                                        4,
                                        Promise.all(
                                            o.map(function (a) {
                                                return O.__awaiter(s, void 0, void 0, function () {
                                                    var p, d
                                                    return O.__generator(this, function (f) {
                                                        switch (f.label) {
                                                            case 0:
                                                                return (
                                                                    (p =
                                                                        this.encrypterMap[
                                                                            a.encrypterName
                                                                        ]),
                                                                    [
                                                                        4,
                                                                        p.decryptKey({
                                                                            encryptedKey: a,
                                                                            password: t,
                                                                        }),
                                                                    ]
                                                                )
                                                            case 1:
                                                                return (
                                                                    (d = f.sent()),
                                                                    this._writeIndexCache(d.id, d),
                                                                    [
                                                                        2,
                                                                        p.encryptKey({
                                                                            key: d,
                                                                            password: i,
                                                                        }),
                                                                    ]
                                                                )
                                                        }
                                                    })
                                                })
                                            })
                                        ),
                                    ]
                                )
                            case 2:
                                return (n = l.sent()), [2, this.keyStore.updateKeys(n)]
                        }
                    })
                })
            }),
            (e.prototype._readFromCache = function (r) {
                if (this.shouldCache) return this.keyCache[r]
            }),
            (e.prototype._writeIndexCache = function (r, t) {
                this.shouldCache && t && (this.keyCache[r] = t)
            }),
            e
        )
    })()
function De(e) {
    var r = e.id
    return { id: r }
}
var ei = 'stellarkeys',
    hs = (function () {
        function e() {
            ;(this.storage = null), (this.prefix = ei)
        }
        return (
            (e.prototype.configure = function (r) {
                Object.assign(this, r)
            }),
            (e.prototype.hasKey = function (r) {
                return O.__awaiter(this, void 0, void 0, function () {
                    var t, i, o
                    return O.__generator(this, function (n) {
                        switch (n.label) {
                            case 0:
                                return (
                                    this.check(),
                                    this.storage === null
                                        ? [3, 2]
                                        : ((o = (i = Object).keys),
                                          [4, this.storage.get(this.prefix + ':' + r)])
                                )
                            case 1:
                                return (t = !!o.apply(i, [n.sent()]).length), [3, 3]
                            case 2:
                                ;(t = null), (n.label = 3)
                            case 3:
                                return [2, t]
                        }
                    })
                })
            }),
            (e.prototype.getKey = function (r) {
                return O.__awaiter(this, void 0, void 0, function () {
                    var t, i, o, n
                    return O.__generator(this, function (s) {
                        switch (s.label) {
                            case 0:
                                return (
                                    this.check(),
                                    (t = this.prefix + ':' + r),
                                    this.storage === null ? [3, 2] : [4, this.storage.get(t)]
                                )
                            case 1:
                                return (o = s.sent()), [3, 3]
                            case 2:
                                ;(o = null), (s.label = 3)
                            case 3:
                                return (i = o), (n = i[t]), [2, n || null]
                        }
                    })
                })
            }),
            (e.prototype.setKey = function (r, t) {
                var i
                return (
                    this.check(),
                    this.storage !== null
                        ? this.storage.set(
                              ((i = {}), (i[this.prefix + ':' + r] = O.__assign({}, t)), i)
                          )
                        : null
                )
            }),
            (e.prototype.removeKey = function (r) {
                return (
                    this.check(),
                    this.storage !== null ? this.storage.remove(this.prefix + ':' + r) : null
                )
            }),
            (e.prototype.getAllKeys = function () {
                return O.__awaiter(this, void 0, void 0, function () {
                    var r, t, i, o, n, s, l, a, p
                    return O.__generator(this, function (d) {
                        switch (d.label) {
                            case 0:
                                return (
                                    this.check(),
                                    (r = RegExp('^' + ei + '\\:(.*)')),
                                    (t = []),
                                    this.storage === null ? [3, 5] : [4, this.storage.get(null)]
                                )
                            case 1:
                                ;(i = d.sent()),
                                    (o = Object.keys(i)),
                                    (n = 0),
                                    (s = o),
                                    (d.label = 2)
                            case 2:
                                return n < s.length
                                    ? ((l = s[n]),
                                      (a = l),
                                      a !== null && r.test(a)
                                          ? [4, this.getKey(r.exec(a)[1])]
                                          : [3, 4])
                                    : [3, 5]
                            case 3:
                                ;(p = d.sent()), p !== null && t.push(p), (d.label = 4)
                            case 4:
                                return n++, [3, 2]
                            case 5:
                                return [2, t]
                        }
                    })
                })
            }),
            (e.prototype.check = function () {
                if (this.storage === null) throw new Error('A storage object must have been set')
                if (this.prefix === '') throw new Error('A non-empty prefix must have been set')
                return this.storage !== null && this.prefix !== ''
            }),
            e
        )
    })(),
    Es = (function () {
        function e() {
            ;(this.name = 'BrowserStorageKeyStore'), (this.keyStore = new hs())
        }
        return (
            (e.prototype.configure = function (r) {
                try {
                    return this.keyStore.configure(r), Promise.resolve()
                } catch (t) {
                    return Promise.reject(t)
                }
            }),
            (e.prototype.storeKeys = function (r) {
                return O.__awaiter(this, void 0, void 0, function () {
                    var t, i, o, p, n, s, l, a, p
                    return O.__generator(this, function (d) {
                        switch (d.label) {
                            case 0:
                                ;(t = []), (i = 0), (o = r), (d.label = 1)
                            case 1:
                                return i < o.length
                                    ? ((p = o[i]), [4, this.keyStore.hasKey(p.id)])
                                    : [3, 4]
                            case 2:
                                ;(n = d.sent()), n && t.push(p), (d.label = 3)
                            case 3:
                                return i++, [3, 1]
                            case 4:
                                if (t.length)
                                    return [
                                        2,
                                        Promise.reject(
                                            'Some keys were already stored in the keystore: ' +
                                                t
                                                    .map(function (f) {
                                                        return f.id
                                                    })
                                                    .join(', ')
                                        ),
                                    ]
                                for (s = [], l = 0, a = r; l < a.length; l++)
                                    (p = a[l]), this.keyStore.setKey(p.id, p), s.push(De(p))
                                return [2, Promise.resolve(s)]
                        }
                    })
                })
            }),
            (e.prototype.updateKeys = function (r) {
                var t = this,
                    i = r.filter(function (n) {
                        return O.__awaiter(t, void 0, void 0, function () {
                            return O.__generator(this, function (s) {
                                switch (s.label) {
                                    case 0:
                                        return [4, this.keyStore.hasKey(n.id)]
                                    case 1:
                                        return [2, !s.sent()]
                                }
                            })
                        })
                    })
                if (i.length)
                    return Promise.reject(
                        "Some keys couldn't be found in the keystore: " +
                            i
                                .map(function (n) {
                                    return n.id
                                })
                                .join(', ')
                    )
                var o = r.map(function (n) {
                    return t.keyStore.setKey(n.id, n), De(n)
                })
                return Promise.resolve(o)
            }),
            (e.prototype.loadKey = function (r) {
                return O.__awaiter(this, void 0, void 0, function () {
                    var t
                    return O.__generator(this, function (i) {
                        switch (i.label) {
                            case 0:
                                return [4, this.keyStore.getKey(r)]
                            case 1:
                                return (
                                    (t = i.sent()),
                                    t ? [2, Promise.resolve(t)] : [2, Promise.reject(r)]
                                )
                        }
                    })
                })
            }),
            (e.prototype.removeKey = function (r) {
                return O.__awaiter(this, void 0, void 0, function () {
                    var t, i
                    return O.__generator(this, function (o) {
                        switch (o.label) {
                            case 0:
                                return this.keyStore.hasKey(r)
                                    ? [4, this.keyStore.getKey(r)]
                                    : [2, Promise.reject(r)]
                            case 1:
                                return (
                                    (t = o.sent()),
                                    (i = De(t)),
                                    this.keyStore.removeKey(r),
                                    [2, Promise.resolve(i)]
                                )
                        }
                    })
                })
            }),
            (e.prototype.loadAllKeys = function () {
                return O.__awaiter(this, void 0, void 0, function () {
                    var r
                    return O.__generator(this, function (t) {
                        switch (t.label) {
                            case 0:
                                return [4, this.keyStore.getAllKeys()]
                            case 1:
                                return (r = t.sent()), [2, Promise.resolve(r)]
                        }
                    })
                })
            }),
            e
        )
    })(),
    ri = 'IdentityEncrypter',
    _s = {
        name: ri,
        encryptKey: function (e) {
            var r = e.key,
                t = r.type,
                i = r.privateKey,
                o = r.publicKey,
                n = r.path,
                s = r.extra,
                l = O.__rest(r, ['type', 'privateKey', 'publicKey', 'path', 'extra'])
            return Promise.resolve(
                O.__assign({}, l, {
                    encryptedBlob: JSON.stringify({
                        type: t,
                        publicKey: o,
                        privateKey: i,
                        path: n,
                        extra: s,
                    }),
                    encrypterName: ri,
                    salt: 'identity',
                })
            )
        },
        decryptKey: function (e) {
            var r = e.encryptedKey,
                t = r
            t.encrypterName, t.salt
            var i = t.encryptedBlob,
                o = O.__rest(t, ['encrypterName', 'salt', 'encryptedBlob']),
                n = JSON.parse(i)
            return Promise.resolve(O.__assign({}, o, n))
        },
    },
    vs = (function () {
        function e() {
            ;(this.storage = null), (this.prefix = 'stellarkeys')
        }
        return (
            (e.prototype.configure = function (r) {
                Object.assign(this, r)
            }),
            (e.prototype.hasKey = function (r) {
                return (
                    this.check(),
                    this.storage !== null
                        ? this.storage.getItem(this.prefix + ':' + r) !== null
                        : null
                )
            }),
            (e.prototype.getKey = function (r) {
                this.check()
                var t = this.storage !== null ? this.storage.getItem(this.prefix + ':' + r) : null
                return t ? JSON.parse(t) : null
            }),
            (e.prototype.setKey = function (r, t) {
                return (
                    this.check(),
                    this.storage !== null
                        ? this.storage.setItem(
                              this.prefix + ':' + r,
                              JSON.stringify(O.__assign({}, t))
                          )
                        : null
                )
            }),
            (e.prototype.removeKey = function (r) {
                return (
                    this.check(),
                    this.storage !== null ? this.storage.removeItem(this.prefix + ':' + r) : null
                )
            }),
            (e.prototype.getAllKeys = function () {
                this.check()
                var r = RegExp('^' + this.prefix + '\\:(.*)'),
                    t = []
                if (this.storage !== null)
                    for (var i = 0; i < this.storage.length; i++) {
                        var o = this.storage.key(i)
                        if (o !== null && r.test(o)) {
                            var n = this.getKey(r.exec(o)[1])
                            n !== null && t.push(n)
                        }
                    }
                return t
            }),
            (e.prototype.check = function () {
                if (this.storage === null) throw new Error('A storage object must have been set')
                if (this.prefix === '') throw new Error('A non-empty prefix must have been set')
                return this.storage !== null && this.prefix !== ''
            }),
            e
        )
    })(),
    gs = (function () {
        function e() {
            ;(this.name = 'LocalStorageKeyStore'), (this.keyStore = new vs())
        }
        return (
            (e.prototype.configure = function (r) {
                try {
                    return this.keyStore.configure(r), Promise.resolve()
                } catch (t) {
                    return Promise.reject(t)
                }
            }),
            (e.prototype.storeKeys = function (r) {
                var t = this,
                    i = r.filter(function (n) {
                        return t.keyStore.hasKey(n.id)
                    })
                if (i.length)
                    return Promise.reject(
                        'Some keys were already stored in the keystore: ' +
                            i
                                .map(function (n) {
                                    return n.id
                                })
                                .join(', ')
                    )
                var o = r.map(function (n) {
                    return t.keyStore.setKey(n.id, n), De(n)
                })
                return Promise.resolve(o)
            }),
            (e.prototype.updateKeys = function (r) {
                var t = this,
                    i = r.filter(function (n) {
                        return !t.keyStore.hasKey(n.id)
                    })
                if (i.length)
                    return Promise.reject(
                        "Some keys couldn't be found in the keystore: " +
                            i
                                .map(function (n) {
                                    return n.id
                                })
                                .join(', ')
                    )
                var o = r.map(function (n) {
                    return t.keyStore.setKey(n.id, n), De(n)
                })
                return Promise.resolve(o)
            }),
            (e.prototype.loadKey = function (r) {
                var t = this.keyStore.getKey(r)
                return t ? Promise.resolve(t) : Promise.reject(r)
            }),
            (e.prototype.removeKey = function (r) {
                if (!this.keyStore.hasKey(r)) return Promise.reject(r)
                var t = De(this.keyStore.getKey(r))
                return this.keyStore.removeKey(r), Promise.resolve(t)
            }),
            (e.prototype.loadAllKeys = function () {
                return Promise.resolve(this.keyStore.getAllKeys())
            }),
            e
        )
    })(),
    ms = (function () {
        function e() {
            ;(this.name = 'MemoryKeyStore'), (this.keyStore = {})
        }
        return (
            (e.prototype.configure = function () {
                return Promise.resolve()
            }),
            (e.prototype.storeKeys = function (r) {
                var t = this,
                    i = r.filter(function (n) {
                        return !!t.keyStore[n.id]
                    })
                if (i.length)
                    return Promise.reject(
                        'Some keys were already stored in the keystore: ' +
                            i
                                .map(function (n) {
                                    return n.id
                                })
                                .join(', ')
                    )
                var o = r.map(function (n) {
                    return (t.keyStore[n.id] = O.__assign({}, n)), De(t.keyStore[n.id])
                })
                return Promise.resolve(o)
            }),
            (e.prototype.updateKeys = function (r) {
                var t = this,
                    i = r.filter(function (n) {
                        return !t.keyStore[n.id]
                    })
                if (i.length)
                    return Promise.reject(
                        "Some keys couldn't be found in the keystore: " +
                            i
                                .map(function (n) {
                                    return n.id
                                })
                                .join(', ')
                    )
                var o = r.map(function (n) {
                    var s = n.id
                    return (t.keyStore[s] = O.__assign({}, n)), De(t.keyStore[s])
                })
                return Promise.resolve(o)
            }),
            (e.prototype.loadKey = function (r) {
                return Promise.resolve(this.keyStore[r])
            }),
            (e.prototype.removeKey = function (r) {
                if (!this.keyStore[r]) return Promise.reject(r)
                var t = De(this.keyStore[r])
                return delete this.keyStore[r], Promise.resolve(t)
            }),
            (e.prototype.loadAllKeys = function () {
                return Promise.resolve(
                    Object.values(this.keyStore).map(function (r) {
                        return r
                    })
                )
            }),
            e
        )
    })(),
    rt = {},
    ys = {
        get exports() {
            return rt
        },
        set exports(e) {
            rt = e
        },
    }
/*!
 * Fast "async" scrypt implementation in JavaScript.
 * Copyright (c) 2013-2016 Dmitry Chestnykh | BSD License
 * https://github.com/dchest/scrypt-async-js
 */ ;(function (e) {
    function r(t, i, o, n, s, l, a, p) {
        function d(g) {
            var v = [
                    1116352408, 1899447441, 3049323471, 3921009573, 961987163, 1508970993,
                    2453635748, 2870763221, 3624381080, 310598401, 607225278, 1426881987,
                    1925078388, 2162078206, 2614888103, 3248222580, 3835390401, 4022224774,
                    264347078, 604807628, 770255983, 1249150122, 1555081692, 1996064986, 2554220882,
                    2821834349, 2952996808, 3210313671, 3336571891, 3584528711, 113926993,
                    338241895, 666307205, 773529912, 1294757372, 1396182291, 1695183700, 1986661051,
                    2177026350, 2456956037, 2730485921, 2820302411, 3259730800, 3345764771,
                    3516065817, 3600352804, 4094571909, 275423344, 430227734, 506948616, 659060556,
                    883997877, 958139571, 1322822218, 1537002063, 1747873779, 1955562222,
                    2024104815, 2227730452, 2361852424, 2428436474, 2756734187, 3204031479,
                    3329325298,
                ],
                A = 1779033703,
                T = 3144134277,
                V = 1013904242,
                J = 2773480762,
                ne = 1359893119,
                ee = 2600822924,
                re = 528734635,
                ae = 1541459225,
                Z = new Array(64)
            function ar(Le) {
                for (var sr = 0, C = Le.length; C >= 64; ) {
                    var de = A,
                        Ee = T,
                        _e = V,
                        Ie = J,
                        ue = ne,
                        Re = ee,
                        Oe = re,
                        Ne = ae,
                        se,
                        ie,
                        ve,
                        ge,
                        be
                    for (ie = 0; ie < 16; ie++)
                        (ve = sr + ie * 4),
                            (Z[ie] =
                                ((Le[ve] & 255) << 24) |
                                ((Le[ve + 1] & 255) << 16) |
                                ((Le[ve + 2] & 255) << 8) |
                                (Le[ve + 3] & 255))
                    for (ie = 16; ie < 64; ie++)
                        (se = Z[ie - 2]),
                            (ge =
                                ((se >>> 17) | (se << (32 - 17))) ^
                                ((se >>> 19) | (se << (32 - 19))) ^
                                (se >>> 10)),
                            (se = Z[ie - 15]),
                            (be =
                                ((se >>> 7) | (se << (32 - 7))) ^
                                ((se >>> 18) | (se << (32 - 18))) ^
                                (se >>> 3)),
                            (Z[ie] = (((ge + Z[ie - 7]) | 0) + ((be + Z[ie - 16]) | 0)) | 0)
                    for (ie = 0; ie < 64; ie++)
                        (ge =
                            ((((((ue >>> 6) | (ue << (32 - 6))) ^
                                ((ue >>> 11) | (ue << (32 - 11))) ^
                                ((ue >>> 25) | (ue << (32 - 25)))) +
                                ((ue & Re) ^ (~ue & Oe))) |
                                0) +
                                ((Ne + ((v[ie] + Z[ie]) | 0)) | 0)) |
                            0),
                            (be =
                                ((((de >>> 2) | (de << (32 - 2))) ^
                                    ((de >>> 13) | (de << (32 - 13))) ^
                                    ((de >>> 22) | (de << (32 - 22)))) +
                                    ((de & Ee) ^ (de & _e) ^ (Ee & _e))) |
                                0),
                            (Ne = Oe),
                            (Oe = Re),
                            (Re = ue),
                            (ue = (Ie + ge) | 0),
                            (Ie = _e),
                            (_e = Ee),
                            (Ee = de),
                            (de = (ge + be) | 0)
                    ;(A = (A + de) | 0),
                        (T = (T + Ee) | 0),
                        (V = (V + _e) | 0),
                        (J = (J + Ie) | 0),
                        (ne = (ne + ue) | 0),
                        (ee = (ee + Re) | 0),
                        (re = (re + Oe) | 0),
                        (ae = (ae + Ne) | 0),
                        (sr += 64),
                        (C -= 64)
                }
            }
            ar(g)
            var Ze,
                er = g.length % 64,
                We = (g.length / 536870912) | 0,
                Qe = g.length << 3,
                _r = er < 56 ? 56 : 120,
                pe = g.slice(g.length - er, g.length)
            for (pe.push(128), Ze = er + 1; Ze < _r; Ze++) pe.push(0)
            return (
                pe.push((We >>> 24) & 255),
                pe.push((We >>> 16) & 255),
                pe.push((We >>> 8) & 255),
                pe.push((We >>> 0) & 255),
                pe.push((Qe >>> 24) & 255),
                pe.push((Qe >>> 16) & 255),
                pe.push((Qe >>> 8) & 255),
                pe.push((Qe >>> 0) & 255),
                ar(pe),
                [
                    (A >>> 24) & 255,
                    (A >>> 16) & 255,
                    (A >>> 8) & 255,
                    (A >>> 0) & 255,
                    (T >>> 24) & 255,
                    (T >>> 16) & 255,
                    (T >>> 8) & 255,
                    (T >>> 0) & 255,
                    (V >>> 24) & 255,
                    (V >>> 16) & 255,
                    (V >>> 8) & 255,
                    (V >>> 0) & 255,
                    (J >>> 24) & 255,
                    (J >>> 16) & 255,
                    (J >>> 8) & 255,
                    (J >>> 0) & 255,
                    (ne >>> 24) & 255,
                    (ne >>> 16) & 255,
                    (ne >>> 8) & 255,
                    (ne >>> 0) & 255,
                    (ee >>> 24) & 255,
                    (ee >>> 16) & 255,
                    (ee >>> 8) & 255,
                    (ee >>> 0) & 255,
                    (re >>> 24) & 255,
                    (re >>> 16) & 255,
                    (re >>> 8) & 255,
                    (re >>> 0) & 255,
                    (ae >>> 24) & 255,
                    (ae >>> 16) & 255,
                    (ae >>> 8) & 255,
                    (ae >>> 0) & 255,
                ]
            )
        }
        function f(g, v, A) {
            g.length > 64 && (g = d(g.push ? g : Array.prototype.slice.call(g, 0)))
            var T,
                V = 64 + v.length + 4,
                J = new Array(V),
                ne = new Array(64),
                ee = []
            for (T = 0; T < 64; T++) J[T] = 54
            for (T = 0; T < g.length; T++) J[T] ^= g[T]
            for (T = 0; T < v.length; T++) J[64 + T] = v[T]
            for (T = V - 4; T < V; T++) J[T] = 0
            for (T = 0; T < 64; T++) ne[T] = 92
            for (T = 0; T < g.length; T++) ne[T] ^= g[T]
            function re() {
                for (var ae = V - 1; ae >= V - 4; ae--) {
                    if ((J[ae]++, J[ae] <= 255)) return
                    J[ae] = 0
                }
            }
            for (; A >= 32; ) re(), (ee = ee.concat(d(ne.concat(d(J))))), (A -= 32)
            return A > 0 && (re(), (ee = ee.concat(d(ne.concat(d(J))).slice(0, A)))), ee
        }
        function u(g, v, A, T) {
            var V = g[0] ^ v[A++],
                J = g[1] ^ v[A++],
                ne = g[2] ^ v[A++],
                ee = g[3] ^ v[A++],
                re = g[4] ^ v[A++],
                ae = g[5] ^ v[A++],
                Z = g[6] ^ v[A++],
                ar = g[7] ^ v[A++],
                Ze = g[8] ^ v[A++],
                er = g[9] ^ v[A++],
                We = g[10] ^ v[A++],
                Qe = g[11] ^ v[A++],
                _r = g[12] ^ v[A++],
                pe = g[13] ^ v[A++],
                Le = g[14] ^ v[A++],
                sr = g[15] ^ v[A++],
                C,
                de,
                Ee = V,
                _e = J,
                Ie = ne,
                ue = ee,
                Re = re,
                Oe = ae,
                Ne = Z,
                se = ar,
                ie = Ze,
                ve = er,
                ge = We,
                be = Qe,
                je = _r,
                He = pe,
                ze = Le,
                Ve = sr
            for (de = 0; de < 8; de += 2)
                (C = Ee + je),
                    (Re ^= (C << 7) | (C >>> (32 - 7))),
                    (C = Re + Ee),
                    (ie ^= (C << 9) | (C >>> (32 - 9))),
                    (C = ie + Re),
                    (je ^= (C << 13) | (C >>> (32 - 13))),
                    (C = je + ie),
                    (Ee ^= (C << 18) | (C >>> (32 - 18))),
                    (C = Oe + _e),
                    (ve ^= (C << 7) | (C >>> (32 - 7))),
                    (C = ve + Oe),
                    (He ^= (C << 9) | (C >>> (32 - 9))),
                    (C = He + ve),
                    (_e ^= (C << 13) | (C >>> (32 - 13))),
                    (C = _e + He),
                    (Oe ^= (C << 18) | (C >>> (32 - 18))),
                    (C = ge + Ne),
                    (ze ^= (C << 7) | (C >>> (32 - 7))),
                    (C = ze + ge),
                    (Ie ^= (C << 9) | (C >>> (32 - 9))),
                    (C = Ie + ze),
                    (Ne ^= (C << 13) | (C >>> (32 - 13))),
                    (C = Ne + Ie),
                    (ge ^= (C << 18) | (C >>> (32 - 18))),
                    (C = Ve + be),
                    (ue ^= (C << 7) | (C >>> (32 - 7))),
                    (C = ue + Ve),
                    (se ^= (C << 9) | (C >>> (32 - 9))),
                    (C = se + ue),
                    (be ^= (C << 13) | (C >>> (32 - 13))),
                    (C = be + se),
                    (Ve ^= (C << 18) | (C >>> (32 - 18))),
                    (C = Ee + ue),
                    (_e ^= (C << 7) | (C >>> (32 - 7))),
                    (C = _e + Ee),
                    (Ie ^= (C << 9) | (C >>> (32 - 9))),
                    (C = Ie + _e),
                    (ue ^= (C << 13) | (C >>> (32 - 13))),
                    (C = ue + Ie),
                    (Ee ^= (C << 18) | (C >>> (32 - 18))),
                    (C = Oe + Re),
                    (Ne ^= (C << 7) | (C >>> (32 - 7))),
                    (C = Ne + Oe),
                    (se ^= (C << 9) | (C >>> (32 - 9))),
                    (C = se + Ne),
                    (Re ^= (C << 13) | (C >>> (32 - 13))),
                    (C = Re + se),
                    (Oe ^= (C << 18) | (C >>> (32 - 18))),
                    (C = ge + ve),
                    (be ^= (C << 7) | (C >>> (32 - 7))),
                    (C = be + ge),
                    (ie ^= (C << 9) | (C >>> (32 - 9))),
                    (C = ie + be),
                    (ve ^= (C << 13) | (C >>> (32 - 13))),
                    (C = ve + ie),
                    (ge ^= (C << 18) | (C >>> (32 - 18))),
                    (C = Ve + ze),
                    (je ^= (C << 7) | (C >>> (32 - 7))),
                    (C = je + Ve),
                    (He ^= (C << 9) | (C >>> (32 - 9))),
                    (C = He + je),
                    (ze ^= (C << 13) | (C >>> (32 - 13))),
                    (C = ze + He),
                    (Ve ^= (C << 18) | (C >>> (32 - 18)))
            ;(v[T++] = g[0] = (Ee + V) | 0),
                (v[T++] = g[1] = (_e + J) | 0),
                (v[T++] = g[2] = (Ie + ne) | 0),
                (v[T++] = g[3] = (ue + ee) | 0),
                (v[T++] = g[4] = (Re + re) | 0),
                (v[T++] = g[5] = (Oe + ae) | 0),
                (v[T++] = g[6] = (Ne + Z) | 0),
                (v[T++] = g[7] = (se + ar) | 0),
                (v[T++] = g[8] = (ie + Ze) | 0),
                (v[T++] = g[9] = (ve + er) | 0),
                (v[T++] = g[10] = (ge + We) | 0),
                (v[T++] = g[11] = (be + Qe) | 0),
                (v[T++] = g[12] = (je + _r) | 0),
                (v[T++] = g[13] = (He + pe) | 0),
                (v[T++] = g[14] = (ze + Le) | 0),
                (v[T++] = g[15] = (Ve + sr) | 0)
        }
        function E(g, v, A, T, V) {
            for (; V--; ) g[v++] = A[T++]
        }
        function S(g, v, A, T, V) {
            for (; V--; ) g[v++] ^= A[T++]
        }
        function m(g, v, A, T, V) {
            E(g, 0, v, A + (2 * V - 1) * 16, 16)
            for (var J = 0; J < 2 * V; J += 2)
                u(g, v, A + J * 16, T + J * 8), u(g, v, A + J * 16 + 16, T + J * 8 + V * 16)
        }
        function R(g, v, A) {
            return g[v + (2 * A - 1) * 16]
        }
        function h(g) {
            for (var v = [], A = 0; A < g.length; A++) {
                var T = g.charCodeAt(A)
                if (T < 128) v.push(T)
                else if (T < 2048) v.push(192 | (T >> 6)), v.push(128 | (T & 63))
                else if (T < 55296)
                    v.push(224 | (T >> 12)), v.push(128 | ((T >> 6) & 63)), v.push(128 | (T & 63))
                else {
                    if (A >= g.length - 1) throw new Error('invalid string')
                    A++,
                        (T = (T & 1023) << 10),
                        (T |= g.charCodeAt(A) & 1023),
                        (T += 65536),
                        v.push(240 | (T >> 18)),
                        v.push(128 | ((T >> 12) & 63)),
                        v.push(128 | ((T >> 6) & 63)),
                        v.push(128 | (T & 63))
                }
            }
            return v
        }
        function _(g) {
            for (var v = '0123456789abcdef'.split(''), A = g.length, T = [], V = 0; V < A; V++)
                T.push(v[(g[V] >>> 4) & 15]), T.push(v[(g[V] >>> 0) & 15])
            return T.join('')
        }
        function y(g) {
            for (
                var v = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'.split(
                        ''
                    ),
                    A = g.length,
                    T = [],
                    V = 0,
                    J,
                    ne,
                    ee,
                    re;
                V < A;

            )
                (J = V < A ? g[V++] : 0),
                    (ne = V < A ? g[V++] : 0),
                    (ee = V < A ? g[V++] : 0),
                    (re = (J << 16) + (ne << 8) + ee),
                    T.push(v[(re >>> (3 * 6)) & 63]),
                    T.push(v[(re >>> (2 * 6)) & 63]),
                    T.push(v[(re >>> (1 * 6)) & 63]),
                    T.push(v[(re >>> (0 * 6)) & 63])
            return (
                A % 3 > 0 && ((T[T.length - 1] = '='), A % 3 === 1 && (T[T.length - 2] = '=')),
                T.join('')
            )
        }
        var c = -1 >>> 0,
            w = 1
        if (typeof o == 'object') {
            if (arguments.length > 4) throw new Error('scrypt: incorrect number of arguments')
            var P = o
            if (((a = n), (o = P.logN), typeof o > 'u'))
                if (typeof P.N < 'u') {
                    if (P.N < 2 || P.N > c) throw new Error('scrypt: N is out of range')
                    if (P.N & (P.N - 1)) throw new Error('scrypt: N is not a power of 2')
                    o = Math.log(P.N) / Math.LN2
                } else throw new Error('scrypt: missing N parameter')
            ;(w = P.p || 1),
                (n = P.r),
                (s = P.dkLen || 32),
                (l = P.interruptStep || 0),
                (p = P.encoding)
        }
        if (w < 1) throw new Error('scrypt: invalid p')
        if (n <= 0) throw new Error('scrypt: invalid r')
        if (o < 1 || o > 31) throw new Error('scrypt: logN must be between 1 and 31')
        var b = (1 << o) >>> 0,
            D,
            W,
            K,
            j
        if (n * w >= 1 << 30 || n > c / 128 / w || n > c / 256 || b > c / 128 / n)
            throw new Error('scrypt: parameters are too large')
        typeof t == 'string' && (t = h(t)),
            typeof i == 'string' && (i = h(i)),
            typeof Int32Array < 'u'
                ? ((D = new Int32Array(64 * n)),
                  (W = new Int32Array(32 * b * n)),
                  (j = new Int32Array(16)))
                : ((D = []), (W = []), (j = new Array(16))),
            (K = f(t, i, w * 128 * n))
        var z = 0,
            H = 32 * n
        function he(g) {
            for (var v = 0; v < 32 * n; v++) {
                var A = g + v * 4
                D[z + v] =
                    ((K[A + 3] & 255) << 24) |
                    ((K[A + 2] & 255) << 16) |
                    ((K[A + 1] & 255) << 8) |
                    ((K[A + 0] & 255) << 0)
            }
        }
        function k(g, v) {
            for (var A = g; A < v; A += 2)
                E(W, A * (32 * n), D, z, 32 * n),
                    m(j, D, z, H, n),
                    E(W, (A + 1) * (32 * n), D, H, 32 * n),
                    m(j, D, H, z, n)
        }
        function I(g, v) {
            for (var A = g; A < v; A += 2) {
                var T = R(D, z, n) & (b - 1)
                S(D, z, W, T * (32 * n), 32 * n),
                    m(j, D, z, H, n),
                    (T = R(D, H, n) & (b - 1)),
                    S(D, H, W, T * (32 * n), 32 * n),
                    m(j, D, H, z, n)
            }
        }
        function L(g) {
            for (var v = 0; v < 32 * n; v++) {
                var A = D[z + v]
                ;(K[g + v * 4 + 0] = (A >>> 0) & 255),
                    (K[g + v * 4 + 1] = (A >>> 8) & 255),
                    (K[g + v * 4 + 2] = (A >>> 16) & 255),
                    (K[g + v * 4 + 3] = (A >>> 24) & 255)
            }
        }
        var Q = typeof setImmediate < 'u' ? setImmediate : setTimeout
        function U(g, v, A, T, V) {
            ;(function J() {
                Q(function () {
                    T(g, g + A < v ? g + A : v), (g += A), g < v ? J() : V()
                })
            })()
        }
        function x(g) {
            var v = f(t, K, s)
            return g === 'base64'
                ? y(v)
                : g === 'hex'
                ? _(v)
                : g === 'binary'
                ? new Uint8Array(v)
                : v
        }
        function B() {
            for (var g = 0; g < w; g++) he(g * 128 * n), k(0, b), I(0, b), L(g * 128 * n)
            a(x(p))
        }
        function G(g) {
            he(g * 128 * n),
                U(0, b, l * 2, k, function () {
                    U(0, b, l * 2, I, function () {
                        L(g * 128 * n),
                            g + 1 < w
                                ? Q(function () {
                                      G(g + 1)
                                  })
                                : a(x(p))
                    })
                })
        }
        typeof l == 'function' && ((p = a), (a = l), (l = 1e3)), l <= 0 ? B() : G(0)
    }
    e.exports = r
})(ys)
const Ss = rt
var tt = {},
    Ts = {
        get exports() {
            return tt
        },
        set exports(e) {
            tt = e
        },
    }
;(function (e) {
    ;(function (r, t) {
        e.exports ? (e.exports = t()) : (r.nacl || (r.nacl = {}), (r.nacl.util = t()))
    })(Xe, function () {
        var r = {}
        function t(i) {
            if (
                !/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/.test(
                    i
                )
            )
                throw new TypeError('invalid encoding')
        }
        return (
            (r.decodeUTF8 = function (i) {
                if (typeof i != 'string') throw new TypeError('expected string')
                var o,
                    n = unescape(encodeURIComponent(i)),
                    s = new Uint8Array(n.length)
                for (o = 0; o < n.length; o++) s[o] = n.charCodeAt(o)
                return s
            }),
            (r.encodeUTF8 = function (i) {
                var o,
                    n = []
                for (o = 0; o < i.length; o++) n.push(String.fromCharCode(i[o]))
                return decodeURIComponent(escape(n.join('')))
            }),
            typeof atob > 'u'
                ? typeof Buffer.from < 'u'
                    ? ((r.encodeBase64 = function (i) {
                          return Buffer.from(i).toString('base64')
                      }),
                      (r.decodeBase64 = function (i) {
                          return (
                              t(i),
                              new Uint8Array(
                                  Array.prototype.slice.call(Buffer.from(i, 'base64'), 0)
                              )
                          )
                      }))
                    : ((r.encodeBase64 = function (i) {
                          return new Buffer(i).toString('base64')
                      }),
                      (r.decodeBase64 = function (i) {
                          return (
                              t(i),
                              new Uint8Array(Array.prototype.slice.call(new Buffer(i, 'base64'), 0))
                          )
                      }))
                : ((r.encodeBase64 = function (i) {
                      var o,
                          n = [],
                          s = i.length
                      for (o = 0; o < s; o++) n.push(String.fromCharCode(i[o]))
                      return btoa(n.join(''))
                  }),
                  (r.decodeBase64 = function (i) {
                      t(i)
                      var o,
                          n = atob(i),
                          s = new Uint8Array(n.length)
                      for (o = 0; o < n.length; o++) s[o] = n.charCodeAt(o)
                      return s
                  })),
            r
        )
    })
})(Ts)
const pr = tt
var ws = 32,
    nt = qe.secretbox.nonceLength
qe.secretbox.keyLength
var Bi = 1,
    Rs = Bi,
    Os = qe.secretbox.keyLength
function Fi(e) {
    var r = e.password,
        t = e.salt,
        i = e.dkLen,
        o = i === void 0 ? Os : i,
        n = [32768, 8, 1],
        s = n[0],
        l = n[1],
        a = n[2]
    return new Promise(function (p, d) {
        Ss(r, t, { N: s, r: l, p: a, dkLen: o, encoding: 'binary' }, function (f) {
            f ? p(f) : d(new Error('scryptPass failed, derivedKey is null'))
        })
    })
}
function bs() {
    return pr.encodeBase64(qe.randomBytes(ws))
}
function Is(e) {
    return O.__awaiter(this, void 0, void 0, function () {
        var r, t, i, o, n, s, l, a, p, d
        return O.__generator(this, function (f) {
            switch (f.label) {
                case 0:
                    return (
                        (r = e.phrase),
                        (t = e.password),
                        (i = e.salt),
                        (o = e.nonce),
                        (n = i || bs()),
                        (s = o || qe.randomBytes(nt)),
                        [4, Fi({ password: t, salt: n })]
                    )
                case 1:
                    if (((l = f.sent()), (a = pr.decodeUTF8(r)), (p = qe.secretbox(a, s, l)), !p))
                        throw new Error('Encryption failed')
                    return (
                        (d = new Uint8Array(1 + s.length + p.length)),
                        d.set([Rs]),
                        d.set(s, 1),
                        d.set(p, 1 + s.length),
                        [2, { encryptedPhrase: pr.encodeBase64(d), salt: n }]
                    )
            }
        })
    })
}
function Ns(e) {
    return O.__awaiter(this, void 0, void 0, function () {
        var r, t, i, o, n, s, l, a, p
        return O.__generator(this, function (d) {
            switch (d.label) {
                case 0:
                    return (
                        (r = e.phrase),
                        (t = e.password),
                        (i = e.salt),
                        [4, Fi({ password: t, salt: i })]
                    )
                case 1:
                    if (((o = d.sent()), (n = pr.decodeBase64(r)), (s = n[0]), s === Bi))
                        (a = n.slice(1, 1 + nt)),
                            (p = n.slice(1 + nt)),
                            (l = qe.secretbox.open(p, a, o))
                    else throw new Error('Cipher version ' + s + ' not supported.')
                    if (!l) throw new Error('That passphrase wasn’t valid.')
                    return [2, pr.encodeUTF8(l)]
            }
        })
    })
}
var ti = 'ScryptEncrypter',
    As = {
        name: ti,
        encryptKey: function (e) {
            return O.__awaiter(this, void 0, void 0, function () {
                var r, t, i, o, n, s, l, a, p, d, f
                return O.__generator(this, function (u) {
                    switch (u.label) {
                        case 0:
                            return (
                                (r = e.key),
                                (t = e.password),
                                (i = r.privateKey),
                                (o = r.path),
                                (n = r.extra),
                                (s = r.publicKey),
                                (l = r.type),
                                (a = O.__rest(r, [
                                    'privateKey',
                                    'path',
                                    'extra',
                                    'publicKey',
                                    'type',
                                ])),
                                [
                                    4,
                                    Is({
                                        password: t,
                                        phrase: JSON.stringify({
                                            privateKey: i,
                                            path: o,
                                            extra: n,
                                            publicKey: s,
                                            type: l,
                                        }),
                                    }),
                                ]
                            )
                        case 1:
                            return (
                                (p = u.sent()),
                                (d = p.encryptedPhrase),
                                (f = p.salt),
                                [
                                    2,
                                    O.__assign({}, a, {
                                        encryptedBlob: d,
                                        encrypterName: ti,
                                        salt: f,
                                    }),
                                ]
                            )
                    }
                })
            })
        },
        decryptKey: function (e) {
            return O.__awaiter(this, void 0, void 0, function () {
                var r, t, i, o, n, s, l, a
                return O.__generator(this, function (p) {
                    switch (p.label) {
                        case 0:
                            return (
                                (r = e.encryptedKey),
                                (t = e.password),
                                r.encrypterName,
                                (i = r.salt),
                                (o = r.encryptedBlob),
                                (n = O.__rest(r, ['encrypterName', 'salt', 'encryptedBlob'])),
                                (a = (l = JSON).parse),
                                [4, Ns({ phrase: o, salt: i, password: t })]
                            )
                        case 1:
                            return (s = a.apply(l, [p.sent()])), [2, O.__assign({}, n, s)]
                    }
                })
            })
        },
    },
    it = {
        BrowserStorageKeyStore: Es,
        IdentityEncrypter: _s,
        MemoryKeyStore: ms,
        LocalStorageKeyStore: gs,
        ScryptEncrypter: As,
    },
    Fe = {},
    Cs = (e) =>
        encodeURIComponent(e).replace(
            /[!'()*]/g,
            (r) => `%${r.charCodeAt(0).toString(16).toUpperCase()}`
        ),
    qi = '%[a-f0-9]{2}',
    ni = new RegExp('(' + qi + ')|([^%]+?)', 'gi'),
    ii = new RegExp('(' + qi + ')+', 'gi')
function ot(e, r) {
    try {
        return [decodeURIComponent(e.join(''))]
    } catch {}
    if (e.length === 1) return e
    r = r || 1
    var t = e.slice(0, r),
        i = e.slice(r)
    return Array.prototype.concat.call([], ot(t), ot(i))
}
function Ps(e) {
    try {
        return decodeURIComponent(e)
    } catch {
        for (var r = e.match(ni) || [], t = 1; t < r.length; t++)
            (e = ot(r, t).join('')), (r = e.match(ni) || [])
        return e
    }
}
function xs(e) {
    for (var r = { '%FE%FF': '��', '%FF%FE': '��' }, t = ii.exec(e); t; ) {
        try {
            r[t[0]] = decodeURIComponent(t[0])
        } catch {
            var i = Ps(t[0])
            i !== t[0] && (r[t[0]] = i)
        }
        t = ii.exec(e)
    }
    r['%C2'] = '�'
    for (var o = Object.keys(r), n = 0; n < o.length; n++) {
        var s = o[n]
        e = e.replace(new RegExp(s, 'g'), r[s])
    }
    return e
}
var Us = function (e) {
        if (typeof e != 'string')
            throw new TypeError(
                'Expected `encodedURI` to be of type `string`, got `' + typeof e + '`'
            )
        try {
            return (e = e.replace(/\+/g, ' ')), decodeURIComponent(e)
        } catch {
            return xs(e)
        }
    },
    Ms = (e, r) => {
        if (!(typeof e == 'string' && typeof r == 'string'))
            throw new TypeError('Expected the arguments to be of type `string`')
        if (r === '') return [e]
        const t = e.indexOf(r)
        return t === -1 ? [e] : [e.slice(0, t), e.slice(t + r.length)]
    },
    Ds = function (e, r) {
        for (var t = {}, i = Object.keys(e), o = Array.isArray(r), n = 0; n < i.length; n++) {
            var s = i[n],
                l = e[s]
            ;(o ? r.indexOf(s) !== -1 : r(s, l, e)) && (t[s] = l)
        }
        return t
    }
;(function (e) {
    const r = Cs,
        t = Us,
        i = Ms,
        o = Ds,
        n = (h) => h == null
    function s(h) {
        switch (h.arrayFormat) {
            case 'index':
                return (_) => (y, c) => {
                    const w = y.length
                    return c === void 0 ||
                        (h.skipNull && c === null) ||
                        (h.skipEmptyString && c === '')
                        ? y
                        : c === null
                        ? [...y, [p(_, h), '[', w, ']'].join('')]
                        : [...y, [p(_, h), '[', p(w, h), ']=', p(c, h)].join('')]
                }
            case 'bracket':
                return (_) => (y, c) =>
                    c === void 0 || (h.skipNull && c === null) || (h.skipEmptyString && c === '')
                        ? y
                        : c === null
                        ? [...y, [p(_, h), '[]'].join('')]
                        : [...y, [p(_, h), '[]=', p(c, h)].join('')]
            case 'comma':
            case 'separator':
                return (_) => (y, c) =>
                    c == null || c.length === 0
                        ? y
                        : y.length === 0
                        ? [[p(_, h), '=', p(c, h)].join('')]
                        : [[y, p(c, h)].join(h.arrayFormatSeparator)]
            default:
                return (_) => (y, c) =>
                    c === void 0 || (h.skipNull && c === null) || (h.skipEmptyString && c === '')
                        ? y
                        : c === null
                        ? [...y, p(_, h)]
                        : [...y, [p(_, h), '=', p(c, h)].join('')]
        }
    }
    function l(h) {
        let _
        switch (h.arrayFormat) {
            case 'index':
                return (y, c, w) => {
                    if (((_ = /\[(\d*)\]$/.exec(y)), (y = y.replace(/\[\d*\]$/, '')), !_)) {
                        w[y] = c
                        return
                    }
                    w[y] === void 0 && (w[y] = {}), (w[y][_[1]] = c)
                }
            case 'bracket':
                return (y, c, w) => {
                    if (((_ = /(\[\])$/.exec(y)), (y = y.replace(/\[\]$/, '')), !_)) {
                        w[y] = c
                        return
                    }
                    if (w[y] === void 0) {
                        w[y] = [c]
                        return
                    }
                    w[y] = [].concat(w[y], c)
                }
            case 'comma':
            case 'separator':
                return (y, c, w) => {
                    const P = typeof c == 'string' && c.includes(h.arrayFormatSeparator),
                        b = typeof c == 'string' && !P && d(c, h).includes(h.arrayFormatSeparator)
                    c = b ? d(c, h) : c
                    const D =
                        P || b
                            ? c.split(h.arrayFormatSeparator).map((W) => d(W, h))
                            : c === null
                            ? c
                            : d(c, h)
                    w[y] = D
                }
            default:
                return (y, c, w) => {
                    if (w[y] === void 0) {
                        w[y] = c
                        return
                    }
                    w[y] = [].concat(w[y], c)
                }
        }
    }
    function a(h) {
        if (typeof h != 'string' || h.length !== 1)
            throw new TypeError('arrayFormatSeparator must be single character string')
    }
    function p(h, _) {
        return _.encode ? (_.strict ? r(h) : encodeURIComponent(h)) : h
    }
    function d(h, _) {
        return _.decode ? t(h) : h
    }
    function f(h) {
        return Array.isArray(h)
            ? h.sort()
            : typeof h == 'object'
            ? f(Object.keys(h))
                  .sort((_, y) => Number(_) - Number(y))
                  .map((_) => h[_])
            : h
    }
    function u(h) {
        const _ = h.indexOf('#')
        return _ !== -1 && (h = h.slice(0, _)), h
    }
    function E(h) {
        let _ = ''
        const y = h.indexOf('#')
        return y !== -1 && (_ = h.slice(y)), _
    }
    function S(h) {
        h = u(h)
        const _ = h.indexOf('?')
        return _ === -1 ? '' : h.slice(_ + 1)
    }
    function m(h, _) {
        return (
            _.parseNumbers && !Number.isNaN(Number(h)) && typeof h == 'string' && h.trim() !== ''
                ? (h = Number(h))
                : _.parseBooleans &&
                  h !== null &&
                  (h.toLowerCase() === 'true' || h.toLowerCase() === 'false') &&
                  (h = h.toLowerCase() === 'true'),
            h
        )
    }
    function R(h, _) {
        ;(_ = Object.assign(
            {
                decode: !0,
                sort: !0,
                arrayFormat: 'none',
                arrayFormatSeparator: ',',
                parseNumbers: !1,
                parseBooleans: !1,
            },
            _
        )),
            a(_.arrayFormatSeparator)
        const y = l(_),
            c = Object.create(null)
        if (typeof h != 'string' || ((h = h.trim().replace(/^[?#&]/, '')), !h)) return c
        for (const w of h.split('&')) {
            if (w === '') continue
            let [P, b] = i(_.decode ? w.replace(/\+/g, ' ') : w, '=')
            ;(b =
                b === void 0 ? null : ['comma', 'separator'].includes(_.arrayFormat) ? b : d(b, _)),
                y(d(P, _), b, c)
        }
        for (const w of Object.keys(c)) {
            const P = c[w]
            if (typeof P == 'object' && P !== null)
                for (const b of Object.keys(P)) P[b] = m(P[b], _)
            else c[w] = m(P, _)
        }
        return _.sort === !1
            ? c
            : (_.sort === !0 ? Object.keys(c).sort() : Object.keys(c).sort(_.sort)).reduce(
                  (w, P) => {
                      const b = c[P]
                      return (
                          b && typeof b == 'object' && !Array.isArray(b)
                              ? (w[P] = f(b))
                              : (w[P] = b),
                          w
                      )
                  },
                  Object.create(null)
              )
    }
    ;(e.extract = S),
        (e.parse = R),
        (e.stringify = (h, _) => {
            if (!h) return ''
            ;(_ = Object.assign(
                { encode: !0, strict: !0, arrayFormat: 'none', arrayFormatSeparator: ',' },
                _
            )),
                a(_.arrayFormatSeparator)
            const y = (b) => (_.skipNull && n(h[b])) || (_.skipEmptyString && h[b] === ''),
                c = s(_),
                w = {}
            for (const b of Object.keys(h)) y(b) || (w[b] = h[b])
            const P = Object.keys(w)
            return (
                _.sort !== !1 && P.sort(_.sort),
                P.map((b) => {
                    const D = h[b]
                    return D === void 0
                        ? ''
                        : D === null
                        ? p(b, _)
                        : Array.isArray(D)
                        ? D.reduce(c(b), []).join('&')
                        : p(b, _) + '=' + p(D, _)
                })
                    .filter((b) => b.length > 0)
                    .join('&')
            )
        }),
        (e.parseUrl = (h, _) => {
            _ = Object.assign({ decode: !0 }, _)
            const [y, c] = i(h, '#')
            return Object.assign(
                { url: y.split('?')[0] || '', query: R(S(h), _) },
                _ && _.parseFragmentIdentifier && c ? { fragmentIdentifier: d(c, _) } : {}
            )
        }),
        (e.stringifyUrl = (h, _) => {
            _ = Object.assign({ encode: !0, strict: !0 }, _)
            const y = u(h.url).split('?')[0] || '',
                c = e.extract(h.url),
                w = e.parse(c, { sort: !1 }),
                P = Object.assign(w, h.query)
            let b = e.stringify(P, _)
            b && (b = `?${b}`)
            let D = E(h.url)
            return h.fragmentIdentifier && (D = `#${p(h.fragmentIdentifier, _)}`), `${y}${b}${D}`
        }),
        (e.pick = (h, _, y) => {
            y = Object.assign({ parseFragmentIdentifier: !0 }, y)
            const { url: c, query: w, fragmentIdentifier: P } = e.parseUrl(h, y)
            return e.stringifyUrl({ url: c, query: o(w, _), fragmentIdentifier: P }, y)
        }),
        (e.exclude = (h, _, y) => {
            const c = Array.isArray(_) ? (w) => !_.includes(w) : (w, P) => !_(w, P)
            return e.pick(h, c, y)
        })
})(Fe)
function _t(e) {
    var r = new URL(e.response.url),
        t = r.origin,
        i = r.pathname,
        o = r.search,
        n = r.hash,
        s = '',
        l = e,
        a = l.callback_url,
        p = l.request
    if (a === 'postMessage') s = (o ? '&' : '?') + 'callback=postMessage'
    else if (a && p) {
        var d = new URL(a),
            f = O.__assign({}, Fe.parse(d.search))
        ;(f.request = encodeURIComponent(JSON.stringify(p))),
            (d.search = Fe.stringify(f)),
            (s = (o ? '&' : '?') + 'callback=' + encodeURIComponent(d.toString()))
    }
    return '' + t + i + o + s + n
}
function Ki(e) {
    var r = e.response,
        t = e.window,
        i = new URL(r.url).origin
    return new Promise(function (o, n) {
        var s = function (l) {
            l.origin === i &&
                (t.removeEventListener('message', s),
                t.close(),
                l.data.status === 'success' ? o(l.data) : n(l.data))
        }
        t.addEventListener('message', s),
            (t.location.href = _t({ response: r, callback_url: 'postMessage' }))
    })
}
var Ls = Zi
function ks(e, r) {
    return Ls(e, r)
}
var oi = ks
function Bs(e) {
    return e.withdraw !== void 0 && e.deposit !== void 0
}
function Fs(e) {
    if (!Bs(e)) throw new Error("The endpoint didn't return a valid info response!")
    var r = e,
        t = r.fee,
        i = r.transactions,
        o = r.transaction
    return { withdraw: Ks(e), deposit: Gs(e), fee: t, transactions: i, transaction: o }
}
var Gi = function (e, r) {
    var t = e.fee_fixed,
        i = e.fee_percent
    return (t !== void 0 && Number(t) >= 0) || (i !== void 0 && Number(i) >= 0)
        ? { type: 'simple', fixed: t, percent: i }
        : { type: r ? 'complex' : 'none' }
}
function qs(e) {
    var r = e[0],
        t = e[1]
    return { name: r, fields: Object.entries(t.fields || {}).map(Wi) }
}
function Wi(e) {
    var r = e[0],
        t = e[1]
    return O.__assign({}, t, { name: r })
}
function Ks(e) {
    return Object.entries(e.withdraw).reduce(function (r, t) {
        var i = t[0],
            o = t[1],
            n = Gi(o, !!(e.fee && e.fee.enabled))
        return (
            (r[i] = {
                asset_code: i,
                fee: n,
                min_amount: o.min_amount,
                max_amount: o.max_amount,
                authentication_required: !!o.authentication_required,
                types: Object.entries(o.types || {}).map(qs),
            }),
            r
        )
    }, {})
}
function Gs(e) {
    return Object.entries(e.deposit).reduce(function (r, t) {
        var i = t[0],
            o = t[1],
            n = Gi(o, !!(e.fee && e.fee.enabled))
        return (
            (r[i] = {
                asset_code: i,
                fee: n,
                min_amount: o.min_amount,
                max_amount: o.max_amount,
                authentication_required: !!o.authentication_required,
                fields: Object.entries(o.fields || {}).map(Wi),
            }),
            r
        )
    }, {})
}
function ai(e) {
    return (
        e._id && e.id === void 0 && (e.id = e._id),
        e.amount &&
            e.amount_in === void 0 &&
            e.amount_out === void 0 &&
            ((e.amount_in = e.amount), (e.amount_out = e.amount)),
        e
    )
}
var Qi = (function () {
        function e(r, t, i, o) {
            if (!r) throw new Error('Required parameter `transferServer` missing!')
            if (!t) throw new Error('Required parameter `account` missing!')
            if (!o) throw new Error('Required parameter `operation` missing!')
            ;(this.transferServer = r.replace(/\/$/, '')),
                (this.operation = o),
                (this.account = t),
                (this.lang = i),
                (this._watchOneTransactionRegistry = {}),
                (this._watchAllTransactionsRegistry = {}),
                (this._transactionsRegistry = {}),
                (this._transactionsIgnoredRegistry = {}),
                (this._oneTransactionWatcher = {})
        }
        return (
            (e.prototype.fetchInfo = function () {
                return O.__awaiter(this, void 0, void 0, function () {
                    var r, t, i, o, n, s, l, a
                    return O.__generator(this, function (p) {
                        switch (p.label) {
                            case 0:
                                return [4, fetch(this.transferServer + '/info?lang=' + this.lang)]
                            case 1:
                                return (r = p.sent()), r.ok ? [3, 3] : [4, r.text()]
                            case 2:
                                t = p.sent()
                                try {
                                    throw (
                                        ((i = JSON.parse(t)),
                                        (o = i.error),
                                        (n = i.message),
                                        new Error(
                                            'Error fetching info from ' +
                                                this.transferServer +
                                                ': error ' +
                                                (o || n)
                                        ))
                                    )
                                } catch {
                                    throw new Error(
                                        'Error fetching info from ' +
                                            this.transferServer +
                                            `: error 
          code ` +
                                            r.status +
                                            ', response text: "' +
                                            t +
                                            '"'
                                    )
                                }
                                p.label = 3
                            case 3:
                                return [4, r.text()]
                            case 4:
                                s = p.sent()
                                try {
                                    return (l = JSON.parse(s)), (a = Fs(l)), (this.info = a), [2, a]
                                } catch {
                                    throw new Error(
                                        'Error parsing the response of ' +
                                            this.transferServer +
                                            '/info as JSON: ' +
                                            s
                                    )
                                }
                                return [2]
                        }
                    })
                })
            }),
            (e.prototype.getHeaders = function (r) {
                if ((r === void 0 && (r = {}), r.Authorization && this.authToken))
                    throw new Error(
                        'You passed an `Authorization` header that will get wiped out by SEP-10 auth'
                    )
                return new Headers(
                    this.authToken
                        ? O.__assign({}, r, { Authorization: 'Bearer ' + this.authToken })
                        : r
                )
            }),
            (e.prototype.setAuthToken = function (r) {
                this.authToken = r
            }),
            (e.prototype.fetchTransactions = function (r) {
                return O.__awaiter(this, void 0, void 0, function () {
                    var t, i, o, n, s, l, a, p, d
                    return O.__generator(this, function (f) {
                        switch (f.label) {
                            case 0:
                                return (
                                    (t = this.getAuthStatus('fetchTransactions', r.asset_code)),
                                    r.show_all_transactions ||
                                        (i =
                                            r.kind ||
                                            (this.operation === 'deposit'
                                                ? 'deposit'
                                                : 'withdrawal')),
                                    [
                                        4,
                                        fetch(
                                            this.transferServer +
                                                '/transactions?' +
                                                Fe.stringify(O.__assign({}, r, { kind: i })),
                                            { headers: t ? this.getHeaders() : void 0 }
                                        ),
                                    ]
                                )
                            case 1:
                                return (o = f.sent()), o.ok ? [3, 3] : [4, o.text()]
                            case 2:
                                n = f.sent()
                                try {
                                    throw (
                                        ((s = JSON.parse(n)),
                                        (l = s.error),
                                        (a = s.message),
                                        new Error(
                                            'Error fetching transactions from ' +
                                                this.transferServer +
                                                ': error ' +
                                                (l || a)
                                        ))
                                    )
                                } catch {
                                    throw new Error(
                                        'Error fetching transactions from ' +
                                            this.transferServer +
                                            `: error 
          code ` +
                                            o.status +
                                            ', response text: "' +
                                            n +
                                            '"'
                                    )
                                }
                                f.label = 3
                            case 3:
                                return [4, o.text()]
                            case 4:
                                p = f.sent()
                                try {
                                    return (d = JSON.parse(p).transactions), [2, d.map(ai)]
                                } catch {
                                    throw new Error(
                                        'Invalid transaction response from ' +
                                            this.transferServer +
                                            ': ' +
                                            p
                                    )
                                }
                                return [2]
                        }
                    })
                })
            }),
            (e.prototype.fetchTransaction = function (r, t) {
                return (
                    t === void 0 && (t = !1),
                    O.__awaiter(this, void 0, void 0, function () {
                        var i, o, n, s, l, a, p, d, f, u, E, S, m, R
                        return O.__generator(this, function (h) {
                            switch (h.label) {
                                case 0:
                                    if (
                                        ((i = r.asset_code),
                                        (o = r.id),
                                        (n = r.stellar_transaction_id),
                                        (s = r.external_transaction_id),
                                        (l = r.lang),
                                        o === void 0 && n === void 0 && s === void 0)
                                    )
                                        throw new Error(
                                            'fetchTransaction: One of `id`, `external_transaction_id`, or `stellar_transaction_id` must be provided! '
                                        )
                                    return (
                                        (a = this.getAuthStatus(
                                            t ? 'watchOneTransaction' : 'fetchTransaction',
                                            i
                                        )),
                                        (p = {}),
                                        o
                                            ? (p = { id: o })
                                            : n
                                            ? (p = { stellar_transaction_id: n })
                                            : s && (p = { external_transaction_id: s }),
                                        l && (p = O.__assign({ lang: l }, p)),
                                        [
                                            4,
                                            fetch(
                                                this.transferServer +
                                                    '/transaction?' +
                                                    Fe.stringify(p),
                                                { headers: a ? this.getHeaders() : void 0 }
                                            ),
                                        ]
                                    )
                                case 1:
                                    return (d = h.sent()), d.ok ? [3, 3] : [4, d.text()]
                                case 2:
                                    f = h.sent()
                                    try {
                                        throw (
                                            ((u = JSON.parse(f)),
                                            (E = u.error),
                                            (S = u.message),
                                            new Error(
                                                'Error fetching transaction ' +
                                                    p +
                                                    ' from ' +
                                                    this.transferServer +
                                                    ': error ' +
                                                    (E || S)
                                            ))
                                        )
                                    } catch {
                                        throw new Error(
                                            'Error fetching transaction ' +
                                                p +
                                                ' from ' +
                                                this.transferServer +
                                                `: error 
          code ` +
                                                d.status +
                                                ', response text: "' +
                                                f +
                                                '"'
                                        )
                                    }
                                    h.label = 3
                                case 3:
                                    return [4, d.text()]
                                case 4:
                                    m = h.sent()
                                    try {
                                        return (R = JSON.parse(m).transaction), [2, ai(R)]
                                    } catch {
                                        throw new Error(
                                            "Fetch transaction response wasn't valid JSON: " + m
                                        )
                                    }
                                    return [2]
                            }
                        })
                    })
                )
            }),
            (e.prototype.watchAllTransactions = function (r) {
                var t = this,
                    i,
                    o = r.asset_code,
                    n = r.onMessage,
                    s = r.onError,
                    l = r.watchlist,
                    a = l === void 0 ? [] : l,
                    p = r.timeout,
                    d = p === void 0 ? 5e3 : p,
                    f = r.isRetry,
                    u = f === void 0 ? !1 : f,
                    E = O.__rest(r, [
                        'asset_code',
                        'onMessage',
                        'onError',
                        'watchlist',
                        'timeout',
                        'isRetry',
                    ]),
                    S = a.reduce(function (m, R) {
                        var h
                        return O.__assign({}, m, ((h = {}), (h[R] = !0), h))
                    }, {})
                return (
                    u ||
                        (this._watchAllTransactionsRegistry = O.__assign(
                            {},
                            this._watchAllTransactionsRegistry,
                            ((i = {}), (i[o] = !0), i)
                        )),
                    this.fetchTransactions(O.__assign({ asset_code: o }, E || {}))
                        .then(function (m) {
                            if (t._watchAllTransactionsRegistry[o]) {
                                try {
                                    var R = m.filter(function (h) {
                                        var _ =
                                                h.status.indexOf('pending') === 0 ||
                                                h.status === Pe.incomplete,
                                            y = t._transactionsRegistry[o][h.id]
                                        return u
                                            ? y
                                                ? !oi(y, h)
                                                : !!(
                                                      ([
                                                          Pe.completed,
                                                          Pe.refunded,
                                                          Pe.error,
                                                      ].includes(h.status) &&
                                                          u &&
                                                          !t._transactionsIgnoredRegistry[o][
                                                              h.id
                                                          ]) ||
                                                      _
                                                  )
                                            : S[h.id]
                                            ? !0
                                            : (_ || (t._transactionsIgnoredRegistry[o][h.id] = h),
                                              _)
                                    })
                                    R.forEach(function (h) {
                                        ;(t._transactionsRegistry[o][h.id] = h),
                                            h.status === Pe.error ? s(h) : n(h)
                                    })
                                } catch (h) {
                                    s(h)
                                    return
                                }
                                t._allTransactionsWatcher &&
                                    clearTimeout(t._allTransactionsWatcher),
                                    (t._allTransactionsWatcher = setTimeout(function () {
                                        t.watchAllTransactions(
                                            O.__assign(
                                                {
                                                    asset_code: o,
                                                    onMessage: n,
                                                    onError: s,
                                                    timeout: d,
                                                    isRetry: !0,
                                                },
                                                E || {}
                                            )
                                        )
                                    }, d))
                            }
                        })
                        .catch(function (m) {
                            s(m)
                        }),
                    {
                        refresh: function () {
                            t._watchAllTransactionsRegistry[o] &&
                                (t._allTransactionsWatcher &&
                                    clearTimeout(t._allTransactionsWatcher),
                                t.watchAllTransactions(
                                    O.__assign(
                                        {
                                            asset_code: o,
                                            onMessage: n,
                                            onError: s,
                                            timeout: d,
                                            isRetry: !0,
                                        },
                                        E || {}
                                    )
                                ))
                        },
                        stop: function () {
                            t._allTransactionsWatcher &&
                                ((t._watchAllTransactionsRegistry[o] = !1),
                                (t._transactionsRegistry[o] = {}),
                                (t._transactionsIgnoredRegistry[o] = {}),
                                clearTimeout(t._allTransactionsWatcher))
                        },
                    }
                )
            }),
            (e.prototype.watchOneTransaction = function (r) {
                var t = this,
                    i,
                    o,
                    n = r.asset_code,
                    s = r.id,
                    l = r.external_transaction_id,
                    a = r.stellar_transaction_id,
                    p = r.onMessage,
                    d = r.onSuccess,
                    f = r.onError,
                    u = r.timeout,
                    E = u === void 0 ? 5e3 : u,
                    S = r.isRetry,
                    m = S === void 0 ? !1 : S,
                    R = O.__rest(r, [
                        'asset_code',
                        'id',
                        'external_transaction_id',
                        'stellar_transaction_id',
                        'onMessage',
                        'onSuccess',
                        'onError',
                        'timeout',
                        'isRetry',
                    ]),
                    h = s || l || a
                if (h === void 0)
                    throw new Error(
                        'fetchTransaction: One of `id`, `external_transaction_id`, or `stellar_transaction_id` must be provided! '
                    )
                return (
                    m ||
                        (this._watchOneTransactionRegistry = O.__assign(
                            {},
                            this._watchOneTransactionRegistry,
                            ((i = {}),
                            (i[n] = O.__assign(
                                {},
                                this._watchOneTransactionRegistry[n] || {},
                                ((o = {}), (o[h] = !0), o)
                            )),
                            i)
                        )),
                    this.fetchTransaction(O.__assign({ asset_code: n, id: s }, R || {}), !0)
                        .then(function (_) {
                            if (
                                t._watchOneTransactionRegistry[n] &&
                                t._watchOneTransactionRegistry[n][h]
                            ) {
                                var y = t._transactionsRegistry[n][_.id]
                                ;(y && oi(y, _)) ||
                                    ((t._transactionsRegistry[n][_.id] = _),
                                    _.status.indexOf('pending') === 0
                                        ? (t._oneTransactionWatcher[h] &&
                                              clearTimeout(t._oneTransactionWatcher[h]),
                                          (t._oneTransactionWatcher[h] = setTimeout(function () {
                                              t.watchOneTransaction(
                                                  O.__assign(
                                                      {
                                                          asset_code: n,
                                                          id: s,
                                                          external_transaction_id: l,
                                                          stellar_transaction_id: a,
                                                          onMessage: p,
                                                          onSuccess: d,
                                                          onError: f,
                                                          timeout: E,
                                                          isRetry: !0,
                                                      },
                                                      R || {}
                                                  )
                                              )
                                          }, E)),
                                          p(_))
                                        : [Pe.completed, Pe.refunded].includes(_.status)
                                        ? d(_)
                                        : f(_))
                            }
                        })
                        .catch(function (_) {
                            f(_)
                        }),
                    {
                        refresh: function () {
                            t._watchOneTransactionRegistry[n] &&
                                t._watchOneTransactionRegistry[n][h] &&
                                (t._oneTransactionWatcher[h] &&
                                    clearTimeout(t._oneTransactionWatcher[h]),
                                t.watchOneTransaction(
                                    O.__assign(
                                        {
                                            asset_code: n,
                                            id: s,
                                            external_transaction_id: l,
                                            stellar_transaction_id: a,
                                            onMessage: p,
                                            onSuccess: d,
                                            onError: f,
                                            timeout: E,
                                            isRetry: !0,
                                        },
                                        R || {}
                                    )
                                ))
                        },
                        stop: function () {
                            t._oneTransactionWatcher[h] &&
                                ((t._watchOneTransactionRegistry[n][h] = !1),
                                clearTimeout(t._oneTransactionWatcher[h]))
                        },
                    }
                )
            }),
            (e.prototype.fetchFinalFee = function (r) {
                return O.__awaiter(this, void 0, void 0, function () {
                    var t, i, o, n, s, l, a, p, d, f, u
                    return O.__generator(this, function (E) {
                        switch (E.label) {
                            case 0:
                                if (!this.info || !this.info[this.operation])
                                    throw new Error(
                                        'Run fetchSupportedAssets before running fetchFinalFee!'
                                    )
                                if (((t = this.info[this.operation][r.asset_code]), !t))
                                    throw new Error(
                                        "Can't get fee for an unsupported asset, '" + r.asset_code
                                    )
                                switch (((i = t.fee), (o = i.type), o)) {
                                    case 'none':
                                        return [3, 1]
                                    case 'simple':
                                        return [3, 2]
                                    case 'complex':
                                        return [3, 3]
                                }
                                return [3, 8]
                            case 1:
                                return [2, 0]
                            case 2:
                                return (
                                    (n = i),
                                    [
                                        2,
                                        ((n.percent || 0) / 100) * Number(r.amount) +
                                            (n.fixed || 0),
                                    ]
                                )
                            case 3:
                                return [
                                    4,
                                    fetch(
                                        this.transferServer +
                                            '/fee?' +
                                            Fe.stringify(
                                                O.__assign({}, r, i, { operation: this.operation })
                                            )
                                    ),
                                ]
                            case 4:
                                return (s = E.sent()), s.ok ? [3, 6] : [4, s.text()]
                            case 5:
                                l = E.sent()
                                try {
                                    throw (
                                        ((a = JSON.parse(l)),
                                        (p = a.error),
                                        (d = a.message),
                                        new Error(
                                            'Error fetching fees from ' +
                                                this.transferServer +
                                                ': error ' +
                                                (p || d)
                                        ))
                                    )
                                } catch {
                                    throw new Error(
                                        'Error fetching fees from ' +
                                            this.transferServer +
                                            `: error 
              code ` +
                                            s.status +
                                            ', response text: "' +
                                            l +
                                            '"'
                                    )
                                }
                                E.label = 6
                            case 6:
                                return [4, s.text()]
                            case 7:
                                f = E.sent()
                                try {
                                    return (u = JSON.parse(f).fee), [2, u]
                                } catch {
                                    throw new Error('Fee endpoint returned invalid JSON: ' + f)
                                }
                                E.label = 8
                            case 8:
                                throw new Error(
                                    "Invalid fee type found! Got '" +
                                        i.type +
                                        "' but expected one of 'none', 'simple', 'complex'"
                                )
                        }
                    })
                })
            }),
            (e.prototype.getAuthStatus = function (r, t) {
                if (!t) throw new Error('Required parameter `asset_code` not provided!')
                if (!this.info || !this.info[this.operation])
                    throw new Error('Run fetchSupportedAssets before running ' + r + '!')
                var i = this.info[this.operation][t]
                if (!i)
                    throw new Error('Asset ' + t + ' is not supported by ' + this.transferServer)
                if (!this.authToken)
                    throw new Error(
                        `
        Asset ` +
                            t +
                            ` requires authentication. Run KeyManager's 
        fetchAuthToken function, then run setAuthToken to set it.
        `
                    )
                return !0
            }),
            e
        )
    })(),
    Ws = /^[^\s@]+@[^\s@]+\.[^\s@]+$/
function Qs(e) {
    return !!e.match(Ws)
}
;(function (e) {
    O.__extends(r, e)
    function r(t, i, o) {
        return o === void 0 && (o = 'en'), e.call(this, t, i, o, 'deposit') || this
    }
    return (
        (r.prototype.startDeposit = function (t, i, o) {
            return (
                i === void 0 && (i = !1),
                o === void 0 && (o = {}),
                O.__awaiter(this, void 0, void 0, function () {
                    var n, s, l, a, p, d, f, u, S, E, S, m, R, h, _, y
                    return O.__generator(this, function (c) {
                        switch (c.label) {
                            case 0:
                                return (
                                    (n = O.__assign({}, t, {
                                        account: this.account,
                                        lang: this.lang,
                                    })),
                                    (s = this.getAuthStatus('deposit', t.asset_code)),
                                    i
                                        ? ((p = new FormData()),
                                          Object.keys(n).forEach(function (w) {
                                              p.append(w, n[w])
                                          }),
                                          [
                                              4,
                                              fetch(
                                                  this.transferServer +
                                                      '/transactions/deposit/interactive',
                                                  {
                                                      method: 'POST',
                                                      body: p,
                                                      headers: s ? this.getHeaders(o) : void 0,
                                                  }
                                              ),
                                          ])
                                        : [3, 2]
                                )
                            case 1:
                                return (l = c.sent()), [3, 4]
                            case 2:
                                return (
                                    (d = Fe.stringify(n)),
                                    [
                                        4,
                                        fetch(this.transferServer + '/deposit?' + d, {
                                            headers: s ? this.getHeaders(o) : void 0,
                                        }),
                                    ]
                                )
                            case 3:
                                ;(l = c.sent()), (c.label = 4)
                            case 4:
                                return (
                                    (f = !i && this.transferServer.includes('anchorusd.com')),
                                    !l.ok && !f ? [4, l.text()] : [3, 6]
                                )
                            case 5:
                                u = c.sent()
                                try {
                                    throw (
                                        ((S = JSON.parse(u).error),
                                        new Error(
                                            'Error starting deposit to ' +
                                                this.transferServer +
                                                ': error ' +
                                                S
                                        ))
                                    )
                                } catch {
                                    throw new Error(
                                        'Error starting deposit to ' +
                                            this.transferServer +
                                            `: error 
          code ` +
                                            l.status +
                                            ', status text: "' +
                                            u +
                                            '"'
                                    )
                                }
                                c.label = 6
                            case 6:
                                return [4, l.text()]
                            case 7:
                                E = c.sent()
                                try {
                                    a = JSON.parse(E)
                                } catch {
                                    throw new Error(
                                        'Error parsing the deposit response as JSON: ' + E
                                    )
                                }
                                if (a.error)
                                    throw (
                                        ((S = new Error(
                                            typeof a.error == 'string'
                                                ? a.error
                                                : JSON.stringify(a.error)
                                        )),
                                        (S.originalResponse = a),
                                        S)
                                    )
                                return (
                                    s &&
                                        a.type === Ue.interactive_customer_info_needed &&
                                        a.url &&
                                        a.url.indexOf('jwt') === -1 &&
                                        ((m = new URL(a.url)),
                                        (R = m.origin),
                                        (h = m.pathname),
                                        (_ = m.search),
                                        (y = m.hash),
                                        (a.url =
                                            '' +
                                            R +
                                            h +
                                            _ +
                                            (_ ? '&' : '?') +
                                            'jwt=' +
                                            this.authToken +
                                            y)),
                                    (this.request = n),
                                    (this.response = a),
                                    [2, a]
                                )
                        }
                    })
                })
            )
        }),
        (r.prototype.fetchSupportedAssets = function () {
            return O.__awaiter(this, void 0, void 0, function () {
                var t,
                    i = this
                return O.__generator(this, function (o) {
                    switch (o.label) {
                        case 0:
                            return [4, this.fetchInfo()]
                        case 1:
                            return (
                                (t = o.sent().deposit),
                                Object.keys(t).forEach(function (n) {
                                    ;(i._watchOneTransactionRegistry[n] =
                                        i._watchOneTransactionRegistry[n] || {}),
                                        (i._watchAllTransactionsRegistry[n] = !1),
                                        (i._transactionsRegistry[n] =
                                            i._transactionsRegistry[n] || {}),
                                        (i._transactionsIgnoredRegistry[n] =
                                            i._transactionsIgnoredRegistry[n] || {})
                                }),
                                [2, t]
                            )
                    }
                })
            })
        }),
        (r.prototype.getAssetInfo = function (t) {
            if (!this.info || !this.info[this.operation])
                throw new Error('Run fetchSupportedAssets before running getAssetInfo!')
            if (!this.info[this.operation][t]) throw new Error('Asset not supported: ' + t)
            return this.info[this.operation][t]
        }),
        (r.prototype.fetchKycInBrowser = function (t) {
            return O.__awaiter(this, void 0, void 0, function () {
                var i
                return O.__generator(this, function (o) {
                    switch (o.label) {
                        case 0:
                            if (!this.response || !this.request)
                                throw new Error(
                                    'Run startDeposit before calling fetchKycInBrowser!'
                                )
                            if (
                                this.response.type !== Ue.interactive_customer_info_needed ||
                                !this.response.url
                            )
                                throw new Error('KYC not needed for this deposit!')
                            return [
                                4,
                                Ki({ response: this.response, request: this.request, window: t }),
                            ]
                        case 1:
                            if (((i = o.sent()), i.type === Ue.customer_info_status))
                                switch (i.status) {
                                    case 'denied':
                                        return [2, Promise.reject(i)]
                                    case 'pending':
                                        return [2, Promise.reject(i)]
                                    case 'success':
                                        return [2, Promise.resolve(i)]
                                    default:
                                        throw new Error(
                                            "Invalid KYC response received: '" + i.status + "'."
                                        )
                                }
                            return i.status === Pe.completed
                                ? [2, Promise.resolve(i)]
                                : [2, Promise.reject(i)]
                    }
                })
            })
        }),
        (r.prototype.getKycUrl = function (t) {
            if (!this.response || !this.request)
                throw new Error('Run startDeposit before calling getKycUrl!')
            if (this.response.type !== Ue.interactive_customer_info_needed || !this.response.url)
                throw new Error('KYC not needed for this deposit!')
            return _t({ response: this.response, request: this.request, callback_url: t })
        }),
        (r.prototype.validateFields = function (t, i) {
            if (!this.info || !this.info[this.operation])
                throw new Error('Run fetchSupportedAssets before running fetchFinalFee!')
            var o = this.info[this.operation][t]
            if (!o) throw new Error("Can't get fee for an unsupported asset, '" + t)
            var n = o.fields || []
            return n.reduce(function (s, l) {
                if (!s || l.optional) return s
                var a = i[l.name]
                if (!a) return !1
                if (l.choices) {
                    var p = l.choices.reduce(function (d, f) {
                        var u
                        return O.__assign({}, d, ((u = {}), (u[f] = !0), u))
                    }, {})
                    if (!p[a]) return !1
                }
                return l.name === 'email' ||
                    (l.name === 'email_address' && !Qs(a)) ||
                    (l.name === 'amount' && isNaN(parseFloat(a)))
                    ? !1
                    : s
            }, !0)
        }),
        r
    )
})(Qi)
;(function (e) {
    O.__extends(r, e)
    function r(t, i, o) {
        return o === void 0 && (o = 'en'), e.call(this, t, i, o, 'withdraw') || this
    }
    return (
        (r.prototype.startWithdraw = function (t, i, o) {
            return (
                i === void 0 && (i = !1),
                o === void 0 && (o = {}),
                O.__awaiter(this, void 0, void 0, function () {
                    var n, s, l, a, p, d, f, u, S, E, S, m, R, h, _, y
                    return O.__generator(this, function (c) {
                        switch (c.label) {
                            case 0:
                                return (
                                    (n = O.__assign({}, t, {
                                        account: this.account,
                                        lang: this.lang,
                                    })),
                                    (s = this.getAuthStatus('withdraw', t.asset_code)),
                                    i
                                        ? ((p = new FormData()),
                                          Object.keys(n).forEach(function (w) {
                                              p.append(w, n[w])
                                          }),
                                          [
                                              4,
                                              fetch(
                                                  this.transferServer +
                                                      '/transactions/withdraw/interactive',
                                                  {
                                                      method: 'POST',
                                                      body: p,
                                                      headers: s ? this.getHeaders(o) : void 0,
                                                  }
                                              ),
                                          ])
                                        : [3, 2]
                                )
                            case 1:
                                return (l = c.sent()), [3, 4]
                            case 2:
                                return (
                                    (d = Fe.stringify(n)),
                                    [
                                        4,
                                        fetch(this.transferServer + '/withdraw?' + d, {
                                            headers: s ? this.getHeaders(o) : void 0,
                                        }),
                                    ]
                                )
                            case 3:
                                ;(l = c.sent()), (c.label = 4)
                            case 4:
                                return (
                                    (f = !i && this.transferServer.includes('anchorusd.com')),
                                    !l.ok && !f ? [4, l.text()] : [3, 6]
                                )
                            case 5:
                                u = c.sent()
                                try {
                                    throw (
                                        ((S = JSON.parse(u).error),
                                        new Error(
                                            'Error starting withdrawal to ' +
                                                this.transferServer +
                                                ': error ' +
                                                S
                                        ))
                                    )
                                } catch {
                                    throw new Error(
                                        'Error starting withdrawal to ' +
                                            this.transferServer +
                                            `: error 
          code ` +
                                            l.status +
                                            ', status text: "' +
                                            u +
                                            '"'
                                    )
                                }
                                c.label = 6
                            case 6:
                                return [4, l.text()]
                            case 7:
                                E = c.sent()
                                try {
                                    a = JSON.parse(E)
                                } catch {
                                    throw new Error(
                                        'Error parsing the deposit response as JSON: ' + E
                                    )
                                }
                                if (a.error)
                                    throw ((S = new Error(a.error)), (S.originalResponse = a), S)
                                return (
                                    s &&
                                        a.type === Ue.interactive_customer_info_needed &&
                                        a.url &&
                                        a.url.indexOf('jwt') === -1 &&
                                        ((m = new URL(a.url)),
                                        (R = m.origin),
                                        (h = m.pathname),
                                        (_ = m.search),
                                        (y = m.hash),
                                        (a.url =
                                            '' +
                                            R +
                                            h +
                                            _ +
                                            (_ ? '&' : '?') +
                                            'jwt=' +
                                            this.authToken +
                                            y)),
                                    (this.request = n),
                                    (this.response = a),
                                    [2, a]
                                )
                        }
                    })
                })
            )
        }),
        (r.prototype.fetchSupportedAssets = function () {
            return O.__awaiter(this, void 0, void 0, function () {
                var t,
                    i = this
                return O.__generator(this, function (o) {
                    switch (o.label) {
                        case 0:
                            return [4, this.fetchInfo()]
                        case 1:
                            return (
                                (t = o.sent().withdraw),
                                Object.keys(t).forEach(function (n) {
                                    ;(i._watchOneTransactionRegistry[n] =
                                        i._watchOneTransactionRegistry[n] || {}),
                                        (i._watchAllTransactionsRegistry[n] = !1),
                                        (i._transactionsRegistry[n] =
                                            i._transactionsRegistry[n] || {}),
                                        (i._transactionsIgnoredRegistry[n] =
                                            i._transactionsIgnoredRegistry[n] || {})
                                }),
                                [2, t]
                            )
                    }
                })
            })
        }),
        (r.prototype.getAssetInfo = function (t) {
            if (!this.info || !this.info[this.operation])
                throw new Error('Run fetchSupportedAssets before running getAssetInfo!')
            if (!this.info[this.operation][t]) throw new Error('Asset not supported: ' + t)
            return this.info[this.operation][t]
        }),
        (r.prototype.fetchKycInBrowser = function (t) {
            return O.__awaiter(this, void 0, void 0, function () {
                var i
                return O.__generator(this, function (o) {
                    switch (o.label) {
                        case 0:
                            if (!this.response || !this.request)
                                throw new Error(
                                    'Run startWithdraw before calling fetchKycInBrowser!'
                                )
                            if (
                                this.response.type !== Ue.interactive_customer_info_needed ||
                                !this.response.url
                            )
                                throw new Error('KYC not needed for this withdrawal!')
                            return [
                                4,
                                Ki({ response: this.response, request: this.request, window: t }),
                            ]
                        case 1:
                            if (((i = o.sent()), i.type === Ue.customer_info_status))
                                switch (i.status) {
                                    case 'denied':
                                        return [2, Promise.reject(i)]
                                    case 'pending':
                                        return [2, Promise.reject(i)]
                                    case 'success':
                                        return [2, Promise.resolve(i)]
                                    default:
                                        throw new Error(
                                            "Invalid KYC response received: '" + i.status + "'."
                                        )
                                }
                            return i.status === Pe.completed
                                ? [2, Promise.resolve(i)]
                                : [2, Promise.reject(i)]
                    }
                })
            })
        }),
        (r.prototype.getKycUrl = function (t) {
            if (!this.response || !this.request)
                throw new Error('Run startWithdraw before calling getKycUrl!')
            if (this.response.type !== Ue.interactive_customer_info_needed || !this.response.url)
                throw new Error('KYC not needed for this withdrawal!')
            return _t({ response: this.response, request: this.request, callback_url: t })
        }),
        r
    )
})(Qi)
const ji = () => {
        const e = new it.LocalStorageKeyStore()
        e.configure({ prefix: 'bpa', storage: localStorage })
        const r = new ps({ keyStore: e })
        return r.registerEncrypter(it.ScryptEncrypter), r
    },
    zs = (e, r, t, i) => {
        if (t !== i) throw gr(400, 'pincode mismatch. please try again')
        if (window.localStorage.getItem('bpa:keyId') !== null)
            throw gr(
                400,
                'user already registered. please <a class="underline" href="/login">login</a> instead'
            )
        return ji()
            .storeKey({
                key: { type: we.plaintextKey, publicKey: e, privateKey: r },
                password: t.toString(),
                encrypterName: it.ScryptEncrypter.name,
            })
            .then(
                (n) => (
                    window.localStorage.setItem('bpa:keyId', n.id),
                    window.localStorage.setItem('bpa:publicKey', JSON.stringify(e)),
                    console.log('gonna return', n.id),
                    n.id
                )
            )
            .catch((n) => {
                throw (console.log('Error saving key: ', n.toString()), gr(400, n.toString()))
            })
    },
    Vs = (e, r) =>
        ji()
            .loadKey(e, r)
            .catch((i) => {
                throw (
                    (console.error('Error loading key: ', i.toString()),
                    gr(400, 'incorrect pincode'))
                )
            }),
    Js = () => {
        let e = window.localStorage.getItem('bpa:keyId'),
            r = window.localStorage.getItem('bpa:publicKey')
        return { bpaKeyId: e, bpaPublicKey: r }
    },
    Ys = () => ({ bpaPublicKey: JSON.parse(window.localStorage.getItem('bpa:publicKey')) })
export { Js as a, Ys as g, Vs as l, zs as r }
